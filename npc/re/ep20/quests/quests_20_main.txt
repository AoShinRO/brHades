// 인코딩을 EUC-KR로 유지하기 위한 한국어 문장.
//===== rAthena Script =======================================
//= Episode 20: Immortals
//===== Description: ========================================= 
//= [Walkthrough Conversion]
//--- Main quest NPCs from Episode 20
//
// Notes:
// - The NPC 'Horr#if19msdq' (Horr) is replaced in this file.
// - Completing the daily quest from Horr is required to start the ep20 main quest.
// - It is impossible to do the daily quest from Horr once the episode 20 is started.
//
// - Only daily quest reputations are accurate. However at the end of the main quest and side quests, the player should have around 1000 points.
//
// - The last value of ep20_main is 100
//
// - On official server the window box of several dialog is adjusted (window size, window position, text size, text position),
//   but this feature is not supported yet.
//===== Changelogs: ==========================================
//= 1.0 First version. [Capuche]
//============================================================

/*
Note: to clear the main quest of episode 20 properly:
	ep20_main = 100;
	completequest 8841;
	completequest 8842;
	completequest 8843;
	completequest 8846;
	completequest 8854;
	completequest 17709;
	completequest 18240;
	completequest 18223;
	completequest 18224;
	completequest 18225;
	completequest 18233;
*/

// (custom) unload 2 NPCs from ep19. The NPCS are replaced by those below for convenience. 
-	script	ep20_temporary_cleaning	-1,{
	end;
OnInit:
	unloadnpc( "#e19ms00" );
	unloadnpc( "ep19_if19msdq" );
	end;
}

// Main quest - Step 1
icecastle,27,126,0	script	#e19ms00_ep20	HIDDEN_WARP_NPC,3,5,{ 
	end;
OnTouch:
	if (ep20_main > 0)
		end;
	if (ep19_main == 13 || ep19_main == 51 || (ep19_main == 100 && isbegin_quest(17650) > 0)) {
		cloakoffnpcself( "ep20_icecastle_27_126" );
		end;
	}
	end;
}

icecastle,27,126,3	script(CLOAKED)	Horr#if19msdq::ep20_icecastle_27_126	4_EP19_IWIN,{
	if (ep19_main < 13)
		end;
	if (ep19_main == 13) {
		cutin "ep19_iwin09.png",2;
		mes "[Horr]";
		mes "Human?? Why are humans...?";
		emotion ET_QUESTION;
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Ah!! You're an adventurer from beyond the barrier this time? Nice to meet you. Is this your first time in Isgard? It's your first time. Yeah, what's your name?";
		emotion ET_SURPRISE;
		next;
		cutin "",255;
		select( "Who are you...?" );
		cutin "ep19_iwin09.png",2;
		mes "[Horr]";
		mes "Hey, I didn't even introduce myself. I'm not such a rude person, but when I came back from a long reconnaissance, I got a little excited because there were strangers.";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "^0000cdHorr^000000. There is an official name, but humans find it difficult to say? Just call me Horr.";
		mes "By the way, where are you going? It's okay to go alone around here, but don't go too far. It's dangerous.";
		next;
		cutin "",255;
		select( "I went to reconnaissance." );
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Reconnaissance? Ho... Do you think you're good enough? Then you're on your way to report?";
		mes "I'm on the way too, so come with me. After I'm done eating, I'll be at <NAVI>[restaurant]<INFO>icas_in,34,189,0,101,0</INFO></NAVI>";
		ep19_main = 14;
		erasequest 5984;
		setquest 17639;
		close2;
		cutin "",255;
		cloakonnpcself();
		end;
	}
	if (ep19_main == 51) {
		cutin "ep19_iwin07.png",2;
		mes "[Horr]";
		mes "What is this? Why did you bring Rgan here??";
		next;
		cutin "",255;
		select( "I need a place to lay down." );
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "My <NAVI>[home]<INFO>icas_in,247,116,0,101,0</INFO></NAVI> is near here, so let's go there. There are some guests who have been invited, so let's go and listen." ;
		erasequest 16661;
		setquest 17640;
		ep19_main = 52;
		close2;
		cutin "",255;
		cloakonnpcself();
		navigateto("icas_in",247,116);
		end;
	}
	if (ep19_main != 100 || ep20_main > 1) {
		cloakonnpcself();
		end;
	}
	if (ep20_main == 1) {
		mes "[Horr]";
		mes "Everyone is waiting in the ice castle, so you better hurry.";
		close3;
	}

	// daily
	if (checkweight(1000608,3) == 0) {	// Ep19_Snow_Flower
		mes "You cannot proceed with the conversation due to the large number of items you have.";
		mes "Please clean up your items and try again.";
		close;
	}
	switch( checkquest(17662,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		callsub( S_Check );
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Adventurer, have you rested for a while? But why are you here? If you're asking for a " + getitemname(1000842) + ", you don't have to worry. The battery is still a long way off. You'd better get some rest.";
		close3;
	case 2:
		callsub( S_Check );
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Are you an adventurer? I want to replace the battery of the " + getitemname(1000842) + " before it runs out. Can you help me today?";
		next;
		if (select( "Okay.", "It just happened." ) == 2) {
			mes "[Horr]";
			mes "Is that so? You caught my busy man. Then go for a walk. Have a nice day!";
			close3;
		}
		mes "[Horr]";
		mes "Thanks for the help. Then bury this in the ^0000cd10 locations^000000 marked on ^0000cdFrozen Scale Plains and Glaciers^000000. Both are where the gangs used to enter and exit.";
		erasequest 17662;
		setquest 17651;
		setquest 17652;
		setquest 17653;
		setquest 17654;
		setquest 17655;
		setquest 17656;
		setquest 17657;
		setquest 17658;
		setquest 17659;
		setquest 17660;
		getitem 1000842,10;	// Ep19_HS_FEELER
		close3;
	}
	if (isbegin_quest(17650) == 1) {	// Side quest : Surveillance for an Underground Hideout (2)
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Didn't we decide to search the snake den and find another entrance from the outside?";
		next;
		mes "[Horr]";
		mes "We've already sent a watchdog inside the snake's den. We need to find the entrance to and from the outside...";
		next;
		mes "[Horr]";
		mes "We found a few places on the surface of the snake's lair where we could dig the entrance, mainly on the weak ground.";
		next;
		cutin "",255;
		select( "That's fast" );
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "So we have to search there. Since there aren't one or two places, we don't have enough manpower, so we asked adventurers for help.";
		next;
		cutin "",255;
		select( "Can I come back there once?" );
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "No, you have to reside ^0000cdthere^000000.";
		next;
		cutin "",255;
		sleep2 500;
		emotion ET_HUK, playerattached();
		select( "Yes???" );
		cutin "ep19_iwin08.png",2;
		mes "[Horr]";
		mes "Do you mean when they know when they'll dig a new entrance and leave?";
		cloakoffnpcself( "ep19_icecastle_25_126" );
		cloakoffnpcself( "ep19_icecastle_29_125" );
		next;
		cutin "ep19_leizi01.png",0;
		mes "[Lazy]";
		mes "Adventurer!! You're here. I'm here to help because you're on a search mission!";
		next;
		cutin "ep19_juncea04.png",2;
		mes "[Juncea]";
		mes "You said you would stay in the presumed entrance and watch over it? In this cold?";
		next;
		cutin "ep19_iwin06.png",1;
		mes "[Horr]";
		mes "It's okay because we don't get cold.";
		next;
		cutin "ep19_juncea04.png",2;
		mes "[Juncea]";
		mes "Everyone who lives here has turned around. Isn't this cold?";
		next;
		cutin "ep19_leizi02.png",0;
		mes "[Lazy]";
		mes "Juncea, what do you mean when a human is dressed so thinly?";
		next;
		cutin "ep19_juncea03.png",2;
		mes "[Juncea]";
		mes "Of course I made and installed a heating device.";
		npctalk "Our Juncea, humans are so capable.", "ep19_icecastle_25_126", bc_self;
		next;
		cutin "ep19_juncea04.png",2;
		mes "[Juncea]";
		mes "You like that? Why did you wear it thick at the best and unravel the front?";
		next;
		cutin "ep19_leizi01.png",0;
		mes "[Lazy]";
		mes "Oh, this? I have a lot of heat in my body and I hate stuffiness.";
		next;
		cutin "ep19_leizi02.png",0;
		mes "[Lazy]";
		mes "Actually, it's okay not to wear something like this in this kind of weather, but I wore it out of fear that people watching would get cold.";
		next;
		cutin "ep19_leizi03.png",0;
		mes "[Lazy]";
		mes "I'm in this place in this weather, dressed as a tourist. Wouldn't it be colder for people watching?";
		next;
		select( "That would be a bit difficult." );
		cutin "ep19_leizi01.png",0;
		mes "[Lazy]";
		mes "Isn't that right? I'm considering other people's eye temperature, so I wore it while putting up with stuffiness. I'm such a caring person.";
		next;
		cutin "ep19_juncea03.png",2;
		mes "[Juncea]";
		mes "Oh, ah. Okay, so don't say any more. Just listening to what you say makes you tired.";
		next;
		cutin "ep19_juncea01.png",2;
		mes "[Juncea]";
		mes "But I don't need you, so why the hell did you follow me? You're not running away. You can't break through that barrier anyway, so if you ran away, you'd be here. You don't have to monitor.";
		next;
		cutin "ep19_leizi01.png",0;
		mes "[Lazy]";
		mes "What are you talking about? Of course, you came out to see. Why did you, Juncea, come here? I said I'd give it to you?";
		next;
		cutin "ep19_juncea03.png",2;
		mes "[Juncea]";
		mes "...to bask in the sun.";
		next;
		cutin "ep19_leizi02.png",0;
		mes "[Lazy]";
		mes "Oh, yes. Juncea, humans need some sunlight. How long have you been in that burrow?";
		npctalk "Who can give him some sunlight?", "ep19_icecastle_25_126", bc_self;
		next;
		cutin "ep19_iwin06.png",1;
		mes "[Horr]";
		mes "But why is everyone here? Are you all here to help monitor?";
		next;
		cutin "ep19_leizi01.png",0;
		mes "[Lazy]";
		mes "Ah, yes. Here, this Juncea human has made something useful to help with surveillance. To convey that. Now, from here on, let the experts explain.";
		next;
		mes "[Lazy]";
		mes "All those people over there are ignorant of science, so please explain so that even a newborn born today can understand.";
		npctalk "Actually, I was just born. Ae-", "ep19_icecastle_25_126", bc_self;
		npctalk "...I really hate it", "ep19_icecastle_29_125", bc_self;
		next;
		cutin "ep19_juncea01.png",2;
		mes "[Juncea]";
		mes "Remember that I said that there was not much magic left in the den of rgans? It's a device that uses it the other way around.";
		next;
		mes "[Juncea]";
		mes "It only detects the wavelength of magic that is unique to the Rgan, bury it nearby, wait, and when the Rgan appears near this device, it catches it and sends a signal to it.";
		next;
		mes "[Juncea]";
		mes "You can know the coordinates of the buried place, so the people here who are waiting nearby will be able to respond quickly.";
		next;
		cutin "ep19_iwin06.png",1;
		mes "[Horr]";
		mes "If you bury this in a place where a ^0000cdRgan would appear, where would it be^000000?";
		next;
		cutin "ep19_juncea01.png",2;
		mes "[Juncea]";
		mes "Yes. But there is a downside. It's very minor? The battery life is about a day.";
		npctalk "It's a great skill to be able to withstand that much in this cold. Juncea, humans did it.", "ep19_icecastle_25_126", bc_self;
		npctalk "......", "ep19_icecastle_29_125", bc_self;
		next;
		select( "I need to replace it with a new one every day." );
		cutin "ep19_iwin06.png",1;
		sleep2 500;
		npctalk "Yes", "ep19_icecastle_29_125", bc_self;
		mes "[Horr]";
		mes "It's easy. It's better than standing around and monitoring 24/7. Thank you. Thanks to you, we can move our guards elsewhere.";
		next;
		select( "It looks like a clam." );
		cutin "ep19_juncea01.png",2;
		mes "[Juncea]";
		mes "So the creatures around it wouldn't be interested? By the way, I didn't name it.";
		next;
		cutin "ep19_leizi01.png",0;
		mes "[Lazy]";
		mes "I came up with the name! ^0000cd" + getitemname(1000842) + "^000000! Isn't it really intuitive? I thought I'd made it so anyone would know right away.";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Lazy shouldn't set up a naming place later.", bc_self;
		npctalk "I agree.", "ep19_icecastle_29_125", bc_self;
		npctalk "Heh! Juncea or human would have built something like HSF-001!!", "ep19_icecastle_25_126", bc_self;
		next;
		cutin "ep19_iwin06.png",1;
		mes "[Horr]";
		mes "Thank you very much for your help. The crew can share and bury them quickly. I'll ask for 10 ^0000cdfrom adventurers^000000.";
		next;
		cutin "",255;
		select("Okay." );
		cutin "ep19_iwin06.png",1;
		mes "[Horr]";
		mes "Then, bury this in the places marked on ^0000cdFrozen Scale Plains and Glacier^000000. Both are places where the ragans often appear.";
		next;
		cutin "ep19_leizi01.png",0;
		mes "[Lazy]";
		mes "Goodbye!!";
		completequest 17650;
		setquest 17651;
		setquest 17652;
		setquest 17653;
		setquest 17654;
		setquest 17655;
		setquest 17656;
		setquest 17657;
		setquest 17658;
		setquest 17659;
		setquest 17660;
		getitem 1000842,10;	// Ep19_HS_FEELER
		add_reputation_points( 3,5 );
		close3;
	}
	if (queststatus_between(17651,17660) != 0) {
		if (countitem(1000842) < 1) {	// note: one by one only
			cutin "ep19_iwin06.png",2;
			mes "[Horr]";
			mes "It seems that you haven't been able to bury all of your " + getitemname(1000842) + " in ^0000cdFrozen Scale Plains^000000 yet.";
			next;
			mes "[Horr]";
			mes "Are you here because you need more " + getitemname(1000842) + "?";
			next;
			if (select( "No, that's fine.", "Give me one more." ) == 1) {
				mes "[Horr]";
				mes "Okay. Please take care.";
				close3;
			}
			mes "[Horr]";
			mes "Okay. I just got enough. Be careful not to lose it this time.";
			getitem 1000842,1;	// Ep19_HS_FEELER
			close3;
		}
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "It seems that you haven't been able to bury all of your " + getitemname(1000842) + " in ^0000cdFrozen Scale Plains^000000 yet.";
		mes "Please do your best.";
		close3;
	}
	if (isbegin_quest(17661) == 1) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Adventurer, I hope you are here. Did the work go smoothly? You've worked hard. Please take a break for today and try again tomorrow.";
		erasequest 17661;
		setquest 17662;
		add_reputation_points( 3,5 );
		getitem 1000608,2;	// Ep19_Snow_Flower
		if (get_reputation_points(3) >= 3000)
			getitem 1000608,1;	// Ep19_Snow_Flower
		getexp2 52243795,0;
		getexp 0,3000000;
		close3;
	}
	// (shouldn't happen)
	end;

S_Check:
	if (ep20_main == 0 && BaseLevel >= 215) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Welcome, adventurer.";
		next;
		mes "[Horr]";
		mes "We searched for the entrance to the snake's lair.";
		next;
		select( "Yes, I came to get antennae today." );
		mes "[Horr]";
		mes "Unfortunately, I haven't been able to find the entrance. There's definitely a place they go in and out.";
		next;
		mes "[Horr]";
		mes "They're plotting something, but I've decided to expand the scope of the search because I don't think I'll waste my time just looking at the existing search without any results.";
		next;
		mes "[Horr]";
		mes "I was waiting for an adventurer to tell me about him.";
		next;
		mes "[Horr]";
		mes "We need to organize a new search team, so let's go inside the castle.";
		next;
		select( "Where is the new search destination?" );
		mes "[Horr]";
		mes "I'll tell you more about the added search locations in detail, so you better go. Everyone is waiting for you.";
		ep20_main = 1;
		erasequest 17662;	// note: daily quest not available anymore, I guess?
		setquest 17690;
		close3;
	}
	return;

OnInit:
	// (main quest ep20)
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "ep20_main == 0 && BaseLevel >= 215 && isbegin_quest(17662) > 0" );

	// (main quest ep19)
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(5984) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16661) == 1" );

	// (daily quest)
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17650) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17661) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17650) == 2 && queststatus_between(17651,17661) == 0 && checkquest(17662,PLAYTIME) == -1 && ep20_main == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(17662,PLAYTIME) == 2" );
	end;
}


// Main quest - Step 2, 6
icas_in,258,196,0	script	#ep20_re01	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 1 || ep20_main == 5) {
		cloakoffnpcself( "ep20_icas_in_262_202" );
		cloakoffnpcself( "ep20_icas_in_260_202" );
		cloakoffnpcself( "ep20_icas_in_263_200" );
		cloakoffnpcself( "ep20_icas_in_259_200" );
		cloakoffnpcself( "ep20_icas_in_262_198" );
		cloakoffnpcself( "ep20_icas_in_259_197" );
		end;
	}
	if (ep20_main == 8) {
		cloakoffnpcself( "ep20_icas_in_262_202" );
		cloakoffnpcself( "ep20_icas_in_260_202" );
		cloakoffnpcself( "ep20_icas_in_263_200" );
		cloakoffnpcself( "ep20_icas_in_259_200" );
		cloakoffnpcself( "ep20_icas_in_262_198" );
		cloakoffnpcself( "ep20_icas_in_259_197" );
		cloakoffnpcself( "ep20_icas_in_260_205" );
		end;
	}
	if (ep20_main == 10) {
		cloakoffnpcself( "ep20_icas_in_259_200" );
		end;
	}
	if (ep20_main == 11) {
		cloakoffnpcself( "ep20_icas_in_259_200" );
		cloakoffnpcself( "ep20_icas_in_262_202" );
		cloakoffnpcself( "ep20_icas_in_260_202" );
		cloakoffnpcself( "ep20_icas_in_263_200" );
		cloakoffnpcself( "ep20_icas_in_262_198" );
		cloakoffnpcself( "ep20_icas_in_259_197" );
		end;
	}
	end;
}

icas_in,259,197,1	script(CLOAKED)	Horr#ep20_re01::ep20_icas_in_259_197	4_EP19_IWIN,{
	if (ep20_main == 1) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Hmm? If you're there...";
		mes "Okay. As I recall, there is still one left.";
		close3;
	}
	if (ep20_main == 2) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "I can understand some, if not all, the ancient Icewinds of Ancient Ice Gorge!";
		mes "It's really only to a certain extent.";
		close3;
	}
	if (ep20_main == 5) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Ugh, it was dangerous, but I'm glad it worked.";
		mes "Hurry up and tell those who have been waiting!";
		close3;
	}
	if (ep20_main == 8) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Thank you for researching with me. I'm still uneasy, but my doubts have subsided a little.";
		close3;
	}
	if (ep20_main == 9) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "This is something we have to be patient with. Hmmmm.";
		mes "But it must be done.";
		close3;
	}
	if (ep20_main == 11) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "I'm so glad you're all right! I was really worried!";
		close3;
	}
	if (ep20_main == 12) {
		cutin "ep19_iwin07.png",2;
		mes "[Horr]";
		mes "How dare they transform into Iwin!";
		mes "……Well, even though we transformed into Rgan.";
		close3;
	}
	end;
}

icas_in,259,200,7	script(CLOAKED)	Miriam#ep20_re01::ep20_icas_in_259_200	4_EP18_MIRIAM,{
	if (ep20_main == 1) {
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "I've looked around here, what should I do now?";
		mes "I'm a little worried about how long I'll have to repeat the same exploration.";
		close3;
	}
	if (ep20_main == 2) {
		cutin "ep18_miriam_02.png",0;
		mes "[Miriam]";
		mes "Ancient Ice Gorge....";
		mes "I hope it works.";
		close3;
	}
	if (ep20_main == 5) {
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Thanks to Lehar's discerning eyes, we were able to safely achieve results.";
		mes "I don't know exactly what this is yet.";
		close3;
	}
	if (ep20_main == 6) {
		cutin "ep18_miriam_02.png",0;
		mes "[Miriam]";
		mes "What would you like to do during your break?";
		mes "I'll have to think about it.";
		close3;
	}
	if (ep20_main == 8) {
		cutin "ep18_miriam_02.png",0;
		mes "[Miriam]";
		mes "Did you get enough rest?";
		mes "I looked around in the ice castle.";
		close3;
	}
	if (ep20_main == 9) {
		cutin "ep18_miriam_02.png",0;
		mes "[Miriam]";
		mes "There are probably a lot of places to monitor, so you'll have to move separately.";
		mes "I'll have to be more careful.";
		close3;
	}
	if (ep20_main == 10) {
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Ah, " + strcharinfo(0) + "! And Lehar!";
		mes "You don't know how long I searched you. I was really worried because you disappeared without leaving a trace.";
		next;
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "We're fine.";
		mes "I have more urgent matters to convey. Could you all summon them?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "That's right. This isn't the time.";
		mes "Hurry up and contact the others, I'll ask them to gather <NAVI>[Here]<INFO>icas_in,263,200,0,101,0</INFO></NAVI>.";
		ep20_main = 11;
		erasequest 16702;
		setquest 16703;
		close2;
		cutin "",255;
		warp "icas_in",261,200;	// note: official, probably to give the impression that time has passed?
		cloakoffnpcself( "ep20_icas_in_259_200" );
		cloakoffnpcself( "ep20_icas_in_262_202" );
		cloakoffnpcself( "ep20_icas_in_260_202" );
		cloakoffnpcself( "ep20_icas_in_263_200" );
		cloakoffnpcself( "ep20_icas_in_262_198" );
		cloakoffnpcself( "ep20_icas_in_259_197" );
		end;
	}
	if (ep20_main == 11) {
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Now that everyone is here, let's talk.";
		mes "I hope you get some rest first...";
		close3;
	}
	if (ep20_main == 12) {
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "It's creepy to think that the ice castle is also mixed with Rgans impersonating Iwin.";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16702) == 1" );
	end;
}

icas_in,260,202,5	script(CLOAKED)	Aurelie#ep20_re01::ep20_icas_in_260_202	4_EP19_AURELIE,{
	if (ep20_main == 1) {
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Ugh, I didn't think we'd have to go that far.";
		mes "But since we deleted all the options, that's all there is left.";
		close3;
	}
	if (ep20_main == 2) {
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "You must go to the ancient ice canyon.";
		mes "Be careful, the ancients are overly delicate.";
		close3;
	}
	if (ep20_main == 5) {
		cutin "ep19_aurelie02.png",0;
		mes "[Aurelie]";
		mes "I've been waiting. Were you expecting something?";
		mes "Looking at the expression, I think I can understand it.";
		close3;
	}
	if (ep20_main == 6) {
		cutin "ep19_aurelie04.png",0;
		mes "[Aurelie]";
		mes "Can you catch your breath for a bit?";
		mes "Let's take a break. It won't be long.";
		close3;
	}
	if (ep20_main == 8) {
		cutin "ep19_aurelie02.png",0;
		mes "[Aurelie]";
		mes "As expected, it wasn't a long break, was it?";
		mes "Have you had a good rest?";
		close3;
	}
	if (ep20_main == 9) {
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "It's going to be a long fight, so come back and have some hot tea.";
		close3;
	}
	if (ep20_main == 11) {
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Really, I thought it was a big deal and was worried.";
		mes "Are you hurt anywhere?";
		close3;
	}
	if (ep20_main == 12) {
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Performance is also performance, but taking care of yourself is the most important thing.";
		mes "Should you be careful?";
		close3;
	}
	end;
}

icas_in,262,198,3	script(CLOAKED)	Lehar#ep20_re01::ep20_icas_in_262_198	4_EP19_LEHAR,{
	if (ep20_main == 1) {
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "I thought I'd been to all the good places to go, um. Maybe that's good?";
		mes "Oh, come to think of it, haven't you been there...?";
		close3;
	}
	if (ep20_main == 2) {
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "I've been to ancient ice canyons as a kid.";
		mes "Of course, I didn't ask for permission, so it's best kept a secret from adults!";
		close3;
	}
	if (ep20_main == 5) {
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "Whoops, did I play well this time?";
		mes "Well, I was lucky too!";
		close3;
	}
	if (ep20_main == 6) {
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "I want to do more of my lack of practice!";
		mes "What are you going to do, adventurer?";
		close3;
	}
	if (ep20_main == 8) {
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Ah~ I had a pleasant sweat.";
		mes "I took a warm bath.";
		close3;
	}
	if (ep20_main == 9) {
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "If it's undercover, it's not like I haven't done it at all.";
		mes "I'll be making groups! See you in front of the castle!";
		close3;
	}
	if (ep20_main == 11) {
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "Come on. I'm in a hurry. We have so much to talk about!";
		close3;
	}
	if (ep20_main == 12) {
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "Ugh, I'll definitely get my revenge on those who imprisoned us.";
		close3;
	}
	end;
}

icas_in,263,200,3	script(CLOAKED)	Lazy#ep20_re01::ep20_icas_in_263_200	4_EP19_LAZY,{
	if (checkweight(1001217,20) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main == 1) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Looks like you've looked everywhere.";
		mes "Hmm, what should I do now? Finding a way out of a dead end is my skill.";
		close3;
	}
	if (ep20_main == 2) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "My nephew is strong.";
		mes "Then let's go to the ancient ice canyon area.";
		close3;
	}
	if (ep20_main == 5) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Come on, let's spread it out.";
		mes "It's not our dreams and hopes... it's what we went and found.";
		close3;
	}
	if (ep20_main == 6) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Now that I have some free time, I'm thinking of going ice fishing for a bit.";
		mes "I heard that Iwin introduces a great point.";
		close3;
	}
	if (ep20_main == 8) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Ice fishing? Oh, that was awesome. It was so much fun.";
		mes "I caught a lot, but I gave it all to the Iwin kids.";
		close3;
	}
	if (ep20_main == 9) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "It's boring to burrow alone.";
		mes "But don't worry. I'm a tight-lipped guy when I shouldn't be saying anything.";
		close3;
	}
	if (ep20_main == 11) {
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Wow! You're safe. I've been looking for you a lot!!";
		mes "We were all nervous that something might happen in this cold place.";
		next;
		cutin "",255;
		select( "We are fine. Rather..." );
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "……Is that true? Rgans have also found a way to transform into Iwin.";
		mes "Huh, I got hit. This is like getting stabbed in the back of the head in complete darkness.";
		emotion ET_SURPRISE;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I was really right, back head.", bc_self;
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "I can't believe it, all the suspicious points I've felt so far fit into this one.";
		mes "It's a big deal. How to find them...";
		next;
		cutin "ep19_lehar04.png",2;
		mes "[Lehar]";
		mes "It's not just that. Some of the Rgans seem to have found a way to see through our transformations as well.";
		mes "You may also be attacked while transforming into Rgan.";
		next;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Oh, this is more than a snowdrift, it's an icehill. You really have to be careful. Of course, You've been careful up until now, but you have to be more careful.";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Rather than that, I'm more concerned about the place called 'there'.";
		mes "A place that Lasgand and Bagot value so much... what the hell is it? I have no idea.";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "That's right. Alas! The White Cat that helped us seemed to care about that too.";
		mes "Come to think of it... what kind of spirit creature was that White Cat?";
		next;
		cutin "ep19_lehar07.png",2;
		mes "[Lehar]";
		mes "He took us here and then he disappeared.";
		mes "Like when it appeared in Bagot's lab, it disappeared in the blink of an eye and I couldn't catch it.";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Even if this is dangerous, you'll have to go through the door again.";
		mes "To find out more about 'there' and to get information on capturing the transformed Rgans.";
		next;
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "It would be right for me to take a little break after going through a lot, but I'm in a hurry.";
		mes "Everyone, may I ask you a favor?";
		next;
		cutin "",255;
		select( "Ask to leave" );
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "Of course! Don't worry, we're strong. Besides, who else will guide us there again.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "I will accompany you this time. We have a clear destination, so it will be safer to go together as a group.";
		next;
		mes "[Miriam]";
		mes "Come to think of it, even if there are Rgans who can see through transformation, not all Rgans can do it, right?";
		next;
		cutin "",255;
		mes "[" + strcharinfo(0) + "]";
		mes "It seemed like not all of them. Only Rgans with special abilities seemed to be able to recognize us.";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Then the Rgan transformation should still work.";
		mes "Didn't you say that there were no lower-middle-class Rgans inside where the two were taken? This time, everyone should have more magic stones and transform into higher-rank Rgans.";
		next;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "There are only a few individuals of higher grade or higher, so people who don't know them may be suspicious, but...";
		mes "Still, the method is to make it somehow. It looks like you can't enter it at all for a lower-middle-class Rgan.";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "That would be nice. Let's figure out a way to infiltrate by transforming into Greater Rgan.";
		mes "Come to think of it, we should also hunt down Rgans who have already infiltrated here.";
		next;
		mes "[Horr]";
		mes "There is an expert among our Iwins on that.";
		mes "Go find <NAVI>[Duck Ryo Mania]<INFO>icas_in,100,62,0,101,0</INFO></NAVI>, so he can help you.";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Then let's hunt down the spy with Duck Ryo Mania, and let's start the spy operation!";
		mes "Shall we go <NAVI>[In front of the door]<INFO>jor_nest,36,274,0,101,0</INFO></NAVI> of the Serpent's Nest where the two escaped? Whoa, the age of great intelligence has begun! ";
		emotion ET_DELIGHT;
		ep20_main = 12;
		erasequest 16703;
		setquest 16704;
		setquest 19158;	// note: unlocked daily quests A & B : 'Spy search' and 'Intelligence information collection'
		getitem 1001217,20;	// Ep20_Cat_Whiskers
		getexp2 273223919,0;
		getexp 0,44543344;
		add_reputation_points( REPU_EP20, 90 );
		close3;
	}
	if (ep20_main == 12) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "I'm retired, remember?";
		mes "It can't be, because I'm not retired! Ha ha ha!";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16703) == 1" );
	end;
}

icas_in,260,205,5	script(CLOAKED)	Vellgunde#ep20_re01::ep20_icas_in_260_205	4_EP19_VELLGUNDE,{
	if (checkweight(1001217,20) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main == 6) {
		cutin "ep19_vellgunde01.png",2;
		mes "[Vellgunde]";
		mes "I'll be looking into it. In the meantime, can you catch your breath for a bit?";
		mes "You've been running all along. Thinking you're taking a break.";
		close3;
	}
	if (ep20_main == 8) {
		cutin "ep19_vellgunde01.png",2;
		mes "[Vellgunde]";
		mes "Are you here, everyone?";
		mes "Wait a minute, but how did you come in after a good rest?";
		npctalk "Vellgunde: It's your ability to rest well at times like this, kid.", "ep20_icas_in_260_217", bc_self;
		next;
		cutin "ep19_vellgunde02.png",2;
		mes "[Vellgunde]";
		mes "Then let me tell you what I found out.";
		mes "This is a mana absorber. It absorbs and stores surrounding mana.";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Absorbs and stores surrounding mana?";
		next;
		cutin "ep19_vellgunde02.png",2;
		mes "[Vellgunde]";
		mes "Yes. It's so clean that it's difficult to completely regenerate it.";
		next;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Such a vicious device. I feel like I can guess who made it.";
		next;
		cutin "ep19_vellgunde02.png",2;
		mes "[Vellgunde]";
		mes "Yes. Besides, judging from the design, it seems to have some distinctive tastes.";
		next;
		emotion ET_THINK, getnpcid(0,"ep20_icas_in_260_217");
		cutin "ep19_vellgunde03.png",2;
		mes "[Vellgunde]";
		mes "I'm assuming it's by Bagot.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "My God...!";
		mes "So we got it right.";
		next;
		cutin "ep19_vellgunde01.png",2;
		mes "[Vellgunde]";
		mes "Yes.";
		mes "When the device is full of magic, I'll retrieve it and take it back to the base, so if you step on it, you'll be able to find out the base as well.";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Then we'll keep an eye on where the device is installed, and if someone comes to retrieve it, we'll sneak along.";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Patience will be a battle...";
		next;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Still, it will be an important battleground.";
		mes "Let's take a closer look at the number of people and areas.";
		next;
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "Okay! Let's get started! We'll have to get people organized first!";
		mes "When you're ready, come out <NAVI>[in front of the castle]<INFO>icecastle,201,171,0,101,0</INFO></NAVI>!";
		ep20_main = 9;
		erasequest 16700;
		setquest 16701;
		getitem 1001217,20;	// Ep20_Cat_Whiskers
		getexp2 204917939,0;
		getexp 0,33407506;
		add_reputation_points( REPU_EP20, 90 );
		close3;
	}
	if (ep20_main == 9) {
		cutin "ep19_vellgunde01.png",2;
		mes "[Vellgunde]";
		mes "I'm going to be busy again. I have to do my best!";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16700) == 1" );
	end;
}

icas_in,262,202,5	script(CLOAKED)	Leon#ep20_re01::ep20_icas_in_262_202	4_EP19_LEON,{
	if (checkweight(1001217,20) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main == 1) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Are you all gathered? I have something to tell you. I think we should expand the scope of our exploration.";
		next;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Hey, are there places you haven't been to yet?";
		mes "I thought we explored the whole area.";
		npctalk "Lazy: I've searched all over the place to hide a single strand of seaweed.", "ep20_icas_in_263_200", bc_self;
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "That's true, but there's only one place I haven't been to.";
		mes "Um..., I thought I wouldn't need to go.";
		next;
		cutin "ep19_aurelie03.png",0;
		mes "[Aurelie]";
		mes "As expected, I can't leave out that place. It's a place called Ancient Ice Gorge.";
		mes "There's a race that already lives there. It's called the Ancient Ice Wind.";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Ancient Ice Wind? The name..., is it related to the Iwins here?";
		emotion ET_QUESTION, getnpcid(0,"ep20_icas_in_259_200");
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Yes, a wild species of Iwin. It evolved in a different direction from Iwin.";
		mes "Evolved while remaining feral, they value their territories";
		next;
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "As much as the territory is important, Lasgand and his crew thought that if it was their territory, they would not recklessly invade it, so we did not explore it either.";
		next;
		cutin "ep19_aurelie03.png",0;
		mes "[Aurelie]";
		mes "You'd better revise that idea. I guess it didn't work out anywhere. I feel the need to go there too.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Can I go on the expedition with you?";
		mes "Or should I be on the side guarding the ice castle?";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "For now, existing personnel are enough to defend the ice castle.";
		mes "You are free to do what you want.";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Then I'll join the expedition too.";
		mes "In order to keep them from getting caught and running away, it would be more effective to quickly deploy a large number of people.";
		npctalk "Lazy: I'm used to making plans like this. Well, I'm an expert.", "ep20_icas_in_263_200", bc_self;
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "I'm coming too! That might help.";
		mes "Some of the Iwins are capable of simple communication with some of the ancient species.";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Oh, are you saying you can talk? Are you also of the same Iwin blood? That would be quite helpful.";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "It's not accurate enough to say that it makes sense..., but I understand when the author is hungry, angry...?";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Well, that's quite a bit... I'm sure it'll help.";
		mes "We can recognize that. It's so vague...?";
		emotion ET_SWEAT, getnpcid(0,"ep20_icas_in_263_200");
		next;
		cutin "ep19_iwin07.png",2;
		mes "[Horr]";
		mes "Yeah, but that's less helpful than utter nonsense!";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Then I'll go too! Leave it to me for directions!";
		mes "I'll take you on a relatively safe route to the canyon entrance.";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Hmm, here's a little bit of a bit of a bit of a bit of a bit of a bit of a bit of a bit of a bit of a bit of.";
		mes "Then let's go to the <NAVI>[Ancient Ice Gorge]<INFO>jor_back5,350,75,0,101,0</INFO></NAVI> area.";
		npctalk "Horr: Why me!!", "ep20_icas_in_259_197", bc_self;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"ep20_icas_in_259_197");
		ep20_main = 2;
		erasequest 17690;
		setquest 16691;
		close3;
	}
	if (ep20_main == 2) {
		cutin "ep19_leon03.png",2;
		mes "[Leon]";
		mes "You must visit the ancient ice canyon area";
		mes "Please be careful.";
		close3;
	}
	if (ep20_main == 5) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "You're here? I saw you on the inside and immediately set up a table.";
		mes "Did something work?";
		next;
		cutin "",255;
		select( "Say that there was a result." );
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "That's good news. I'm saying it's working, but we've been quite impatient too. That's all that's left.";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "I found what looked like a trace of Rgan. I also took care of the suspicious evidence. Here!";
		next;
		cutin "ep19_leon03.png",2;
		mes "[Leon]";
		mes "It's suspicious evidence. You don't know the exact purpose yet?";
		mes "Then there must be someone who will take a better look at this than us. Let's take it right away.";
		next;
		cutin "ep19_vellgunde01.png",2;
		cloakoffnpcself( "ep20_icas_in_260_205" );
		mes "[Vellgunde]";
		mes "Oh, did you call me?";
		mes "Oh my God, what is this? It's the first time I've seen it? It looks interesting.";
		next;
		cutin "ep19_vellgunde02.png",2;
		mes "[Vellgunde]";
		mes "Hmm, I can feel the magic. This is what you called me to investigate? Let's see...";
		emotion ET_DELIGHT, getnpcid(0,"ep20_icas_in_260_205");
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "As expected, Vellgunde. If you pretend, you pretend. I totally trust you. Please take good care of me.";
		next;
		cutin "ep19_vellgunde01.png",2;
		mes "[Vellgunde]";
		mes "But I guess it will take some time to investigate thoroughly. So why don't you take a break in the meantime?";
		mes "I'll call you back when the investigation is over, so everyone is taking a breather.";
		next;
		cutin "ep19_iwin06.png",2;
		sleep2 349;
		npctalk "Lehar: Ah, then I'll train for a while.", "ep20_icas_in_262_198", bc_self;
		npctalk "Miriam: I can rest for a while.", "ep20_icas_in_259_200", bc_self;
		npctalk "Lazy: I heard there's an awesome ice fishing spot!", "ep20_icas_in_263_200", bc_self;
		mes "[Horr]";
		mes "Ah, " + strcharinfo(0) + ", are you free?";
		mes "Then I have a long request... if you're not busy, could you please?";
		next;
		cutin "",255;
		select( "Why are you talking so softly?" );
		cutin "ep19_iwin07.png",2;
		mes "[Horr]";
		mes "Shh! Please answer quietly. There is a reason for all.";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "I'll be at this inn <NAVI>[upper corner]<INFO>icas_in,259,219,0,101,0</INFO></NAVI>, so talk to Vellgunde while he investigates. Okay!" ;
		ep20_main = 6;
		erasequest 16694;
		setquest 16695;
		getitem 1001217,20;	// Ep20_Cat_Whiskers
		getexp2 204917939,0;
		getexp 0,33407506;
		add_reputation_points( REPU_EP20, 90 );
		close2;
		cutin "",255;
		cloakonnpcself( "ep20_icas_in_259_197" );
		cloakoffnpcself( "ep20_icas_in_259_219" );
		end;
	}
	if (ep20_main == 6) {
		cutin "ep19_leon03.png",2;
		mes "[Leon]";
		mes "You've been busy working all this time, so why not take a break?";
		mes "Until the investigation is over, but only.";
		close3;
	}
	if (ep20_main == 8) {
		cutin "ep19_leon03.png",2;
		mes "[Leon]";
		mes "Looks like your investigation is finally over.";
		mes "Haha, did you get a good rest?";
		close3;
	}
	if (ep20_main == 9) {
		cutin "ep19_leon04.png",2;
		mes "[Leon]";
		mes "If you go outside for a long time, your body temperature tends to drop, so dress warmly.";
		close3;
	}
	if (ep20_main == 11) {
		cutin "ep19_leon04.png",2;
		mes "[Leon]";
		mes "I was worried";
		mes "I'm so glad you came back safely.";
		close3;
	}
	if (ep20_main == 12) {
		cutin "ep19_leon04.png",2;
		mes "[Leon]";
		mes "Haha, you're going to spy in a cold country.";
		mes "Please take care of yourself.";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(17690) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16694) == 1" );
	end;
}


// Main quest - Step 3
jor_back5,353,73,0	script	#ep20_re02	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 2 || ep20_main == 3) {
		cloakoffnpcself( "ep20_jor_back5_350_72" );
		cloakoffnpcself( "ep20_jor_back5_348_78" );
		cloakoffnpcself( "ep20_jor_back5_350_75" );
		cloakoffnpcself( "ep20_jor_back5_353_77" );
		end;
	}
	end;
}

jor_back5,350,72,5	script(CLOAKED)	Lazy#ep20_re02::ep20_jor_back5_350_72	4_EP19_LAZY,{
	cutin "ep19_leizi01.png",2;
	mes "[Lazy]";
	mes "Whoa, this is an ancient ice canyon area.";
	close3;
}

jor_back5,348,78,3	script(CLOAKED)	Miriam#ep20_re02::ep20_jor_back5_348_78	4_EP18_MIRIAM,{
	cutin "ep18_miriam_01.png",0;
	mes "[Miriam]";
	mes "Ancient Icewind..., it's quite different from the people of Iwin. It might be obvious.";
	close3;
}

jor_back5,353,77,5	script(CLOAKED)	Horr#ep20_re02::ep20_jor_back5_353_77	4_EP19_IWIN,{
	cutin "ep19_iwin06.png",2;
	mes "[Horr]";
	mes "Take care not to slip your feet on the ice. If you fall, you will be in trouble.";
	close3;
}

jor_back5,350,75,3	script(CLOAKED)	Lehar#ep20_re02::ep20_jor_back5_350_75	4_EP19_LEHAR,{
	if (ep20_main == 2) {
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Welcome! This is not a good place to talk at length. Let's go over there and talk!";
		close2;
		warp "jor_safty1",67,331;
		end;
	}
	if (ep20_main == 3) {
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Oops! Dangerous! Get out of here!";
		close2;
		cutin "",255;
		warp "jor_safty1",198,328;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16691) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16692) == 1" );
	end;
}

jor_safty1,67,327,5	script	Lazy#ep20_re03	4_EP19_LAZY,{
	cutin "ep19_leizi02.png",2;
	mes "[Lazy]";
	mes "Whoops, there's an ancient Icewind!";
	close3;
}

jor_safty1,71,329,3	script	Miriam#ep20_re03	4_EP18_MIRIAM,{
	cutin "ep18_miriam_03.png",0;
	mes "[Miriam]";
	mes "Be careful, it's dangerous here, let's not relax.";
	close3;
}

jor_safty1,70,332,5	script	Horr#ep20_re03::ep20_jor_safty1_70_332	4_EP19_IWIN,{
	cutin "ep19_iwin06.png",2;
	mes "[Horr]";
	mes "I can understand some of the ancient Icewinds, maybe.";
	close3;
}

jor_safty1,72,333,3	duplicate(dummy_cloaked_npc)	Ancient Icewind#ep20_re::ep20_jor_safty1_72_333	EP20_ICEWIND1

jor_safty1,64,328,5	script	Lehar#ep20_re03	4_EP19_LEHAR,{
	if (ep20_main == 2) {
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "This is an ancient ice canyon area.";
		mes "If you run into the ancient Icewinds, you may be attacked right away, so everyone be careful.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "The terrain is very rough here.";
		mes "I'll have to watch my feet. Let's move carefully.";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Oops, look over there! No, don't look, get low and hide! An ancient Icewind has appeared!";
		next;
		cutin "",255;
		cloakoffnpcself( "ep20_jor_safty1_72_333" );
		mes "[Ancient Icewind]";
		mes "――――――!!!!!";
		next;
		specialeffect EF_MAGMA_FLOW, AREA, "ep20_jor_safty1_70_332";
		cutin "ep19_iwin07.png",2;
		mes "[Horr]";
		mes "Aagh!";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "No, isn't that ancient Icewind Horr the only one who's attacking too much?";
		mes "Horr, you said you could talk, so what happened?";
		next;
		specialeffect EF_MAGMA_FLOW, AREA, "ep20_jor_safty1_70_332";
		cutin "ep19_iwin07.png",2;
		mes "[Horr]";
		mes "That person, ugh, so I don't know why, but he's very, evil, angry, ugh, it's like!!!!";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Because even those of us who don't understand that can understand it at a glance!";
		mes "Looking at Yuno's traditional dance from 500 steps away, I don't know why, but I think I'm really angry with Horr!";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "This isn't the time to joke, uhhh, we'd better get out of here for now!";
		mes "Everyone be careful and follow me!";
		ep20_main = 3;
		erasequest 16691;
		setquest 16692;
		close2;
		cutin "",255;
		warp "jor_safty1",198,328;
		end;
	}
	// debug
	warp "jor_safty1",198,328;
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16691) == 1" );
	end;
}


// Main quest - Step 4
jor_safty1,201,327,3	script	Horr#ep20_re04::ep20_jor_safty1_201_327	4_EP19_IWIN,{
	cutin "ep19_iwin09.png",2;
	mes "[Horr]";
	mes "I didn't say anything in particular! Anyway, here's something";
	close3;
}

jor_safty1,198,324,1	script	Miriam#ep20_re04::ep20_jor_safty1_198_324	4_EP18_MIRIAM,{
	cutin "ep18_miriam_01.png",0;
	mes "[Miriam]";
	mes "There must have been a reason? Why was it so aggressive?";
	close3;
}

jor_safty1,194,325,5	script	Lazy#ep20_re04::ep20_jor_safty1_194_325	4_EP19_LAZY,{
	cutin "ep19_leizi02.png",2;
	mes "[Lazy]";
	mes "Horr, what happened? Did you swear with ancient Icewind words?";
	close3;
}

jor_safty1,209,324,3	script	Enchanted installation#Q1::ep20_jor_safty1_209_324	4_EP20_DEVICE_BLUE,{
	mes "[Enchanted installation]";
	mes "A strange object with magical powers is installed.";
	close;
}
jor_safty1,205,320,3	duplicate(ep20_jor_safty1_209_324)	Enchanted installations#Q2	4_EP20_DEVICE_RED
jor_safty1,201,323,3	duplicate(ep20_jor_safty1_209_324)	Enchanted installations#Q3	4_EP20_DEVICE_BLUE
jor_safty1,197,320,3	duplicate(ep20_jor_safty1_209_324)	Enchanted installation#Q4	4_EP20_DEVICE_RED
jor_safty1,189,325,3	duplicate(ep20_jor_safty1_209_324)	Enchanted installations#Q5	4_EP20_DEVICE_BLACK

jor_safty1,195,327,5	script	Lehar#ep20_re04	4_EP19_LEHAR,{
	if (ep20_main == 3) {
		cutin "ep19_lehar04.png",2;
		mes "[Lehar]";
		mes "Huh, uh, uh, uh, it should be a little safer here... Let's take a break, us.";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "I was surprised. But it's fortunate that my nephew knows a little bit about the geography here. Otherwise, I would have been in big trouble.";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Before, it was an adventure and I came all the way here and was chased by the ancient Icewinds, hehe.";
		mes "It's just a memory now, but what happened back then is somehow helpful.";
		next;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Compared to him, Horr who said he could communicate...";
		mes "What's happened? Even if you can talk, you don't seem to have any intention of telling the story.";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "That's..., I don't know. The last time I came, it wasn't as rough as this.";
		npctalk "Lazy: When was the last time?", "ep20_jor_safty1_194_325", bc_self;
		npctalk "Horr: It's been a while.", "ep20_jor_safty1_201_327", bc_self;
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Wait, everyone, look over there. There's a strange installation.";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Not one or two. What the hell are they all about?";
		mes "Huh? This..., can you feel the magic? Whoops! Uh, it doesn't move.";
		next;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Oops, I'd like to take it and investigate it.";
		mes "Is there any better way, " + strcharinfo(0) + "?";
		next;
		cutin "",255;
		select( "It doesn't look easy to dismantle." );
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Isn't it? Lehar said that too,It's just anchored to the floor like this.";
		mes "Hmm, how do I do that. Looks very suspicious. I wish I could have it with me.";
		next;
		cutin "ep19_iwin09.png",2;
		mes "[Horr]";
		mes "Oh no. What is this? Why is this here!";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Wow, be surprised. No, Horr. Why are you suddenly like that?";
		next;
		cutin "ep19_iwin09.png",2;
		mes "[Horr]";
		mes "Look at this, everyone. It's Iwin's feather.";
		mes "Besides, the snow froze and then thawed, so although the traces are somewhat faint... these are definitely Iwin's footprints.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "……I can't believe it. Aren't they traces of the ancient Icewind?";
		next;
		cutin "ep19_iwin07.png",2;
		mes "[Horr]";
		mes "Do you think I can't tell the difference between those guys and our Guardians?";
		mes "No matter how much I brush this fluffy fur, it is bound to be different from coarse feathers.";
		emotion ET_ANGER, getnpcid(0,"ep20_jor_safty1_201_327");
		next;
		select( "But why is there a sign of Iwin here?" );
		cutin "ep19_iwin09.png",2;
		mes "[Horr]";
		mes "That bothers me too";
		mes "Besides, it's not just Iwin's traces here... There are also traces I'm not sure about.";
		mes "The traces of this trail.";
		next;
		cutin "ep18_miriam_02.png",0;
		mes "[Miriam]";
		mes "……I think I saw it somewhere.";
		mes "It feels strangely familiar. This is..., um...";
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"ep20_jor_safty1_198_324");
		next;
		npctalk "Lazy: I just remembered! I'm great.", "ep20_jor_safty1_194_325", bc_self;
		sleep2 333;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "Rgan! It might be a trace of Rgan's migration to the tail. Look at this. It's a faint sweep of scales.";
		mes "Then we've found the right place.";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "......Then I'll have to be more careful and explore the surroundings. Let's explore a wider area around here.";
		next;
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "Okay. Let's look around some more... and if we find anything more, let's get together again. Everyone, don't forget to explore more carefully by yourself.";
		ep20_main = 4;
		erasequest 16692;
		setquest 16693;
		close2;
		cutin "",255;
		warp "jor_back5",333,224;
		end;
	}
	// debug
	warp "jor_back5",333,224;
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16692) == 1" );
	end;
}


// Main quest - Step 5
jor_back5,353,352,0	script	#ep20_re03	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 4) {
		cloakoffnpcself( "ep20_jor_back5_353_357" );
		cloakoffnpcself( "ep20_jor_back5_352_355" );
		cloakoffnpcself( "ep20_jor_back5_355_354" );
		cloakoffnpcself( "ep20_jor_back5_353_353" );
		cloakoffnpcself( "ep20_jor_back5_356_355" );
		end;
	}
	end;
}

jor_back5,356,355,3	script(CLOAKED)	Enchanted installation#Q6::ep20_jor_back5_356_355	4_EP20_DEVICE_BLACK,{
	mes "[Enchanted installation]";
	mes "A strange object with magical powers is installed.";
	close;
}

jor_back5,355,354,7	script(CLOAKED)	Lehar#ep20_re05::ep20_jor_back5_355_354	4_EP19_LEHAR,{
	cutin "ep19_lehar05.png",2;
	mes "[Lehar]";
	mes "Huh? This.... if I do it this way? What? It's done?!";
	close3;
}

jor_back5,353,353,7	script(CLOAKED)	Horr#ep20_re05::ep20_jor_back5_353_353	4_EP19_IWIN,{
	cutin "ep19_iwin08.png",2;
	mes "[Horr]";
	mes "Oops! What is this!?";
	close3;
}

jor_back5,352,355,7	script(CLOAKED)	Lazy#ep20_re05::ep20_jor_back5_352_355	4_EP19_LAZY,{
	cutin "ep19_leizi03.png",2;
	mes "[Lazy]";
	mes "Ugh, what is that. It doesn't seem to be that long, but it's frozen solid.";
	close3;
}

jor_back5,353,357,7	script(CLOAKED)	Miriam#ep20_re05::ep20_jor_back5_353_357	4_EP18_MIRIAM,{
	if (ep20_main == 4) {
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Everyone, look into the ice.";
		mes "It looks dangerous, so let's move to a safer place than here and talk.";
		close2;
		cutin "",255;
		warp "jor_safty1",333,329;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16693) == 1" );
	end;
}

jor_safty1,336,327,3	script	Lazy#ep20_re06::ep20_jor_safty1_336_327	4_EP19_LAZY,{
	cutin "ep19_leizi03.png",2;
	mes "[Lazy]";
	mes "Ugh, it was frozen solid. Horrible.";
	close3;
}

jor_safty1,334,325,1	script	Lehar#ep20_re06	4_EP19_LEHAR,{
	cutin "ep19_lehar02.png",2;
	mes "[Lehar]";
	mes "This one? It fell on the hard-to-see floor, so I quickly picked it up.";
	close3;
}

jor_safty1,331,325,7	script	Horr#ep20_re06	4_EP19_IWIN,{
	cutin "ep19_iwin06.png",2;
	mes "[Horr]";
	mes "No matter how Rgan is called, it's a pity to see him frozen like that.";
	close3;
}

jor_safty1,330,327,5	script	Miriam#ep20_re06	4_EP18_MIRIAM,{
	if (ep20_main == 4) {
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "I saw everyone in front of that dead-end nest...";
		mes "It was frozen, but it was the body of Rgan.";
		next;
		cutin "ep19_leizi03.png",2;
		mes "[Lazy]";
		mes "It looks like it was attacked by the ancient Icewinds.";
		mes "It was close to the nest, so did you try to steal the egg? It looks like you were suddenly attacked.";
		next;
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "Whoop, whoop.";
		mes "Guys, do you want to see what I've been smart enough to pack?";
		unittalk getcharid(3), "" + strcharinfo(0) + " : You're talking a bit like Lazy right now.", bc_self;
		npctalk "Lazy: Do you remember my way of speaking? Are you interested in me?", "ep20_jor_safty1_336_327", bc_self;
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Um, what did you bring? Can you show it to everyone here?";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "There was one intact thing on the floor around that frozen Rgan.";
		mes "Suspicious device not yet firmly secured!";
		mes "You must have been attacked while trying to install this.";
		next;
		cutin "ep19_leizi01.png",2;
		sleep2 350;
		emotion ET_DELIGHT, getnpcid(0,"ep20_jor_safty1_336_327");
		mes "[Lazy]";
		mes "Whoa! Nice work, nephew. You have a good eye?";
		mes "This is enough achievement. Observed information and evidence.";
		next;
		mes "[Lazy]";
		mes "Okay. Well, let's go back first. I think we should look into the evidence Lehar obtained in detail.";
		mes "For investigations beyond this, you'd better come back with a little more planning.";
		next;
		cutin "",255;
		select( "I agree with that idea" );
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Okay. Do you all agree? Then, be careful not to get caught again and return to <NAVI>[Ice Castle]<INFO>icas_in,262,202,0,101,0</INFO></NAVI>.";
		ep20_main = 5;
		erasequest 16693;
		setquest 16694;
		close2;
		cutin "",255;
		warp "icecastle",22,123;
		end;
	}
	// debug
	warp "icecastle",22,123;
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16693) == 1" );
	end;
}


// Main quest - Step 6
// icas_in,262,202,5	script	Leon#ep20_re01::ep20_icas_in_262_202	4_EP19_LEON,{


// Main quest - Step 7
icas_in,259,216,0	script	#ep20_re04	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 6) {
		cloakoffnpcself( "ep20_icas_in_259_219" );
		end;
	}
	if (ep20_main == 7 && isbegin_quest(16696) == 0 && isbegin_quest(16697) == 0 && isbegin_quest(16698) == 0) {
		cloakoffnpcself( "ep20_icas_in_259_219" );
		end;
	}
	end;
}

icas_in,260,217,5	duplicate(dummy_cloaked_npc)	Vellgunde#ep20_re02::ep20_icas_in_260_217	4_EP19_VELLGUNDE

icas_in,259,219,5	script(CLOAKED)	Horr#ep20_re07::ep20_icas_in_259_219	4_EP19_IWIN,{
	if (ep20_main == 6) {
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Hmm, hmm. " + strcharinfo(0) + ", no one around listening?";
		next;
		mes "[Horr]";
		mes "It's no different... Actually, I was able to get over it because I found the corpse of Rgan.";
		next;
		mes "[Horr]";
		mes "There were definitely... footprints and traces of feathers that belonged to Iwin.";
		mes "I love it so much";
		next;
		cutin "ep19_iwin09.png",2;
		mes "[Horr]";
		mes "I keep feeling anxious.";
		mes "Is there a missing Iwin, or has someone been captured...";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "If you don't mind, why don't you go around the ice castle with me and secretly investigate if there are any missing people?";
		next;
		cutin "",255;
		select( "Why so secretly...?" );
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "That's because we might have to assume the worst.";
		mes "I hate to think so";
		next;
		cutin "",255;
		select( "Worst case?" );
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Well, nothing. We'd better talk about that when the situation arises";
		mes "Then, let's investigate together, privately...";
		npctalk "Horr: That's not even a good thing.", "ep20_icas_in_259_219", bc_self;
		next;
		mes "[Horr]";
		mes "I'm going to ask the other residents of the ice castle to ask.";
		mes "We " + strcharinfo(0) + " could you check the barracks and inn...and the security in places?";
		ep20_main = 7;
		erasequest 16695;
		setquest 16696;
		setquest 16697;
		setquest 16698;
		close3;
	}
	if (ep20_main == 7) {
		if (isbegin_quest(16696) != 0 || isbegin_quest(16697) != 0 || isbegin_quest(16698) != 0) {
			cutin "ep19_iwin09.png",2;
			mes "[Horr]";
			mes "I have a bad feeling about something.";
			close3;
		}
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Ah, " + strcharinfo(0) + ", you're home!";
		mes "Where, how was the result of your inquiry? Is there anything you can tell me?";
		next;
		cutin "",255;
		if (select( "It wasn't much, but...", "It bothers me a little..." ) == 1) {
			cutin "ep19_iwin06.png",2;
			mes "[Horr]";
			mes "It would be fortunate if nothing special happened...";
			next;
			cutin "",255;
			select( "The only thing that bothers me is..." );
		}
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "It bothers you? Was there such a thing? That's a big deal.";
		next;
		cutin "",255;
		mes "[" + strcharinfo(0) + "]";
		mes "There is no such thing as missing or disappearing. Rather, they say that everyone is active.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "On the contrary, I was treated strangely by asking questions like that.";
		next;
		cutin "ep19_iwin09.png",2;
		mes "[Horr]";
		mes "Yeah... Didn't I tell you to ask around privately?";
		next;
		cutin "",255;
		mes "[" + strcharinfo(0) + "]";
		mes "Anyway, the important thing is that I saw clearly suspicious signs in the alleys behind the barracks.";
		mes "It was a sign that someone came in and out.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "But there were only signs of entry and no signs of exit. I think I need to be more careful.";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "……………….";
		mes "Okay. It's a bit different from the worst I expected, but I definitely need to be more vigilant.";
		next;
		cutin "ep19_iwin09.png",2;
		mes "[Horr]";
		mes "I have a bad feeling";
		npctalk "Horr: Now come and confessHowever, the situation I suspected was... … .", "ep20_icas_in_259_219", bc_self;
		next;
		cutin "ep19_vellgunde01.png",2;
		cloakoffnpcself( "ep20_icas_in_260_217" );
		npctalk "Horre: sum.", "ep20_icas_in_259_219", bc_self;
		mes "[Vellgunde]";
		mes "What are you two talking about so hard?";
		next;
		mes "[Vellgunde]";
		mes "I've finished researching the device you brought me, so<NAVI>[tell me]<INFO>icas_in,260,205,0,101,0</INFO></NAVI> if you're interested.";
		mes "It's better if everyone else is called as well.";
		ep20_main = 8;
		if (isbegin_quest(16699) > 0)
			erasequest 16699;
		setquest 16700;
		close2;
		cutin "",255;
		cloakonnpcself( "ep20_icas_in_259_219" );
		cloakonnpcself( "ep20_icas_in_260_217" );
		cloakoffnpcself( "ep20_icas_in_262_202" );
		cloakoffnpcself( "ep20_icas_in_260_202" );
		cloakoffnpcself( "ep20_icas_in_263_200" );
		cloakoffnpcself( "ep20_icas_in_259_200" );
		cloakoffnpcself( "ep20_icas_in_262_198" );
		cloakoffnpcself( "ep20_icas_in_259_197" );
		cloakoffnpcself( "ep20_icas_in_260_205" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16695) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16699) == 1" );
	end;
}


// Main quest - Step 8
// icas_in,259,219,5	script	Horr#ep20_re07::ep20_icas_in_259_219	4_EP19_IWIN,{

icas_in,108,34,0	script	#ep20_re05	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 7 && isbegin_quest(16696) > 0) {
		cloakoffnpcself( "ep20_icas_in_113_41" );
		end;
	}
	end;
}

icas_in,113,41,5	script(CLOAKED)	Horr#ep20_re01::ep20_icas_in_113_41	4_EP19_IWIN,{
	if (ep20_main == 7 && isbegin_quest(16696) > 0) {
		cutin "ep19_iwin02.png",2;
		mes "[Horr]";
		mes "What brought you to the barracks?";
		mes "You have something to ask? Chung! Sung! Feel free to ask.";
		next;
		cutin "",255;
		select( "Is there any Iwin that I haven't seen recently?" );
		cutin "ep19_iwin02.png",2;
		mes "[Horr]";
		mes "Invisible Iwin?";
		mes "What do you mean by that? I don't know what you mean. There's no way we who protect this place will leave the ice castle.";
		next;
		cutin "",255;
		select( "Wrap about nothing." );
		cutin "ep19_iwin02.png",2;
		mes "[Horr]";
		mes "He speaks soft words. We are here! We are always guarding the ice castle with a fresh mind.";
		next;
		mes "[Horr]";
		mes "Even the Iwins, who were hard to see, these days diligently come out and show their faces.";
		mes "Loyalty!";
		next;
		cutin "",255;
		mes "[" + strcharinfo(0) + "]";
		mes "Loyalty!";
		erasequest 16696;
		next;
		mes "[" + strcharinfo(0) + "]";
		if (isbegin_quest(16696) != 0 || isbegin_quest(16697) != 0 || isbegin_quest(16698) != 0)
			mes "(Let's investigate the other places as well)";
		else {
			mes "(Looks like I've checked all the places I've been assigned, so let's go back to <NAVI>[Horr]<INFO>icas_in,259,219,0,101,0</INFO></NAVI>)";
			setquest 16699;
		}
		close;
	}
	cutin "ep19_iwin02.png",2;
	mes "[Horr]";
	mes "Chung! Castle!";
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16696) == 1" );
	end;
}

icas_in,85,113,0	script	#ep20_re06	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 7 && isbegin_quest(16697) > 0) {
		cloakoffnpcself( "ep20_icas_in_92_113" );
		end;
	}
	end;
}

icas_in,92,113,5	script(CLOAKED)	Charr#ep20_re01::ep20_icas_in_92_113	4_EP19_IWIN,{
	if (ep20_main == 7 && isbegin_quest(16697) > 0) {
		cutin "ep19_iwin04.png",2;
		mes "[Charr]";
		mes "Hey, hey, what are you doing at the inn? Travelers stay at the tourist accommodation.";
		mes "It's a pity that I can't make money thanks to you. What's the matter?";
		next;
		mes "[Charr]";
		mes "Do you have a question? What? What? I like talking about money. I really like it.";
		next;
		cutin "",255;
		select( "Do you have any friends you haven't seen lately?" );
		cutin "ep19_iwin04.png",2;
		mes "[Charr]";
		mes "My invisible friends? Are you referring to my Iwin friends? None. None at all.";
		mes "That's a very strange question.";
		next;
		mes "[Charr]";
		mes "We who live nearby are all there, aren't we? Uhuhuhu.";
		mes "Even though it's cold, they all go around diligently. Aren't Iwins all the same?";
		next;
		mes "[Charr]";
		mes "So, there's no such thing! That's right!";
		mes "Ah~ I just told you about this for free, and I shouldn't do that. I need to pay for the information.";
		next;
		cutin "",255;
		mes "[" + strcharinfo(0) + "]";
		mes "Thanks for letting me know.";
		erasequest 16697;
		next;
		mes "[" + strcharinfo(0) + "]";
		if (isbegin_quest(16696) != 0 || isbegin_quest(16697) != 0 || isbegin_quest(16698) != 0)
			mes "(Let's investigate the other places as well)";
		else {
			mes "(Looks like I've checked all the places I've been assigned, so let's go back to <NAVI>[Horr]<INFO>icas_in,259,219,0,101,0</INFO></NAVI>)";
			setquest 16699;
		}
		close;
	}
	cutin "ep19_iwin04.png",2;
	mes "[Charr]";
	mes "There's no softer bedding than the one at Feather Inn!";
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(16697) == 1" );
	end;
}

icecastle,208,236,0	script	#ep20_re07	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 7 && isbegin_quest(16698) > 0) {
		cloakoffnpcself( "ep20_icecastle_209_243" );
		end;
	}
	end;
}

icecastle,209,243,3	script(CLOAKED)	Back Alley#ep20_re01::ep20_icecastle_209_243	4_POINT_BLUE,{
	if (ep20_main == 7 && isbegin_quest(16698) > 0) {
		mes "[" + strcharinfo(0) + "]";
		mes "Let's look for suspicious signs in the back alleys.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Because Horr seems to be worried that someone has been kidnapped...";
		mes "Let's see if there are any traces of suspicious people coming in and out.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "How are you?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "This is...";
		mes "No, but it's strange.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Who... is there evidence of sneaking in...?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "But there is no sign of leaving.";
		mes "Something bothers me…. Are you still in here? Or did you go another route?";
		erasequest 16698;
		next;
		mes "[" + strcharinfo(0) + "]";
		if (isbegin_quest(16696) != 0 || isbegin_quest(16697) != 0 || isbegin_quest(16698) != 0)
			mes "(Let's investigate the other places as well)";
		else {
			mes "(Looks like I've checked all the places I've been assigned, so let's go back to <NAVI>[Horr]<INFO>icas_in,259,219,0,101,0</INFO></NAVI>)";
			setquest 16699;
		}
		close;
	}
	mes "[" + strcharinfo(0) + "]";
	mes "It's a dark alley. There's no sign of anything strange right now.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16698) == 1" );
	end;
}


// Main quest - Step 9
// icas_in,260,205,5	script	Vellgunde#ep20_re01::ep20_icas_in_260_205	4_EP19_VELLGUNDE,{

// Main quest - Step 10 (instance)
// icecastle,201,171,3	script	Lehar#ep20_re07::ep20_icecastle_201_171	4_EP19_LEHAR,{

// Main quest - Step 11
// icas_in,259,200,7	script	Miriam#ep20_re01::ep20_icas_in_259_200	4_EP18_MIRIAM,{

// Main quest - Step 12
// icas_in,263,200,3	script	Lazy#ep20_re01::ep20_icas_in_263_200	4_EP19_LAZY,{


// Main quest - Step 13, 14, 15
jor_nest,38,268,0	script	#20ms00	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main >= 12 && ep20_main <= 15) {
		cloakoffnpcself( "ep20_jor_nest_36_274" );
		cloakoffnpcself( "ep20_jor_nest_40_274" );
		cloakoffnpcself( "ep20_jor_nest_37_272" );
		cloakoffnpcself( "ep20_jor_nest_39_272" );
		end;
	}
	end;
}

jor_nest,37,272,7	duplicate(dummy_cloaked_npc)	Miriam#20ms00::ep20_jor_nest_37_272	4_EP19_RGAN_R2
jor_nest,39,272,1	duplicate(dummy_cloaked_npc)	Lehar#20ms00::ep20_jor_nest_39_272	4_EP19_RGAN_R3

jor_nest,36,274,5	script(CLOAKED)	Lazy#20ms00::ep20_jor_nest_36_274	4_EP19_RGAN_SR3,{
	if (ep20_main == 12) {
		// note: transform not required
		mes "[Lazy]";
		mes "Looks like everyone has arrived.";
		mes "Come to think of it... This composition, this combination. I'm not familiar with it.";
		next;
		mes "[Lazy]";
		mes "It's an organization that can scout, infiltrate, charge, contact, and follow-up, isn't it? So to speak, it's elite.";
		next;
		mes "[Lazy]";
		mes "This could throw a city into chaos.";
		mes "How about it? Would you like to go now?";
		emotion ET_HUK, getnpcid(0,"ep20_jor_nest_37_272");
		emotion ET_HUK, getnpcid(0,"ep20_jor_nest_39_272");
		emotion ET_HUK, getnpcid(0,"ep20_jor_nest_40_274");
		next;
		select( "Suddenly?" );
		npctalk "Where?", "ep20_jor_nest_37_272", bc_self;
		sleep2 500;
		npctalk "Are you going to destroy our city?", "ep20_jor_nest_39_272", bc_self;
		npctalk "What about the mission!!!", "ep20_jor_nest_40_274", bc_self;
		mes "[Lazy]";
		mes "That's what they say. It means to be proud.";
		mes "Always remember that we are scary people";
		next;
		mes "[Lazy]";
		mes "Know that we are good people just by not going astray with this power";
		mes "We did well last time, so let's do well again.";
		next;
		mes "[Horr]";
		mes "Even if you did a good job, you couldn't penetrate this place in the end.";
		npctalk "Right...", "ep20_jor_nest_39_272", bc_self;
		next;
		mes "[Horr]";
		mes "The search to find a hiding place nearby was also futile, and after expanding the scope of the search, the party was caught and returned.";
		next;
		mes "[Miriam]";
		mes "I don't think it's going to be viewed so negatively.";
		mes "Thanks to you, the road opened this way, right?";
		npctalk "That's it too!", "ep20_jor_nest_39_272", bc_self;
		next;
		mes "[Lehar]";
		mes "It turns around and starts again from the beginning.";
		next;
		mes "[Horr]";
		mes "I came back because it came out this way, but how could it be possible to open something that didn't open no matter what I did last time?";
		mes "It's free to come out, but it may not be free to go in.";
		next;
		mes "[Lazy]";
		mes "You have to do it to know";
		mes "The door won't open unless you try to open it.";
		npctalk "where-", "", bc_self;
		next;
		specialeffect EF_HIT1, AREA, "ep20_jor_nest_37_272";
		mes "<FONT SIZE = 20>[- Clap -]</FONT>";
		ep20_main = 13;
		close;
	}
	if (ep20_main == 13) {
		mes "[Lazy]";
		mes "Huh?? The handle turns?";
		mes "But, this, why, like this, doesn't open";
		next;
		select( "Let's stick together." );
		mes "[Lehar]";
		mes "Everyone, try your best to open it. A little more!";
		next;
		specialeffect EF_HIT1, AREA, "ep20_jor_nest_37_272";
		mes "<FONT SIZE = 20>[- Kiyiik -]</FONT>";
		ep20_main = 14;
		close;
	}
	if (ep20_main == 14) {
		mes "[Lazy]";
		mes "Work hard until the end with well-fed and well-trained muscles.";
		emotion ET_BEST;
		next;
		mes "[Horr]";
		mes "Why don't you help your hand instead of just your mouth?";
		specialeffect EF_HIT1;
		specialeffect EF_HIT1, AREA, "ep20_jor_nest_40_274";
		specialeffect EF_HIT1, AREA, "ep20_jor_nest_37_272";
		npctalk "Oh, it's me who's cheering so hard.", "", bc_self;
		npctalk "Cheer up everyone!", "ep20_jor_nest_39_272", bc_self;
		npctalk "You're energized!", "ep20_jor_nest_37_272", bc_self;
		next;
		specialeffect EF_WIDECONFUSE, AREA, "ep20_jor_nest_37_272";
		mes "[Lehar]";
		mes "Opened!!!";
		npctalk "phew-", "ep20_jor_nest_37_272", bc_self;
		next;
		mes "[Lazy]";
		mes "You all worked hard!!! Let's catch some breath now.";
		npctalk "What have you done?", "ep20_jor_nest_40_274", bc_self;
		ep20_main = 15;
		erasequest 16704;
		setquest 17691;
		close;
	}
	if (ep20_main == 15) {
		mes "[Lazy]";
		mes "It was really hard, adventurer, right? Listen to what that man over there is saying instead.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16704) == 1" );
	end;
}


// Main quest - Step 16
jor_nest,40,274,3	script(CLOAKED)	Horr#20ms00::ep20_jor_nest_40_274	4_EP19_RGAN_R1,{
	if (ep20_main == 15) {
		mes "[Horr]";
		mes "The door was open, but it was... embarrassing.";
		npctalk "Why did it open?", "ep20_jor_nest_39_272", bc_self;
		npctalk "I couldn't open it no matter what I did. Suddenly, why?", "ep20_jor_nest_37_272", bc_self;
		next;
		mes "[Lazy]";
		mes "Isn't it like ^0000cdopened^000000 on purpose?";
		mes "So that anyone who tries to open it can come in freely. It's embarrassing.";
		npctalk "Maybe it's a trap. Then we'll have to wait and see...", "ep20_jor_nest_37_272", bc_self;
		next;
		mes "[Horr]";
		mes "Even if it's a trap, you have no choice but to enter it.";
		npctalk "That's right", "ep20_jor_nest_39_272", bc_self;
		next;
		if (getstatus(SC_MONSTER_TRANSFORM,1) != 21530) {
			mes "[Horr]";
			mes "It would be nice to transform into ^0000cdRgan^000000 here. It's been relatively easy so far, but there's no guarantee that it won't be like that in the future.";
			close;
		}
		mes "[Horr]";
		mes "Before you go in, did you pack enough ^0000cdRgan Transformation Scrolls^000000? I don't know what's going on here, so I think it's better to go undetected in the future.";
		next;
		mes "[Horr]";
		mes "When you're ready, enter carefully.";
		next;
		mes "[Horr]";
		mes "Don't forget. In this ^0000cdfinding a place called 'The Place'^000000 and figuring out what you're trying to do there is the first priority.";
		mes "Let's not overdo it or do anything that stands out.";
		next;
		mes "[Lazy]";
		mes "I wonder why you're talking about that while looking me in the eye, but I'll pay for today's colleague by not asking.";
		mes "Anyway, it's been a long time since I've been thrilled to step into a place that might be a trap.";
		npctalk "Come in!", "ep20_jor_nest_36_274", bc_self;
		cloakonnpcself( "ep20_jor_nest_36_274" );
		next;
		mes "[Miriam]";
		mes "That person... I'm worried.";
		next;
		select( "I'll keep an eye on you" );
		mes "[Lehar]";
		mes "Let's go <NAVI>[inside]<INFO>jor_root1,32,34,0,101,0</INFO></NAVI>.";
		ep20_main = 16;
		erasequest 17691;
		setquest 17692;
		close2;
		warp "jor_root1",32,21;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17691) == 1" );
	end;
}

jor_nest,39,272,0	script	#20ms01	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep20_main >= 16) {
		// note: doesn't require transformation
		mes "This is the door leading to the snake god's root. Shall we open it?";
		// close2;	// note: official behaviour. Intended?
		next;
		if (select( "Open the door and move", "Do not open" ) == 2)
			end;
		warp "jor_root1",32,17;
		end;
	}
	end;
}



// Main quest - Step 17
jor_root1,32,34,5	script	Rgan Shaman#20ms10	EP20_RGAN_WARLOCK,{
	callfunc( "F_ep20_checkTransform" );
	if (ep20_main == 16) {
		setpcblock PCBLOCK_NPC, true;
		emotion ET_HUK;
		npctalk "What kind of human is pretending to be Rgan!!!", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "" + strcharinfo(0) + " : There's a human who recognizes Rgan. I'll have to deal with these guys and find the party.", bc_self;
		specialeffect EF_HIT1;
		npctalk "?!!", "", bc_self;
		sleep2 500;
		cloakonnpcself();
		ep20_main = 17;
		erasequest 17692;
		setquest 17693;
		monster "jor_root1",32,34,"Rgan Shaman","EP20_RGAN_WARLOCK",1;
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	// note: no text after quest completion
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17692) == 1" );
	end;
}


// Main quest - Step 18
jor_root2,239,243,0	script	#20ms10	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep20_main == 17 || ep20_main == 18 || ep20_main == 19) {
		unittalk getcharid(3), "" + strcharinfo(0) + " : Conversation can be heard from a small hole in the floor where people can come and go.", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 2000;
		setpcblock PCBLOCK_NPC, false;
		warp "jor_safty2",75,358;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(17693,HUNTING) == 2" );
	end;
}

jor_safty2,75,358,0	script	#20ms11	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep20_main == 17) {
		cloakoffnpcself( "ep20_jor_safty2_77_362_A" );
		cloakoffnpcself( "ep20_jor_safty2_81_362" );
		cloakoffnpcself( "ep20_jor_safty2_81_359" );
		end;
	}
	if (ep20_main == 18 || ep20_main == 19) {
		cloakoffnpcself( "ep20_jor_safty2_81_362" );
		cloakoffnpcself( "ep20_jor_safty2_81_359" );
		cloakoffnpcself( "ep20_jor_safty2_78_357" );
		end;
	}
	end;
}

jor_safty2,78,357,7	duplicate(dummy_cloaked_npc)	Lehar#20ms10::ep20_jor_safty2_78_357	4_EP19_RGAN_R3

jor_safty2,77,362,5	script(CLOAKED)	Lazy#20ms10::ep20_jor_safty2_77_362_A	4_EP19_RGAN_SR3,{
	if (checkweight(1001217,10) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main == 17) {
		if (getstatus(SC_MONSTER_TRANSFORM,1) != 21530) {
			mes "[Lazy]";
			mes "Adventurer! Come on, what are you doing without transforming into Rgan? Let's do it before we get caught.";
			close;
		}
		switch( checkquest(17693,HUNTING) ) {
		case -1:
			end;
		case 0:
		case 1:
			mes "[Lazy]";
			mes "Adventurer!! Did you see scary people walking around outside? Do something.";
			close;
		case 2:
			break;
		}
		mes "[Lazy]";
		mes "Hey! Adventurer!";
		emotion ET_DELIGHT;
		next;
		select("Have you been to this place?" );
		mes "[Horr]";
		mes "Why is it like that?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "The Rgan Shaman outside recognized the transformation.";
		npctalk "That's why we're hiding here too.", "", bc_self;
		next;
		mes "[Horr]";
		mes "Hmm... If they recognize us like this in the future, wouldn't transformation be useless? I'll have to think of another way.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I've put it away for now, so it should be fine for a while.";
		npctalk "As expected, we adventurers. We adventurers don't put up with it.", "", bc_self;
		next;
		mes "[Horr]";
		mes "Then, I'll have to get over it as quickly as possible without running into it.";
		mes "As for the problem, let's go in and think about it.";
		next;
		mes "[Miriam]";
		mes "Did you find the entrance by the way?";
		next;
		select( "Not yet" );
		mes "[Miriam]";
		mes "Isn't it? I've searched all over the area, but it's not easy to find.";
		next;
		mes "[Horr]";
		mes "Didn't Lehar and the adventurer come out through that side?";
		next;
		mes "[Miriam]";
		mes "You can't really see the entrance to a place that's important.";
		next;
		mes "[Horr]";
		mes "For anything like that, everyone was out and doing something. What are they doing?";
		next;
		mes "[Miriam]";
		mes "It seems to be working";
		mes "It was like no one had ever worked with their hands.";
		npctalk "Your hands were so awkward.", "", bc_self;
		next;
		select( "Has Lehar come yet?" );
		mes "[Horr]";
		mes "Yeah? Looks like they're still searching.";
		npctalk "Should I go out and look for it?", "ep20_jor_safty2_81_359", bc_self;
		next;
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_78_357";
		cloakoffnpcself( "ep20_jor_safty2_78_357" );
		mes "[Lehar]";
		mes "Is everyone here? I've been waiting in front of the entrance for a long time! No one has come!";
		npctalk "Your nephew is not even a man.", "", bc_self;
		next;
		mes "[Horr]";
		mes "You were waiting in front of the entrance? Did you find the entrance?";
		next;
		mes "[Lehar]";
		mes "Of course it came out through that side, but you remembered...?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I would appreciate it if everyone would stop looking at me like that.";
		npctalk "We adventurers... no, no.", "", bc_self;
		next;
		mes "[Horr]";
		mes "Then, now that we've found the entrance, let's go!!";
		next;
		mes "[Lazy]";
		mes "Wait! There must be a lot of top-notch Rgan out there, but I guess I'll have to be careful on the inside before I make any rash moves.";
		mes "Any useful information?";
		npctalk "That's right. You didn't even know the shaman existed until you came here.", "ep20_jor_safty2_81_359", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Hmm... It seemed that the inside was a very important place, as well as the decorations.";
		next;
		mes "[Lehar]";
		mes "That's right. Besides, the place where we were being held was further inside, and that seemed to be an important place too.";
		npctalk "I just got inside and there's a deeper place...", "ep20_jor_safty2_81_362", bc_self;
		next;
		mes "[Lehar]";
		mes "As you said, it's practically like a place where top-class Rgans live. But it doesn't seem like a residence.";
		mes "I couldn't take a closer look as I passed by, but looking at the decorations, I think it's an important place.";
		next;
		mes "[Miriam]";
		mes "You don't know what you're doing? Can you guess the identity of 'that place'?";
		next;
		mes "[Horr]";
		mes "Now, go in and check the details yourself. What do the people who were kidnapped know?";
		mes "Isn't that what we came for?";
		next;
		mes "[Lazy]";
		mes "Wait a minute. Hot-blooded Iwin. Inside, only the highest-ranking Rgan has been gathered, but if you enter the body of a higher-ranking person, you will arouse suspicion.";
		next;
		mes "[Horr]";
		mes "So what?";
		next;
		mes "[Lazy]";
		mes "So I'm here. Among them, I'm the only one with the highest rank, right?";
		mes "Reconnaissance and search are my specialties, so I need to show off my skills after a long time. I'll go and see if the superiors will show up or not.";
		next;
		mes "[Lazy]";
		mes "Everyone just wait here.";
		mes "I'll fix it and come back.";
		ep20_main = 18;
		erasequest 17693;
		setquest 17694;
		getitem 1001217,10;	// Ep20_Cat_Whiskers
		getexp2 136611959,0;
		getexp 0,22271670;
		add_reputation_points( REPU_EP20, 60 );
		close2;
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_77_362_A";
		cloakonnpcself( "ep20_jor_safty2_77_362_A" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(17693,HUNTING) == 2" );
	end;
}


// Main quest - Step 19
jor_safty2,75,360,5	duplicate(dummy_cloaked_npc)	Argan Bishop#20ms10::ep20_jor_safty2_75_360	4_EP19_RGAN_SR2

jor_safty2,81,359,3	script(CLOAKED)	Miriam#20ms10::ep20_jor_safty2_81_359	4_EP19_RGAN_R2,{
	if (ep20_main == 18) {
		if (getstatus(SC_MONSTER_TRANSFORM,1) != 21530) {
			mes "[Miriam]";
			mes "Adventurer, here it is better to continue transforming into Rgan.";
			close;
		}
		mes "[Miriam]";
		mes "Lazy went in alone. Is it okay?";
		mes "Even if he transforms into a top-notch Rgan, if there's a shaman inside...";
		next;
		mes "[Horr]";
		mes "I haven't seen him in a long time, but he looks like he'd walk out of the middle of a battlefield.";
		npctalk "Hmm... you don't have that side.", "", bc_self;
		next;
		select( "If it's Lazy... well..." );
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_77_362_A";
		cloakoffnpcself( "ep20_jor_safty2_77_362_A" );
		mes "[Lazy]";
		mes "This is such a big deal.";
		emotion ET_OHNO, getnpcid(0,"ep20_jor_safty2_77_362_A");
		next;
		select( "What's wrong with Lazy?" );
		mes "[Lazy]";
		mes "That's right, a lot happened";
		mes "As I enter the place my nephew found, all the eyes of the Rgans there are all at my face.";
		next;
		mes "[Lazy]";
		mes "At that time, I got a little cold sweat. I don't have many experiences like that.";
		next;
		select( "So what happened" );
		mes "[Lazy]";
		mes "Hey! I greeted them, and they all turned nasty and attacked me.";
		mes "People say hello after a long time. Shouldn't we say hello together? I won't do that to my enemies either.";
		next;
		mes "[Lazy]";
		mes "Anyway, my face is already widely known. As the human being when I cheated.";
		mes "No matter how much you hate him, what's a human being? He leaves nice words and resorts to violence.";
		npctalk "Whew - I didn't want to show my face like this.", "ep20_jor_safty2_77_362_A", bc_self;
		next;
		mes "[Miriam]";
		mes "Well, since the number of first-class Rgans is very small and new births are rare, it's only natural that they know each other's faces.";
		next;
		mes "[Lehar]";
		mes "Hmm... Apparently, Lazy did something last timeIt seems that his true identity has been revealed.";
		mes "Then we won't be able to go together... Let's find a way to get in by ourselves.";
		next;
		mes "[Lazy]";
		mes "Your nephew is having a good dream. Most of the top-class Rgans are there. The top-class ones are rare.";
		mes "Unconditionally, the top-notch Rgan must enter. And with a face they know well.";
		next;
		mes "[Horr]";
		mes "But don't we know of the finest Rgan?";
		next;
		select( "So what..." );
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_75_360";
		cloakoffnpcself( "ep20_jor_safty2_75_360" );
		mes "[Bishop Rgan]";
		mes "I'm going to spend some time here.";
		next;
		emotion ET_HUK, getnpcid(0,"ep20_jor_safty2_78_357");
		emotion ET_HUK, getnpcid(0,"ep20_jor_safty2_81_362");
		sleep2 500;
		emotion ET_HUK;
		emotion ET_QUESTION, getnpcid(0,"ep20_jor_safty2_75_360");
		mes "[Bishop Rgan]";
		mes "Uh... who are you guys. These are the faces I've never seen before.";
		next;
		mes "[Lazy]";
		mes "I don't know? This priest here too?";
		next;
		emotion ET_QUESTION, getnpcid(0,"ep20_jor_safty2_75_360");
		mes "[Bishop Rgan]";
		mes "I don't know. Should I know?";
		next;
		mes "[Bishop Rgan]";
		mes "Anyway, everyone is not working and hanging out here? Why? Since you guys are playing, shouldn't I come out and work too?";
		mes "Go ahead and get to work";
		next;
		emotion ET_DELIGHT, getnpcid(0,"ep20_jor_safty2_77_362_A");
		mes "[Lazy]";
		mes "Whoa - Lucky Lazy. A lucky person who can even look down at the sky.";
		next;
		select( "Suddenly?" );
		mes "[Lazy]";
		mes "Hey, you know. An eye for an eye, a tooth for a tooth. What do you think?";
		mes "I really like it. Adventurer?";
		npctalk "Why are you bringing that up all of a sudden?", "ep20_jor_safty2_81_362", bc_self;
		npctalk "I prefer to double my favor and triple my grudge.", "", bc_self;
		npctalk "As expected, it's hot. I like it. It's a once-in-a-lifetime attitude.", "ep20_jor_safty2_77_362_A", bc_self;
		next;
		select( "Yes?" );
		mes "[Lazy]";
		mes "My adventurer, how did you feel when you were kidnapped? Are you devastated? Are you angry? Was it painful?";
		mes "Is your nephew there? Wasn't your nephew like that too?";
		next;
		npctalk "As expected, it's hot. I like it. It's a once-in-a-lifetime attitude.", "ep20_jor_safty2_77_362_A", bc_self;
		mes "[Lehar]";
		mes "Yeah, it's similar.";
		mes "I'm dying now... I'm going to Odin's side like this...";
		next;
		mes "[Lazy]";
		mes "Isn't it? I can't even sleep because I'm so angry and upset. It's only natural that we all seek revenge, right?";
		next;
		select( "Uh..." );
		mes "[Lazy]";
		mes "^0000cdLet's pay the same^000000. A blind Rgan appeared like this. This is a chance.";
		mes "Let's kidnap that Rgan too!";
		npctalk "Yes?", "ep20_jor_safty2_78_357", bc_self;
		next;
		mes "[Miriam]";
		mes "Where do you kidnap and use it? Are you going in with this person at the fore?";
		npctalk "That won't work. Rather, we'll be driven by the few in number.", "ep20_jor_safty2_81_362", bc_self;
		next;
		mes "[Lazy]";
		mes "Ugh~ I'm not trying to use such a simple method. I'm going in disguised as this person.";
		next;
		mes "[Lehar]";
		mes "You don't seem to know anything, so even if we act like idiots, we wouldn't know much on the inside?";
		next;
		mes "[Bishop Rgan]";
		mes "Well, if you don't know our faces, it must be Rgan who really doesn't know anything.";
		next;
		mes "[Lehar]";
		mes "Hey, I think I'm hearing something blasphemous about me.";
		next;
		mes "[Lazy]";
		mes "It's impossible with our faces to get in there.";
		mes "So ^0000cdWe need a face that can freely come in and out^000000, but we don't have Rgan.";
		next;
		mes "[Lazy]";
		mes "Of course, it's not impossible if you have a lot of time, but you don't have enough time right now, right?";
		mes "So let's just steal this face";
		next;
		mes "[Lehar]";
		emotion ET_FRET, getnpcid(0,"ep20_jor_safty2_75_360");
		mes "Yeah? You ripped off your face... How could you be so cruel...";
		mes "But, if need be...";
		next;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Don't look so spleen at that!", bc_self;
		mes "[Bishop Rgan]";
		mes "Wait, I think I'm hearing something ominous about me.";
		next;
		mes "[Lazy]";
		mes "How do you view me? I'm not one to make things complicated";
		mes "Is there a need for that? Like I said before, it's easy to disguise.";
		emotion ET_FRET, getnpcid(0,"ep20_jor_safty2_75_360");
		next;
		npctalk "Wait, that's what you mean when you need it, right?", "ep20_jor_safty2_81_362", bc_self;
		mes "[Lazy]";
		mes "Blind Rgan has appeared before us, and all we have to do is steal his face and get in";
		mes "Nothing complicated, really simple.";
		next;
		mes "[Miriam]";
		mes "Can a disguise be so convincing? You don't even know the appearance, the way you talk, or at least the inner circumstances.";
		next;
		mes "[Lazy]";
		mes "You worry too much. I'm here";
		mes "Give me five minutes. I'll steal all of Rgan's life. Everything from the cradle to the funeral arrangements.";
		next;
		mes "[Bishop Rgan]";
		mes "Uh-uh- where are you going to drag me?";
		mes "Let this go!";
		ep20_main = 19;
		erasequest 17694;
		setquest 17695;
		close2;
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_75_360";
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_77_362_A";
		cloakonnpcself( "ep20_jor_safty2_77_362_A" );
		cloakonnpcself( "ep20_jor_safty2_75_360" );
		end;
	}
	mes "[Miriam]";
	mes "Is it okay if I send it that way?";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17694) == 1" );
	end;
}


// Main quest - Step 20
jor_safty2,77,362,5	duplicate(dummy_cloaked_npc)	Lazy#20ms11::ep20_jor_safty2_77_362_B	4_EP19_RGAN_SR2

jor_safty2,81,362,3	script(CLOAKED)	Horr#20ms10::ep20_jor_safty2_81_362	4_EP19_RGAN_R1,{
	if (ep20_main == 19) {
		if (getstatus(SC_MONSTER_TRANSFORM,1) != 21530) {
			mes "[Horr]";
			mes "It's best to transform into Rgan here.";
			close;
		}
		mes "[Horr]";
		mes "Is that word trustworthy?";
		next;
		select( "Lazy? You can trust me." );
		mes "[Horr]";
		mes "Well... Then, when the author returns, I will leave Rgan in the ice castle. Leaving it here for no reason could cause trouble.";
		next;
		mes "[Lehar]";
		mes "Then we'll go inside together when Lazy returns.";
		next;
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_77_362_B";
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_75_360";
		cloakoffnpcself( "ep20_jor_safty2_77_362_B" );
		mes "[Bishop Rgan]";
		mes "Hey!";
		cloakoffnpcself( "ep20_jor_safty2_75_360" );
		npctalk "Aren't they really the same?!", "ep20_jor_safty2_78_357", bc_self;
		emotion ET_HUK, getnpcid(0,"ep20_jor_safty2_78_357");
		next;
		select( "Who is Lazy?" );
		mes "[Lazy]";
		mes "Even adventurers won't recognize you? What did I say? Call me Nadyagand from now on.";
		mes "As expected, it's Lazy? Even if you don't say that, you know it well, so save energy.";
		npctalk "Eup! Ugh!!!", "ep20_jor_safty2_75_360", bc_self;
		next;
		mes "[Miriam]";
		mes "But it's no use if there's a shaman inside, right?";
		next;
		mes "[Lazy]";
		mes "Oh, don't worry about that. They say that only those with confirmed identities can enter inside, so shamans don't appear often. So rest assured!";
		next;
		mes "[Horr]";
		mes "Then, I'll deliver the interest. You guys go over there and get some information.";
		ep20_main = 20;
		erasequest 17695;
		setquest 17696;
		close2;
		cloakonnpcself( "ep20_jor_safty2_77_362_B" );
		cloakonnpcself( "ep20_jor_safty2_81_362" );
		cloakonnpcself( "ep20_jor_safty2_81_359" );
		cloakonnpcself( "ep20_jor_safty2_78_357" );
		cloakonnpcself( "ep20_jor_safty2_75_360" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17695) == 1" );
	end;
}


// Main quest - Step 21, 22
jor_sanct,159,84,7	duplicate(dummy_cloaked_npc)	Lazy#20ms20::ep20_jor_sanct_159_84	4_EP19_RGAN_SR2
jor_sanct,160,82,7	duplicate(dummy_cloaked_npc)	Lehar#20ms20::ep20_jor_sanct_160_82	4_EP19_RGAN_R3
jor_sanct,157,85,7	duplicate(dummy_cloaked_npc)	Miriam#20ms20::ep20_jor_sanct_157_85	4_EP19_RGAN_R2

jor_sanct,161,88,3	duplicate(dummy_cloaked_npc)	Rgan#20ms21::ep20_jor_sanct_161_88	4_EP19_RGAN_SR2
jor_sanct,164,86,3	duplicate(dummy_cloaked_npc)	Rgan#20ms22::ep20_jor_sanct_164_86	4_EP19_RGAN_SR1

jor_sanct,162,86,3	script	Rgan#20ms20	4_EP19_RGAN_SR3,{
	callfunc( "F_ep20_checkTransform" );
	if (checkweight(1201,1) == 0) {
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main == 20) {
		cloakoffnpcself( "ep20_jor_sanct_159_84" );
		cloakoffnpcself( "ep20_jor_sanct_160_82" );
		cloakoffnpcself( "ep20_jor_sanct_157_85" );
		mes "[Rgan]";
		mes "Nadyagand? Are my eyes wrong? Why can't I see Nadyagand?";
		mes "I thought you'd barely come in before today.";
		next;
		mes "[Lazy]";
		mes "I think I can hear you talking about me now.";
		next;
		specialeffect EF_HIT1, AREA, "ep20_jor_sanct_161_88";
		specialeffect EF_HIT1, AREA, "ep20_jor_sanct_164_86";
		cloakoffnpcself( "ep20_jor_sanct_161_88" );
		cloakoffnpcself( "ep20_jor_sanct_164_86" );
		emotion ET_HUK, getnpcid(0,"ep20_jor_sanct_161_88");
		mes "[Rgan]";
		mes "What? Nadyagand? You're here already? It can't be!";
		next;
		mes "[Rgan]";
		mes "Did you come here before you finished your work? Didn't you say that Sarekgandh won't let you go?";
		next;
		mes "[Rgan]";
		mes "Phew- If I had known that Nadyagand would still be fine, I would have done it myself too.";
		next;
		mes "[Rgan]";
		mes "What blasphemies!";
		mes "We are all serving Lasgand. It's an honor.";
		next;
		mes "[Rgan]";
		mes "On the day that will come soon, we will be closer to him!";
		next;
		mes "[Rgan]";
		mes "But hard work is hard. When did we do something like this?";
		npctalk "That's... yes", "ep20_jor_sanct_161_88", bc_self;
		next;
		mes "[Rgan]";
		mes "Nadyagand, you too, go out on the road and come back after work.";
		next;
		mes "[Lazy]";
		mes "Since you misunderstand me, I have no choice but to clear up my misunderstanding myself.";
		mes "I came back from work. The priests behind me took over.";
		next;
		mes "[Rgan]";
		mes "thatCome to think of it, what are the priests behind me? Why are there priests I haven't seen around here?";
		next;
		mes "[Rgan]";
		mes "I see? It's the first time I've seen a face. Aren't these people who have transformed?";
		next;
		mes "[Rgan]";
		mes "Nadyagand, before you came, there was a mess with a human being in shape";
		next;
		mes "[Lazy]";
		mes "Has that happened?";
		next;
		mes "[Lazy]";
		mes "These priests have just returned from a regular patrol far away.";
		mes "I brought it here because it wandered in the roots when I saw that our dwelling had become that shape.";
		mes "Of course, it wasn't free because it was brought to a place where no one else could enter.";
		next;
		mes "[Lehar]";
		mes "Yes, instead of vouching for our identities, we've decided to do the work for Bishop Nadyagand.";
		next;
		mes "[Rgan]";
		mes "do the... work?";
		mes "So... Hands on?";
		npctalk "Hands on!", "ep20_jor_sanct_161_88", bc_self;
		npctalk "Hands on!!", "ep20_jor_sanct_164_86", bc_self;
		emotion ET_THROB, getnpcid(0,"ep20_jor_sanct_161_88");
		emotion ET_THROB, getnpcid(0,"ep20_jor_sanct_164_86");
		next;
		mes "[Rgan]";
		mes "A reliable hand at a time like this. You can rest now.";
		next;
		mes "[Rgan]";
		npctalk "What a shame.", "", bc_self;
		mes "Guys, you just need to organize this. Then do it well. I need to meditate a little.";
		npctalk "What??!!! Wait!", "ep20_jor_sanct_161_88", bc_self;
		npctalk "That's not it!!", "ep20_jor_sanct_164_86", bc_self;
		next;
		mes "[Rgan]";
		mes "To take care of your work? No, I have more work, so I'll start with mine.";
		npctalk "No! I'm first! I put a dot first!!", "ep20_jor_sanct_164_86", bc_self;
		next;
		mes "[Rgan]";
		mes "What are you talking about. Didn't you say you would do more service for Lord Lasgand?";
		npctalk "I heard that too!", "ep20_jor_sanct_161_88", bc_self;
		next;
		mes "[Rgan]";
		mes "I've already done enough for today. Now, why don't you take a break for tomorrow's service?";
		npctalk "No that's for everyone!", "", bc_self;
		next;
		mes "[Rgan]";
		mes "My job is more difficult than yours, so of course you should help me with mine first.";
		npctalk "No! If that's the case, I'll go first!", "ep20_jor_sanct_164_86", bc_self;
		next;
		mes "[Rgan]";
		mes "Stop!! I haven't even started yet. So of course I do my job first!!";
		npctalk "All quiet.", "ep20_jor_sanct_159_84", bc_self;
		next;
		mes "[Lazy]";
		mes "Do the one who said it first. Everyone just needs to rest in the meantime.";
		mes "There are a lot of people, what are you worried about? Ah, I need to use these two for a while, so use these two later.";
		next;
		mes "[Rgan]";
		mes "Is that so? Then let me see you first.";
		next;
		mes "[Lazy]";
		mes "Then let me take a break-";
		mes "You two go with me";
		ep20_main = 21;
		erasequest 17696;
		setquest 17697;
		close2;
		cloakonnpcself( "ep20_jor_sanct_161_88" );
		cloakonnpcself( "ep20_jor_sanct_159_84" );
		cloakonnpcself( "ep20_jor_sanct_160_82" );
		cloakonnpcself( "ep20_jor_sanct_157_85" );
		cloakonnpcself( "ep20_jor_sanct_164_86" );
		end;
	}
	if (ep20_main == 21) {
		mes "[Rgan]";
		mes "Yes, you're a good-looking priest. You seem reliable enough to be entrusted with this task.";
		next;
		mes "[Rgan]";
		mes "It's been a while since we've been established in these sacred roots.";
		mes "At first, the confusion and impressions were gradually sorted out as time passed, and we had to live our daily lives here as before.";
		next;
		mes "[Rgan]";
		mes "We who were chosen had to work to live our daily lives while praying and purifying our bodies and minds.";
		mes "Priests weren't chosen, so we, the bishops, had to do it ourselves";
		npctalk "Look at my rough hands...", "", bc_self;
		next;
		mes "[Rgan]";
		mes "The biggest reason was that humans transformed into bishops and priests and messed around a while ago...";
		mes "Since then ^0000cdPriests whose identity has not been guaranteed have not been^000000 allowed to enter this place.";
		next;
		mes "[Rgan]";
		mes "Hu- So, do you know how valuable your priests are?";
		emotion ET_OHNO;
		next;
		select( "Yes, of course" );
		mes "[Rgan]";
		mes "Yeah. If you go outside, is there a place where you can get ^0000cd snake berries^000000?";
		next;
		select( "Banberry?" );
		mes "[Rgan]";
		mes "Yes. Even if life is restricted here, everyone will be dissatisfied if you can't get one of your favorite items.";
		npctalk "Everyone loves it.", "", bc_self;
		next;
		mes "[Rgan]";
		mes "If you leave this place, you can dig it up from the roots of the snake god.";
		mes "Fortunately, I can dig a little bit before the priest arrives, so it's a relief.";
		next;
		mes "[Rgan]";
		mes "I'm tired and need to rest, so the priest will help me.";
		next;
		select( "Yes, I understand" );
		mes "[Rgan]";
		mes "^0000cdYou only need to get 3 more " + getitemname(1001154) + "^000000.";
		ep20_main = 22;
		erasequest 17697;
		setquest 17698;
		close;
	}
	if (ep20_main == 22) {
		mes "[Rgan]";
		mes "Hmm... ^0000cd3" + getitemname(1001154) + "^000000?";
		mes "Collect diligently. Don't pick up anything that has fallen.";
		close;
	}
	if (ep20_main == 23) {
		mes "[Rgan]";
		mes "Are you here? You got the right quantity.";
		mes "The reason I've been digging these berries is because other people have been too busy digging them out and putting them in their mouths.";
		next;
		mes "[Rgan]";
		mes "I don't enjoy it so I ended up digging the berries myself. But it was too hard...";
		next;
		select( "This raspberry is..." );
		mes "[Rgan]";
		mes "Yes. It's a favorite item of bishops.";
		mes "Maybe the priest hasn't experienced it. Kaeo is limited.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Yes, there are many things I don't know";
		mes "What kind of place is this place...";
		next;
		mes "[Rgan]";
		mes "Um...yes. I guess my explanation wasn't good enough...";
		mes "This is the sanctuary of our ^0000cdChurch of Jormungand^000000.";
		npctalk "Listen carefully.", "", bc_self;
		next;
		mes "[Rgan]";
		mes "This is the place where Lord Lasgand first awakened after receiving Lord Jormungand's blessing.";
		mes "Now ^0000cdis the residence of Lord Lasgand and the place where sacrifices are held^000000. This is a very sacred and sacred place.";
		next;
		mes "[Rgan]";
		mes "That's why only very few bishops were able to come and go, but Lord Lasgand bestowed grace upon the previous commotion.";
		mes "So that ordinary bishops like us can come in.";
		next;
		select("Grace?" );
		mes "[Rgan]";
		mes "This is where ^0000cdcan only hold a select few^000000.";
		mes "The time is near, so the bishops are saying to purify your body and mind and welcome the coming Lord Jormungandr.";
		npctalk "What an honor this is.", "", bc_self;
		next;
		select( "The time is near... When is the Resurrection?" );
		mes "[Rgan]";
		mes "Well, since you said that, you don't know whether it will be today or tomorrow.";
		mes "But ^0000cdI have a feeling^000000 isn't too far.";
		next;
		mes "[Rgan]";
		mes "If you purify your body and mind and do service, you will be able to stand closest to Him when He returns.";
		next;
		mes "[Rgan]";
		mes "So don't think of taking on the job, think of serving the present for the future.";
		npctalk "Maybe it's yours too.", "", bc_self;
		next;
		select( "Yes, of course" );
		mes "[Rgan]";
		mes "Yes, that's how it should be. We'll live forever with Lord Jormungand's blessing.";
		mes "Okay, I'll take a break now. Go to <NAVI>[Rgan]<INFO>jor_sanct,185,128,0,101,0</INFO></NAVI>.";
		if (countitem(1001154) > 0)	// debug
			delitem 1001154, countitem(1001154);	// Ep20_Jor_Berry
		ep20_main = 24;
		erasequest 17719;
		setquest 17699;
		getexp2 68305979,0;
		getexp 0,11135835;
		close;
	}
	if (ep20_main == 24) {
		mes "[Rgan]";
		mes "Your business is over, go help <NAVI>[Rgan]<INFO>jor_sanct,185,128,0,101,0</INFO></NAVI>. I'll be waiting for you.";
		close;
	}
	// note: default text before and after
	mes "[Rgan]";
	mes "I wish I could know... when that day will come.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17696) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17697) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17719) == 1" );
	end;
}


// Main quest - Step 23
// (Part of the Daily quest : 'Taste of hobby')
// jor_root2,43,63,5	script	hard spot#20ms00::ep20_jor_root2_43_63	4_POINT_RED,{


// Main quest - Step 24
// jor_sanct,162,86,3	script	Rgan#20ms20	4_EP19_RGAN_SR3,{


// Main quest - Step 25
jor_sanct,185,128,3	script	Rgan#20ms23	4_EP19_RGAN_SR2,{
	callfunc( "F_ep20_checkTransform" );
	if (checkweight(1001218,1) == 0) {
		mes "- You cannot proceed with the quest because you have too many items. -";
		close;
	}
	if (ep20_main == 24) {
		mes "[Rgan]";
		mes "You're here. I've been waiting for you.";
		next;
		select( "What should I do?" );
		mes "[Rgan]";
		mes "Okay. I need to reinstall this. Do you know the way?";
		mes "The collected magical energy has been processed and is empty, so just leave it in an appropriate place.";
		next;
		select( "This is... a strange thing I've never seen before..." );
		mes "[Rgan]";
		mes "Oh, by the way, you said you arrived here a while ago.";
		mes "Then you might not know...";
		next;
		mes "[Rgan]";
		mes "This is a man-made object ^0000cdfrom outside^000000. They say it's a device that collects ^0000cdmagical powers^000000 in the ground.";
		next;
		mes "[Rgan]";
		mes "After disposing of the collected magical energy here, go and install the empty device again.";
		npctalk "I don't know more than that.", "", bc_self;
		next;
		mes "[Rgan]";
		mes "Is that why we're doing all this hard work?Wouldn't that be?";
		mes "It's something a priest should do, but I don't have enough hands...";
		emotion ET_OHNO;
		next;
		mes "[Rgan]";
		mes "Fortunately, ^0000cdmanagement is being done by humans brought in by humans^000000 so we don't have to touch it.";
		mes "What a relief. Just looking at that is a headache.";
		next;
		select( "Does this really collect magic?" );
		mes "[Rgan]";
		mes "Yeah. Didn't you see it on the way? I installed it here and there and collected it.";
		mes "That look... you're not thinking of stealing magic, are you?";
		npctalk "But don't think you can absorb it entirely.", "", bc_self;
		next;
		select( "No" );
		mes "[Rgan]";
		mes "Yeah. It doesn't even look like that...";
		mes "Have you got the new transformer?";
		next;
		select( "What is that?" );
		mes "[Rgan]";
		mes "Ah, I don't know that either, yes. I don't know. I keep forgetting.";
		mes "It's a man-made device. It helps our ^0000cdRgan transform into a bird^000000 bird.";
		next;
		mes "[Rgan]";
		mes "It's a disgrace, but what can I do. That's all there is to being able to roam freely outside.";
		mes "Fortunately, those stupid birds didn't recognize us when we were transformed.";
		npctalk "I still feel bad about it.", "", bc_self;
		next;
		mes "[Rgan]";
		mes "You don't even know the device, so you'd better leave this to someone else.";
		next;
		select( "Why?" );
		mes "[Rgan]";
		mes "You have to transform into a bird to install it, but you, the priest, have never done it before.";
		mes "It takes time to adapt to that too...";
		next;
		mes "[Rgan]";
		mes "From the way they walk, to the way they act, to the way they speak, they say they are completely different.";
		mes "If you're interested, you can train it later.";
		npctalk "If you have any ideas, let me know in advance.", "", bc_self;
		next;
		mes "[Rgan]";
		mes "But you need to install this right now, so take it to the bishop you saw earlier.";
		mes "I'll be annoyed, but I'll take care of it.";
		next;
		mes "[Rgan]";
		mes "You don't have to come back to me, so when you're done, find <NAVI>[Rgan]<INFO>jor_sanct,42,105,0,101,0</INFO></NAVI>.";
		ep20_main = 25;
		erasequest 17699;
		setquest 17700;
		getitem 1001218,1;	// Ep20_Jor_Device
		getexp2 68305979,0;
		getexp 0,11135835;
		close;
	}
	if (ep20_main == 25) {
		mes "[Rgan]";
		mes "Didn't you tell me you didn't have to come back?";
		mes "Go ahead and give it to <NAVI>[Rgan]<INFO>jor_sanct,42,105,0,101,0</INFO></NAVI> and bring it back.";
		close;
	}
	// note: default text
	mes "[Rgan]";
	mes "How long do we have to do this... No, no! For Lasgand, this isn't too hard!";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17699) == 1" );
	end;
}


// Main quest - Step 26
jor_sanct,44,108,5	duplicate(dummy_cloaked_npc)	Lazy#20ms21::ep20_jor_sanct_44_108	4_EP19_RGAN_SR2
jor_sanct,47,105,1	duplicate(dummy_cloaked_npc)	Lehar#20ms21::ep20_jor_sanct_47_105	4_EP19_RGAN_R3
jor_sanct,47,108,3	duplicate(dummy_cloaked_npc)	Miriam#20ms21::ep20_jor_sanct_47_108	4_EP19_RGAN_R2

// todo effect?
// jor_sanct,42,105,0	script	#20ms20	HIDDEN_WARP_NPC,5,5,{
	// end;
// OnTouch:
	// end;
// }

jor_sanct,42,105,5	script	Rgan#20ms24	4_EP19_RGAN_SR1,{
	if (checkweight(1001217,20) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	callfunc( "F_ep20_checkTransform" );
	if (ep20_main == 25) {
		mes "[Rgan]";
		mes "You are a priest who has come to work.";
		mes "But there was work to do but it's gone";
		next;
		select( "Yes?" );
		mes "[Rgan]";
		mes "That's it. I couldn't stand the boredom while waiting, so I finished it all.";
		mes "Unexpectedly, I thought that doing a job might not suit my aptitude.";
		npctalk "This is true...", "", bc_self;
		next;
		mes "[Rgan]";
		mes "Oh, don't tell anyone else about this. Tomorrow has to come to me first?";
		next;
		select( "Why are the bishops working?" );
		mes "[Rgan]";
		mes "By the way. Since the resurrection is imminent, we who have been chosen would have liked to purify our bodies and minds.";
		mes "^0000cd Since the only chosen ones are bishops, ^000000 I started working on my own.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I heard that very few priests entered, but I heard that this was made by an outsider.";
		next;
		mes "[Rgan]";
		mes "You're right. That human was pretty good with magic? We only had a handful of shaman.";
		mes "Shouldn't it be said that prejudice against humans has disappeared a bit after seeing what shamans can't do...?";
		npctalk "I never thought this day would come...", "", bc_self;
		next;
		mes "[Rgan]";
		mes "Thanks to that ^0000cdhuman, Jormungand's resurrection is just around the corner^000000.";
		mes "Thanks to that, it's rumored that Lasgand is very fond of him. He's been having a very busy day with that human.";
		next;
		mes "[Rgan]";
		mes "Seeing that the atmosphere is so good, now I really feel that Lord Jormungand's resurrection is right around the corner.";
		next;
		select( "I didn't see Lasgand." );
		mes "[Rgan]";
		mes "That's because ordinary bishops like us have no reason to show up.";
		mes "From what I hear, ^0000cdIt seems that you are focusing on the resurrection of Lord Jormungand^000000.";
		npctalk "As expected Lasgand.", "", bc_self;
		next;
		select( "Where?" );
		mes "[Rgan]";
		mes "Nobody knows that";
		mes "We bishops and priests don't have to wonder about that. We just need to strengthen our faith in Jormungand, who will soon be resurrected.";
		next;
		select( "Are there any other humans?" );
		mes "[Rgan]";
		mes "Other humans? Who else was...?";
		mes "Are you talking about the people who used to do labor? I left all those filthy people in the nest...";
		next;
		mes "[Rgan]";
		mes "Well, yes. There were humans he brought. That's right. They came here too.";
		mes "What kind of devices do you use here. They're not as good as that human, but they're quite good too.";
		npctalk "Seeing humans again.", "", bc_self;
		next;
		mes "[Rgan]";
		mes "Sometimes, when the human and Lasgand go out on business, they seem to act as escorts...";
		next;
		select( "Where are the humans?" );
		mes "[Rgan]";
		mes "If you're curious, go to the place that handles devices. But aren't you on your way from there?";
		mes "The one in your hand. Did you go out to install that device already?";
		next;
		select( "Oh, this..." );
		mes "[Rgan]";
		mes "What? Is this for me?? Why is this for me??";
		mes "Eh! You're putting off work on me again!!! I won't let you go!!";
		npctalk "Defer work to me?", "", bc_self;
		next;
		specialeffect EF_HIT1;
		cloakonnpcself();
		cloakoffnpcself( "ep20_jor_sanct_44_108" );
		specialeffect EF_HIT1, AREA, "ep20_jor_sanct_44_108";
		mes "[Lazy]";
		mes "Adventurer! You're here. How is it? Did it work?";
		next;
		specialeffect EF_HIT1, AREA, "ep20_jor_sanct_47_105";
		specialeffect EF_HIT1, AREA, "ep20_jor_sanct_47_108";
		cloakoffnpcself( "ep20_jor_sanct_47_105" );
		cloakoffnpcself( "ep20_jor_sanct_47_108" );
		mes "[Lehar]";
		mes "Ugh- everyone is here.";
		next;
		mes "[Miriam]";
		mes "I barely escaped not letting go and holding on.";
		npctalk "Without giving any information!", "ep20_jor_sanct_47_105", bc_self;
		next;
		select( "Did you get anything?" );
		mes "[Lehar]";
		mes "Those bishops? They only work and barely talk!";
		next;
		mes "[Miriam]";
		mes "It seemed like he didn't want to talk to the priest.";
		next;
		select( "What about Lazy? You're a bishop?" );
		mes "[Lazy]";
		mes "That's it. The original owner of this figure has a bad reputation. No one wants to talk to me. I picked the wrong person.";
		next;
		mes "[Lazy]";
		mes "But if I'm ignoring this Rgan's personality and roaming around the floor, then I'll be suspicious. I'll need some time.";
		next;
		mes "[Lazy]";
		mes "But don't worry too much, it's only a matter of time";
		mes "How about an adventurer?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I wanted to get information about where Lasgand went, but I didn't get much success.";
		mes "But everyone seems to believe that Jormungandr's resurrection is imminent.";
		next;
		mes "[Lehar]";
		mes "That's right! He was very engrossed. He said he wanted to stand closest to the person who would come back to this land!";
		npctalk "I guess I'll have to find it there too.", "ep20_jor_sanct_47_108", bc_self;
		next;
		mes "[Lehar]";
		mes "But I don't open my mouth easily. Maybe it's a secret place unknown to the bishops.";
		next;
		mes "[Lazy]";
		mes "Someone must know, such as Lasgand's right hand.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Come to think of it, I don't see the person I saw last time. His name is...";
		next;
		mes "[Lazy]";
		mes "^0000cdsarekgandh^000000.";
		mes "Since you claim to be Lasgand's right-hand man, if you don't stick by Lasgand's side, you might end up taking care of the house somewhere.";
		next;
		mes "[Miriam]";
		mes "In that case, we have no choice but to find while helping the ^0000cdorgans with their work^000000.";
		next;
		mes "[Lazy]";
		mes "Okay, yes. <NAVI>[Pamochegand]<INFO>jor_sanct,257,115,0,101,0</INFO></NAVI> and other Rgans took over a little while ago.I was looking for it.";
		mes "Go that way. Good job then!";
		npctalk "Cheer up, everyone!", "ep20_jor_sanct_47_105", bc_self;
		if (countitem(1001218) > 0)
			delitem 1001218, countitem(1001218);	// Ep20_Jor_Device
		ep20_main = 26;
		erasequest 17700;
		setquest 17701;
		getitem 1001217,20;	// Ep20_Cat_Whiskers
		getexp2 68305979,0;
		getexp 0,11135835;
		add_reputation_points( REPU_EP20, 90 );
		close2;
		cloakonnpcself( "ep20_jor_sanct_47_105" );
		sleep2 300;
		cloakonnpcself( "ep20_jor_sanct_44_108" );
		cloakonnpcself( "ep20_jor_sanct_47_108" );
		end;
	}
	mes "[Rgan]";
	mes "Would other things... be fun?";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17700) == 1" );
	end;
}


// Main quest - Step 27
// Note: This part (the 5 pre-re quests according to KRO website) would take more run to get the exact structure, but the idea is there.

// Pre-re quest 1
// (part of the daily quest "Example of silent answer")
// jor_sanct,257,115,3	script	Pamoshugand#1	4_EP19_RGAN_SR2,{

// Pre-re quest 2
jor_sanct,218,86,5	script	Gamiravagand#1::ep20_jor_sanct_218_86	4_EP19_RGAN_R2,{
	callfunc( "F_ep20_checkTransform" );
	if (checkweight(1201,1) == 0) {
		mes "- You cannot proceed with the quest because you have too many items. -";
		close;
	}
	if (ep20_main < 26) {
		mes "Now is not the time to be thinking about other things.";
		close;
	}
	mes "Gamirabagand keeps nodding his head at the story of Gomya Gandh";
	mes "...might be sleeping.";
	close;
}

jor_sanct,215,84,3	script	Gomiagand#1	4_EP19_RGAN_SR3,{
	callfunc( "F_ep20_checkTransform" );
	if (checkweight(1201,1) == 0) {
		mes "- You cannot proceed with the quest because you have too many items. -";
		close;
	}
	if (ep20_main < 26) {
		mes "Now is not the time to be thinking about other things.";
		close;
	}
	if (ep20_main == 26) {
		if (isbegin_quest(8841) == 0)
			setquest 8841;
		if (isbegin_quest(8841) == 1) {
			mes "[Gomiagand]";
			mes "Huh?";
			mes "Is there anything inconvenient?";
			next;
			mes "[Gomiagand]";
			mes "Umm";
			mes "Did you catch me spreading rumors that this place is small and dirty?";
			next;
			mes "[Gomiagand]";
			mes "I'm fine now";
			mes "It's a bit narrow here, but~";
			mes "But... because Lasgand took care of it~";
			next;
			mes "[Gomiagand]";
			mes "And... Gamiravagand is also full of motivation to study~";
			next;
			mes "[Gomiagand]";
			mes "Hey, it's Gamiravagand";
			npctalk "Gamira Bagand: ...", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Hey, it's Gamiravagand";
			npctalk "Gamira Bagand: Ah yes!", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "How far did I say earlier?";
			npctalk "Gamiravagand: Ah... I mean. It was about the hero Blatagand.", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Blatagand?";
			mes "Ugh, the story of Blatagand ended a while ago, so you clapped your hands.";
			next;
			mes "[Gomiagand]";
			mes "What happened?";
			mes "After Blatagand, Suragand, and Mitagigand...";
			mes "Cinnamilgand...";
			mes "It seems that progress has been made so far...?";
			npctalk "Gamira Bagand: Ah...", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Perhaps... it's Gamiravagand";
			mes "Are you sleepy?";
			npctalk "Gamira Bagand: Hehe", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Are you sleepy?";
			npctalk "Gamira Bagand: Oh no!", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Haa~.";
			mes "Hey, there you are";
			mes "A trifle.";
			next;
			if (select( "Look around", "Answer" ) == 1) {
				mes "[Gomiagand]";
				mes "Who's here besides me, this guy, and you?";
				mes "Yeah, you mean you.";
				next;
				select( "Yes?" );
			}
			mes "[Gomiagand]";
			mes "Okay, good answer.";
			mes "I said earlier that there was nothing inconvenient, but there is. I just got it.";
			mes "You, let's study.";
			mes "About the history of our Rgan.";
			next;
			mes "[Gomiagand]";
			mes "Gamira Bagand, you... see you later";
			mes "I'm reflecting there!";
			npctalk "Gamira Bagand: Yeah...", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Do you know how we came into being as a species?";
			mes "But since the study of the doctrine is left to one's own will, there are still clumsy kids like Gamiravagand who have come this far.";
			next;
			mes "[Gomiagand]";
			mes "But it's not Gamiravagand's fault, it's because you haven't met me until now.";
			mes "You...yes. Have you heard of other Rgans from the past?";
			next;
			select( "I heard Bernagand's sermon" );
			mes "[Gomiagand]";
			mes "Bernagand!";
			mes "Ah... yes";
			mes "A hot-tempered and violent... a kid who pretends not to be, but shows his full temper.";
			next;
			mes "[Gomiagand]";
			mes "Maybe that's why Lasgand didn't bring him here.";
			mes "I'm thinking too fast";
			next;
			select( "Ask for details" );
			mes "[Gomiagand]";
			mes "It should have been...";
			next;
			mes "Gomiagand was lost in thought for a moment";
			npctalk "Gamira Bagand: ...", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "Gomiagand was lost in thought for a moment...";
			npctalk "Gamira Bagand: Cool...", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "Gamira Bagand is asleep against the wall.";
			npctalk "Gamira Bagand: It's so good.", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "That's it. Didn't you say you went out on a reconnaissance too?";
			mes "Before we even sent the kids on scout, quite a while ago...";
			next;
			mes "[Gomiagand]";
			mes "At that time, Lasgand was with Allegand, me, and Pamoshgand.";
			mes "...no, there may have been others";
			next;
			mes "[Gomiagand]";
			mes "It's been so long that even I can't remember.";
			mes "Anyway, by that time, Lasgand did everything himself~";
			mes "From hatchery maintenance to meticulous care.";
			next;
			mes "[Gomiagand]";
			mes "Encourage us, the world we were born in, in a dark cave, and tell us to be proud of it.";
			mes "Accepting all those teachings, we are proud to be members of the Order of Jormungand...";
			next;
			mes "[Gomiagand]";
			mes "After Lasgand has recovered the magic of the land, it's about time that the number of bishops has almost stopped increasing,";
			mes "Lasgand left us to manage the things he used to do himself.";
			mes "For example...";
			npctalk "Gamira Bagand: Mnya.", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Things like visiting the hatchery and educating priests.";
			mes "This is unimaginable now.";
			next;
			mes "[Gomiagand]";
			mes "After that, meeting Lasgand in person actually became a bit difficult.";
			mes "He said he'd never seen Gamiravagand before.";
			mes "So are you?";
			next;
			select( "yes", "yes" );	// note: the selection doesn't change the text
			mes "[Gomiagand]";
			mes "So, for the most part, priests were trained by the knowledge they brought and the education of the natives of Delphanagand.";
			mes "After that, only a fraction of the priests know the name of Suragigand, let alone Blatagand.";
			next;
			mes "[Gomiagand]";
			mes "Although we have magical abilities that humans do not possess...";
			mes "I didn't think of leaving a record.";
			mes "Especially because Lasgand remembers everything.";
			npctalk "Gamira Bagand: Cool... Cool...", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "I should have listened to Cinnamilgand...";
			npctalk "Gamira Bagand: Drurreong...", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "If so, there wouldn't have been kids like Bernagand who just wanted to give themselves up to violence.";
			mes "......";
			npctalk "Gamira Bagand: Yum Yum...", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Even now... isn't Lasgand allied with some humans?";
			mes "Will they help us?";
			mes "Isn't there actually some ulterior motive?";
			next;
			mes "[Gomiagand]";
			mes "...could you pretend you didn't hear the story I just heard, little boy?";
			next;
			mes "[Gomiagand]";
			mes "You made a mistake...";
			next;
			if (select( "I didn't hear anything", "I think so too" ) == 1) {
				mes "[Gomiagand]";
				mes "Okay, little kid.";
				mes "Come back to hear the story next time.";
				close;
			}
			mes "[Gomiagand]";
			mes "...";
			next;
			mes "Gomiagand fell silent and thought for a moment";
			mes "Then he sighed and continued.";
			next;
			mes "[Gomiagand]";
			mes "I can't figure out what Lasgand is thinking these days, even after following him this far.";
			next;
			mes "[Gomiagand]";
			mes "I've been with Lasgand for quite some time. Long before you were even born.";
			mes "I have seen with my own eyes how Sinamilgand and Suragigigand, who have not been recorded in the records, lost their lives and returned to being together with Lasgand.";
			next;
			mes "[Gomiagand]";
			mes "By the way, I asked if it was necessary to talk about such a story to relatively young people like Vernagandra.";
			next;
			mes "[Gomiagand]";
			mes "Allegand said there would be no change or progress for us anymore";
			mes "...I know what you mean";
			next;
			mes "[Gomiagand]";
			mes "We will not progress further as a species.";
			mes "Then what should I do?";
			mes "Should I just eat and sleep?";
			next;
			mes "[Gomiagand]";
			mes "Without knowing what Lasgand wants to do?";
			npctalk "Gamira Bagand: Mnya.", "ep20_jor_sanct_218_86", bc_self;
			next;
			if (select( "Stay still", "Tap Gamiravagand's shoulder" ) == 1) {
				mes "[Gomiagand]";
				mes "...";
				mes "You insignificant child, see you in a while.";
				mes "I forgot how far I went.";
				close;
			}
			mes "...";
			mes "The slumbering Gamira Bagand does not budge.";
			next;
			mes "[Gomiagand]";
			mes "......";
			npctalk "Gamira Bagand: Dororon Dororon.", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "It's Gamiravagand!";
			npctalk "Gamira Bagand: Surprise!", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "Let's talk a little more today!";
			npctalk "Gamira Bagand: I-can I listen alone?", "ep20_jor_sanct_218_86", bc_self;
			next;
			mes "[Gomiagand]";
			mes "He's heard enough now!";
			completequest 8841;
			if (isbegin_quest(17701) == 1) {
				erasequest 17701;
				setquest 8839;
			}
			if (isbegin_quest(8841) == 2 && isbegin_quest(8842) == 2 && isbegin_quest(8843) == 2 && isbegin_quest(8846) == 2 && isbegin_quest(8854) == 2) {
				ep20_main = 27;
				erasequest 8839;
				setquest 8840;
			}
			getexp2 68305979,0;
			getexp 0,11135835;
			next;
			mes "[Gomiagand]";
			mes "Haa... It would be nice if everyone was smart like you.";
			mes "Thank you for listening to the old story";
			close;
		}
		mes "Gomiagand is constantly teaching Gamiravagand...";
		close;
	}
	mes "Gomiagand is constantly teaching Gamiravagand...";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep20_main == 26 && isbegin_quest(8841) == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8841) == 1" );
	end;
}

// Pre-re quest 3
jor_sanct,190,128,5	script	Holesybigand#1	4_EP19_RGAN_SR2,{
	callfunc( "F_ep20_checkTransform" );
	if (checkweight(1201,1) == 0) {
		mes "- You cannot proceed with the quest because you have too many items. -";
		close;
	}
	if (ep20_main < 26) {
		mes "Now is not the time to be thinking about other things.";
		close;
	}
	if (ep20_main == 26) {
		switch( isbegin_quest(8842) ) {
		case 0:
			mes "[Holseybigand]";
			mes "What's wrong, little thing.";
			mes "This Holseybigand is in agony.";
			next;
			mes "[Holseybigand]";
			mes "Born in this vast world, in such a narrow cave...";
			next;
			mes "[Holseybigand]";
			mes "The rest of your life near eternity!";
			next;
			mes "[Holseybigand]";
			mes "What needs to be sent!";
			mes "That's the pain of our species!";
			next;
			mes "(What do you mean...?)";
			next;
			mes "[Holseybigand]";
			mes "But all this futile trouble is... right!";
			next;
			mes "[Holseybigand]";
			mes "The reality that Lasgand will solve the problem...";
			mes "You trifle, do you believe?";
			next;
			select( "Yes, yes? Me?", "I believe" );	// note: the selection doesn't change the text
			mes "[Holseybigand]";
			mes "Indeed.";
			mes "That's insignificant.";
			next;
			select( "You seem to be lacking in vocabulary" );
			mes "This Rgan seems to have a lot to say, but his vocabulary seems to be lacking in comparison.";
			unittalk getcharid(3), "" + strcharinfo(0) + " : ...", bc_self;
			next;
			mes "[Holseybigand]";
			mes "I!!";
			mes "As Lasgand's closest aide!";
			mes "I brought Lasgand to this dark cave!";
			next;
			mes "[Holseybigand]";
			mes "Actually, Lasgand is surrounded by humans, Pamoshgand, Gomiagand and the like...";
			next;
			mes "[Holseybigand]";
			mes "You're having trouble discussing affairs with this holshevigand and making plans to go subjugate humans...";
			mes "What!";
			next;
			mes "[Holseybigand]";
			mes "How can this not be unfair!";
			mes "Insignificant thing, don't you who don't know anything think so too?";
			next;
			if (select( "I don't know", "I guess" ) == 1) {
				mes "[" + strcharinfo(0) + "]";
				mes "I don't know...";
				next;
				mes "[Holseybigand]";
				mes "I guess...";
				next;
				mes "Holsey Bigand sulked and shut his mouth";
				close;
			}
			mes "I decided to give it a rough feel.";
			unittalk getcharid(3), "" + strcharinfo(0) + " : Did you have a hard time...?", bc_self;
			next;
			mes "[Holseybigand]";
			mes "Eh, annoying!";
			mes "I was glad that I had left idiots like Delpanagand and Allegand...";
			mes "I never thought Gomia Gand would follow me this far!";
			next;
			mes "[Holseybigand]";
			mes "If only this Wisdom's hidden powers were awakened, I would cut off all such shy things and become Lasgand's right arm, no, not only his right arm, but also his spear, shield, and axe";
			mes "He should have promised to advance with overwhelming force... but it's still too early!";
			next;
			mes "[Holseybigand]";
			mes "The day was not far off when I would reach out to Lasgand and lead him to the promised victory!";
			mes "Indignant!";
			mes "Just a little more... if only I had a little more time!";
			next;
			mes "[Holseybigand]";
			mes "Hey!";
			mes "I don't know because you're not superlative!";
			next;
			if (select( "Pretend to be curious", "Say not to know" ) == 2) {
				mes "[" + strcharinfo(0) + "]";
				mes "I don't know";
				next;
				mes "[Holseybigand]";
				mes "I guess...";
				next;
				mes "Holsey Bigand sulked and shut his mouth";
				close;
			}
			mes "I decided to be a bit elaborate and pretend I was really curious.";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "What?";
			next;
			mes "[Holseybigand]";
			mes "Probably no one ever explained that to something as insignificant as you. Well, of course I don't know.";
			mes "The feeling of omnipotence when shedding!";
			mes "The feeling of stepping into this world as a new person!";
			mes "You don't know... you don't have feet!";
			next;
			mes "This bravado is different.";
			unittalk getcharid(3), "" + strcharinfo(0) + " : wow...!", bc_self;
			next;
			mes "[Holseybigand]";
			mes "Looking back and thinking of my stronger self as if I was nothing up until now.";
			mes "My strength... is for Lasgand!";
			unittalk getcharid(3), "" + strcharinfo(0) + " : even, even.", bc_self;
			next;
			mes "[Holseybigand]";
			mes "Are you aware?";
			mes "My... Loyalty of this holshevigand!";
			next;
			mes "[Holseybigand]";
			mes "I'm glad...";
			next;
			mes "Holseybygand suddenly began to weep.";
			mes "You seem very emotional.";
			next;
			mes "[Holseybigand]";
			mes "You know... It's a trivial thing...";
			next;
			mes "[Holseybigand]";
			mes "Actually... I'm familiar with Lasgand's hobbies and skills.";
			mes "Of course you know your likes and dislikes.";
			mes "Are you curious?";
			next;
			select( "Yes" );
			mes "[Holseybigand]";
			mes "Whoops... I knew that.";
			mes "But I can't tell anyone about that";
			mes "How much trouble did you go through to ask such things...!";
			next;
			mes "Fortunately, these were legitimate findings.";
			next;
			select( "Teach me" );
			mes "[Holseybigand]";
			mes "I'll teach you a special lesson for recognizing my loyalty.";
			mes "Lasgand actually...";
			next;
			mes "I've heard some very surprising things.";
			mes "But stories like Lasgand eating too are completely useless";
			next;
			mes "[Holseybigand]";
			mes "Huh... how about it, trivial thing.";
			mes "After knowing these amazing facts, don't you see Lord Lasgand again?";
			next;
			mes "[Holseybigand]";
			mes "For reference, I'm collecting " + mesitemlink(1001246) + ".";
			mes "And it will be your job to get it.";
			next;
			mes "[Holseybigand]";
			mes "If you bring me about 30, I'll tell you more secrets.";
			mes "How about that, Lasgand's secret side...!";
			next;
			mes "More surprising facts?";
			setquest 8842;
			close;
		case 1:
			if (countitem(1001246) < 30) {
				mes "[Holseybigand]";
				mes "An insignificant thing has returned to test my loyalty.";
				mes "I won't tell you any more secrets if you don't have 30 " + mesitemlink(1001246) + " from Koppo.";
				mes "If you catch the annoying Icewind, you can pick it up.";
				mes "Stop going back.";
				close;
			}
			mes "[Holseybigand]";
			mes "No, isn't that the little thing that showed up last time to test my loyalty?";
			mes "Of course, this me, Holshbigand, is Lasgand's right-hand man.";
			next;
			select( "That's right horseshoe show" );
			mes "[" + strcharinfo(0) + "]";
			mes "Sure, sure";
			next;
			mes "[Holseybigand]";
			mes "Then let me tell you who brought me the bigger truth.";
			mes "Lasgand sleeps 4 hours a day.";
			mes "Huh... I really admire you.";
			delitem 1001246,30;
			completequest 8842;
			if (isbegin_quest(17701) == 1) {
				erasequest 17701;
				setquest 8839;
			}
			if (isbegin_quest(8841) == 2 && isbegin_quest(8842) == 2 && isbegin_quest(8843) == 2 && isbegin_quest(8846) == 2 && isbegin_quest(8854) == 2) {
				ep20_main = 27;
				erasequest 8839;
				setquest 8840;
			}
			getexp2 68305979,0;
			getexp 0,11135835;
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Yes?";
			next;
			mes "[Holseybigand]";
			mes "Are you too surprised to say anything?";
			mes "That's right, I was like that at first too.";
			mes "But that's possible because it's Lord Lasgand.";
			mes "You can't even imitate beings like us";
			next;
			mes "[Holseybigand]";
			mes "No matter how much you respect him, don't try too hard to imitate him. It's insignificant.";
			if (isbegin_quest(8840) == 1) {
				next;
				mes "[Holseybigand]";
				mes "Come to think of it, Sarekgandh is looking for you.";
				mes "You know who's Sarekgandh? It's a bit less than me, but it's somewhat usable anyway.";
				mes "It has been asking a lot about you, and I told it that you're very smart.";
				next;
				mes "[Holseybigand]";
				mes "Then go see it, little thing.";
				close;
			}
			close;
		case 2:
			break;
		}
	}
	mes "[Holseybigand]";
	mes "Hush.";
	mes "Insignificant thing, don't come near now";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep20_main == 26 && isbegin_quest(8842) == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8842) == 1 && countitem(1001246) >= 30" );
	end;
}

// Pre-re quest 4
// (part of a daily quest)
// jor_sanct,271,156,3	script	Nasiorami Gand#1	EP19_RGAN_D,{

// Pre-re quest 5
jor_sanct,101,138,5	script	Eriligand#1	4_EP19_RGAN_SR3,{
	callfunc( "F_ep20_checkTransform" );
	if (checkweight(1201,1) == 0) {
		mes "- You cannot proceed with the quest because you have too many items. -";
		close;
	}
	if (ep20_main < 26) {
		mes "Now is not the time to be thinking about other things.";
		close;
	}
	if (ep20_main == 26) {
		switch( isbegin_quest(8854) ) {
		case 0:
			mes "[Eriligand]";
			mes "Huh? What's up?";
			next;
			select("Do you have any inconveniences?" );
			mes "[Eriligand]";
			mes "Huh?";
			mes "Oh, this is the first child I've seen.";
			next;
			mes "[Eriligand]";
			mes "How did you get here?";
			mes "It seems unlikely that Lasgand brought them here...";
			mes "Are you brought to work?";
			next;
			select( "What's up" );
			mes "[Eriligand]";
			mes "Honest AhThat's it.";
			mes "Um...";
			mes "Ugh";
			next;
			mes "[Eriligand]";
			mes "Poor Sarekgandh...";
			emotion ET_CRY;
			next;
			mes "The superlative Rgan in front of me suddenly burst into tears and started crying.";
			next;
			mes "[Eriligand]";
			mes "Do you... know why we're here?";
			next;
			mes "[Eriligand]";
			mes "Perhaps both Sarekgand and Halshbigand, everyone would think that Lasgand brought him because he liked him...";
			next;
			mes "[Eriligand]";
			mes "The truth is... we are all Lasgand's lunch boxes.";
			mes "Surely, Lasgand brought us here to eat us... in case we're in a hurry!";
			next;
			mes "[Eriligand]";
			mes "how much...";
			next;
			mes "[Eriligand]";
			mes "How... cool!";
			setquest 8854;
			close;
		case 1:
			mes "[Eriligand]";
			mes "What an honor!";
			next;
			mes "Eriligand stopped crying at some point and was looking this way with a bright expression.";
			next;
			mes "Until now, no Rgan has ever had a look like this";
			mes "Not a lot of people would look at the other person with such clear eyes.";
			next;
			mes "[Eriligand]";
			mes "We... Rgan.";
			mes "I know you've studied catechesis, but... they're all sons of Lasgand.";
			next;
			switch( select( "No", "That's a leap", "Yes" ) ) {
			case 1:
				mes "[Eriligand]";
				mes "Listen to me before you think so";
				close;
			case 2:
				mes "[Eriligand]";
				mes "It's just that we don't reproduce. If we shed blood, what would come out of it if not offspring?";
				break;
			case 3:
				mes "[Eriligand]";
				mes "Whoever taught you is clever.";
				break;
			}
			next;
			mes "[Eriligand]";
			mes "If all of us are Lasgand's children, then we all belonged to Lasgand.";
			mes "Maybe it's time to give it back?";
			next;
			mes "[Eriligand]";
			mes "Why do we have intelligence?";
			mes "Isn't it all... in order to produce magic to dedicate to Lord Lasgand?";
			next;
			mes "[Eriligand]";
			mes "What do you think?";
			next;
			mes "With clear eyes shining brightly, Rgan asks.";
			next;
			switch( select( "I don't think so", "I'm not sure what you mean", "That's right" ) ) {	// note: the order of the answers may be wrong
			case 1:
				mes "[Eriligand]";
				mes "Can't remember what your job is?";
				mes "Listen to me again.";
				close;
			case 2:
				mes "[Eriligand]";
				mes "Oops...";
				mes "Think about why no one will say anything when you eat low-ranking Rgans.";
				mes "Is it because they're weak?";
				break;
			case 3:
				mes "[Eriligand]";
				mes "You know...?";
				mes "Well... don't you run away after knowing...?";
				mes "Magical power to be dedicated to Lasgand is not the same as picking up a magical core.";
				next;
				mes "[Eriligand]";
				mes "Think about why no one will say anything when you eat low-ranking Rgans.";
				mes "Is it because they're weak?";
				break;
			}
			next;
			mes "[Eriligand]";
			mes "If you're weak enough to eat me...";
			mes "Do you mind if I eat you now?";
			next;
			mes "[Eriligand]";
			mes "But then the horsepower efficiency isn't good.";
			mes "You can work, but you don't have to";
			next;
			mes "Eriligand smiled brightly.";
			mes "Unlike humans, it's a strangely perfect smile.";
			next;
			mes "[Eriligand]";
			mes "Why would Rgan the Highest... study and teach catechesis instead of working?";
			mes "Have you ever thought of that?";
			next;
			mes "[Eriligand]";
			mes "I didn't do any work, I was willing to preach the Dharma, and I accumulated my mana...";
			mes "As Lasgand's property, it has the best use value when it is most efficient.";
			mes "Like the magic core you take with you when you go far.";
			next;
			mes "[Eriligand]";
			mes "The best... bento box.";
			next;
			mes "[Eriligand]";
			mes "...whoop whoop... ahahaha.";
			next;
			mes "[Eriligand]";
			mes "What do you think?";
			mes "About this glorious truth.";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Really?";
			next;
			mes "[Eriligand]";
			mes "Then would I lie?";
			mes "But nobody believed me";
			next;
			mes "[Eriligand]";
			mes "You think I'm lying too?";
			next;
			mes "Lasgand's plot seems to be true, but Eriligand seems to be out of the ordinary.";
			next;
			select( "I'm not sure", "What about the others..." );	// note: the selection doesn't change the text
			mes "[Eriligand]";
			mes "You too? Don't you believe me?";
			next;
			mes "[Eriligand]";
			mes "Don't you trust me, the one closest to Lasgand?";
			mes "You look just like Halseybegand!";
			next;
			mes "[Eriligand]";
			mes "Something like you,";
			mes "I'll eat you up!";
			next;
			mes "Eririgand suddenly jumped in and bit the back of his hand!";
			unittalk getcharid(3), "" + strcharinfo(0) + " : Ouch!!", bc_self;
			next;
			mes "[Eriligand]";
			mes "...";
			next;
			mes "[Eriligand]";
			mes "You didn't bleed?";
			mes "I'm sorry";
			next;
			mes "[Eriligand]";
			mes "Ahahaha...";
			mes "Why doesn't anyone believe me?";
			next;
			mes "Eriligand is already watching nothing.";
			mes "I'm just laughing";
			completequest 8854;
			if (isbegin_quest(17701) == 1) {
				erasequest 17701;
				setquest 8839;
			}
			getexp2 68305979,0;
			getexp 0,11135835;

			if (isbegin_quest(8841) == 2 && isbegin_quest(8842) == 2 && isbegin_quest(8843) == 2 && isbegin_quest(8846) == 2 && isbegin_quest(8854) == 2) {
				ep20_main = 27;
				erasequest 8839;
				setquest 8840;
				next;
				mes "I need to go back to Sarekgandh.";
				close;
			}
			mes "I tried to talk to her again, but Eriligand just smiled with tears running down her face and didn't answer.";
			close;
		case 2:
			mes "I tried to talk to her again, but Eriligand just smiled with tears running down her face and didn't answer.";
			close;
		}
		end;
	}
	mes "I tried to talk to her again, but Eriligand just smiled with tears running down her face and didn't answer.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep20_main == 26 && isbegin_quest(8854) == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8854) == 1" );
	end;
}


// Main quest - Step 28
jor_sanct,157,171,3	script	Sarekgand#20ms20	4_EP19_RGAN_SR2,{
	callfunc( "F_ep20_checkTransform" );
	if (ep20_main == 27) {
		mes "[Sarekgand]";
		mes "......";
		next;
		select( "Bishop?" );
		mes "[Sarekgand]";
		mes "Once you come, you should start by saying hello. What are you staring at?";
		npctalk "You're rude.", "", bc_self;
		emotion ET_FRET;
		next;
		select( "Oh, how are you?" );
		mes "[Sarekgand]";
		mes "Hello.";
		mes "Aren't you the priest brought by Nadjagand?";
		next;
		mes "[Sarekgand]";
		mes "Yes. I have a face in my memory. It looks familiar.";
		next;
		emotion ET_THINK, playerattached();
		mes "[Sarekgand]";
		mes "I've noticed you've been helping several bishops. You've done a great job.";
		mes "You've been on recon missions for a very long time?";
		next;
		select( "Yes, it is" );
		mes "[Sarekhgandh]";
		mes "In a time like this, a priest whose identity is guaranteed is very rare.";
		mes "Bishops used to manipulate people with their fingertips, so when they made them work, they were all very strict...";
		next;
		mes "[Sarekhgandh]";
		mes "So I'm going to entrust you, the priest, with a particularly honorable task.";
		next;
		select( "Glory?" );
		mes "[Sarekhgandh]";
		mes "Yes. There will be a hidden <NAVI>[Way]<INFO>jor_sanct,22,283,0,101,0</INFO></NAVI> back here.";
		next;
		mes "[Sarekhgandh]";
		mes "There is a door in front of it. Follow it quietly, out of sight of others.";
		ep20_main = 28;
		erasequest 8840;
		setquest 17702;
		close;
	}
	if (ep20_main == 28) {
		mes "[Sarekhgandh]";
		mes "Didn't I tell you to follow me! I can't even do that properly!";
		mes "Come near the <NAVI>[door]<INFO>jor_sanct,22,283,0,101,0</INFO></NAVI>. Follow me!";
		close;
	}
	mes "[Sarekhgandh]";
	mes "I have a bad feeling, but I also have a good feeling...";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8840) == 1" );
	end;
}


// Main quest - Step 29, 30
jor_sanct,26,282,3	duplicate(dummy_cloaked_npc)	Lehar#20ms30::ep20_jor_sanct_26_282	4_EP19_RGAN_R3
jor_sanct,25,280,1	duplicate(dummy_cloaked_npc)	Miriam#20ms30::ep20_jor_sanct_25_280	4_EP19_RGAN_R2
jor_sanct,26,283,3	duplicate(dummy_cloaked_npc)	Sarekgandh#20ms31::ep20_jor_sanct_26_283	4_EP19_RGAN_SR2

// (part of the daily quest 17710: "Clearing the snake's maze")
// jor_sanct,22,283,5	script	Supervisor#20ms30	4_EP19_RGAN_SR1,5,5,{


// Main quest - Step 31
jor_maze,15,47,0	script	#20ms40	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep20_main == 30) {
		unittalk getcharid(3), "" + strcharinfo(0) + " : This is where the trail continues. Let's go in.", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		warp "jor_safty2",194,33;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17704) == 1" );
	end;
}

jor_safty2,196,40,7	script	Rgan#20ms41::ep20_jor_safty2_196_40	4_EP19_RGAN_SR1,{
	npctalk "Whew - I miss the old days...", "", bc_self;
	end;
}

jor_safty2,193,42,7	script	Rgan#20ms40::ep20_jor_safty2_193_42	4_EP19_RGAN_SR3,{
	npctalk "It's not easy today, it's easy.", "", bc_self;
	end;
}

jor_safty2,189,36,7	duplicate(dummy_npc)	Lehar#20ms40::ep20_jor_safty2_189_36	4_EP19_RGAN_R3
jor_safty2,196,44,3	duplicate(dummy_npc)	Jormungand Guardian#ms40::ep20_jor_safty2_196_44	EP20_JORMUNGUARD1

jor_safty2,190,38,7	script	Miriam#20ms40	4_EP19_RGAN_R2,{
	if (ep20_main == 30) {
		mes "[Miriam]";
		mes"Is this here? I thought I'd be able to find the traces soon, but it's not easy.";
		next;
		mes "[Lehar]";
		mes "Is this the workhouse the supervisor said?";
		npctalk "Hold on there!!", "ep20_jor_safty2_193_42", bc_self;
		next;
		select( "I think you're right" );
		mes "[Miriam]";
		mes "He said he was cleaning... he's holding something?";
		next;
		mes "[Lehar]";
		mes "Ah~ You're calling it cleaning because you have to get rid of it, right?";
		next;
		select( "Yes, that's right" );
		mes "[Miriam]";
		mes "But what is that?";
		npctalk "Turn it off--", "ep20_jor_safty2_196_44", bc_self;
		npctalk "Almost done!!", "ep20_jor_safty2_196_40", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "It's called the Jormungand Guardian. I'm not sure of the exact etymology or subject of the name, but it's been called that way for a long time...";
		npctalk "Aww!!", "ep20_jor_safty2_193_42", bc_self;
		npctalk "Are you okay??", "ep20_jor_safty2_196_40", bc_self;
		next;
		mes "[Lehar]";
		mes "Those... It seems that anyone who sets foot here will always attack?";
		npctalk "Rgan is under attack", "ep20_jor_safty2_189_36", bc_self;
		next;
		mes "[Miriam]";
		mes "That's fortunate. Those strong individuals aren't on the side of the Rgans.";
		next;
		mes "[Lehar]";
		mes "From what I've heard before, it seems that Lasgand comes and goes here periodically.";
		npctalk "Why is he so ferocious?", "ep20_jor_safty2_193_42", bc_self;
		next;
		select( "I think so" );
		mes "[Miriam]";
		mes "If Lasgand moves... there must be a bar that hasn't been seen in the sanctuary.";
		next;
		mes "[Lehar]";
		mes "What does it do by going back and forth periodically?";
		npctalk "I wish I had one more...", "ep20_jor_safty2_196_40", bc_self;
		next;
		mes "[Miriam]";
		mes "Probably ^0000cdJormungandr's guardians guard this place and Lasgand's reason for coming and going here is the same^000000.";
		next;
		mes "[Miriam]";
		mes "...I'll stay here and take a look. Maybe I'll listen to the superlatives.";
		next;
		mes "[Lehar]";
		mes "Ah, better spread out and get some information. Then we'll track down Lasgand's right hand!";
		ep20_main = 31;
		erasequest 17704;
		setquest 17705;
		close2;
		cloakonnpcself( "ep20_jor_safty2_189_36" );
		end;
	}
	mes "[Miriam]";
	mes "I think I can get some useful information here too. I'll also look into the Jormungand Guardian.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17704) == 1" );
	end;
}


// Main quest - Step 32
jor_maze,17,153,0	script	#20ms42	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep20_main == 31) {
		unittalk getcharid(3), "" + strcharinfo(0) + " : This is where the trail continues. Let's go in.", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		warp "jor_safty2",316,36;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17705) == 1" );
	end;
}

jor_safty2,305,44,5	script(CLOAKED)	Rgan#20ms42::ep20_jor_safty2_305_44	4_EP19_RGAN_SR1,{
	npctalk "You can't move blindly, okay?", "", bc_self;
	end;
}

jor_safty2,303,41,5	script(CLOAKED)	Rgan#20ms43::ep20_jor_safty2_303_41	4_EP19_RGAN_SR3,{
	npctalk "When those parasites move, you can feel their unique pulse, so keep that in mind.", "", bc_self;
	end;
}

jor_safty2,310,43,3	script	Lehar#20ms41	4_EP19_RGAN_R3,{
	if (ep20_main == 31) {
		mes "[Lehar]";
		mes "The traces are sparsely connected. It was cut off here. Where should I go now?";
		next;
		select( "This looks like a maze." );
		mes "[Lehar]";
		mes "Ah! That's right! It must be so!";
		mes "We must be lost!";
		npctalk "I'm not good at finding directions...", "ep20_jor_safty2_310_43", bc_self;
		next;
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_305_44";
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_303_41";
		cloakoffnpcself( "ep20_jor_safty2_305_44" );
		cloakoffnpcself( "ep20_jor_safty2_303_41" );
		mes "[Bishop Rgan]";
		mes "Who are they?";
		next;
		mes "[Lehar]";
		mes "Uh... Hello. We're new! We're here to clean up!";
		next;
		mes "[Bishop Rgan]";
		mes "Suddenly a rookie? A priest and not a bishop? Why?";
		next;
		mes "[Lehar]";
		mes "We're back after a long scouting, so it's no wonder we don't know. Lord Nadyagand vouched for us.";
		mes "Sarekhand sent me here.";
		npctalk "Lasgand's right hand.", "ep20_jor_safty2_310_43", bc_self;
		next;
		mes "[Bishop Rgan]";
		mes "Oh yeah? You're here to clean up? That's just fine.";
		mes "By the way, we don't need both. You there, follow only you.";
		npctalk "Me?", "ep20_jor_safty2_310_43", bc_self;
		next;
		select( "I'll do it too" );
		mes "[Bishop Rgan]";
		mes "What? You look elsewhere.";
		mes "I said you don't need two. Find another place. Do I have to tell you all about that?";
		next;
		select( "The way Lasgand is coming..." );
		mes "[Bishop Rgan]";
		mes "You want to focus on cleaning the road where Lasgand is coming?";
		mes "If that's the case, go outside and take the upper road. Even then, the parasites over there are a bit more extreme, so you'll need a lot of help.";
		next;
		select( "Thank you" );
		mes "[Lehar]";
		mes "<FONT SIZE = 10>This is what happened. I'll finish cleaning up and follow you.</FONT>";
		mes "<FONT SIZE = 10>Then see you later, adventurer.</FONT>";
		ep20_main = 32;
		erasequest 17705;
		setquest 17706;
		close;
	}
	mes "[Lehar]";
	mes "I'll finish cleaning quickly and follow you.";
	mes "Be careful, adventurer.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17705) == 1" );
	end;
}


// Main quest - Step 33, 34 (instance DriftIceZone)
// jor_maze,140,72,3	script	Shaky Wall#20ms40::ep20_jor_maze_140_72	GATE_SKYBLUE,{


// Main quest - Step 35
jor_back1,365,226,0	script	#20ms50	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 34) {
		cloakoffnpcself( "ep20_jor_back1_365_226" );
		npctalk "Adventurer!!!", "ep20_jor_back1_365_226", bc_self;
		end;
	}
	end;
}

jor_back1,365,226,3	script(CLOAKED)	Lehar#20ms50::ep20_jor_back1_365_226	4_EP19_LEHAR,{
	if (checkweight(1001217,20) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main == 34) {
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Thank God, you're all right. I just fell off too.";
		mes "By the way, where is this...";
		next;
		select( "It looks like the frozen scale hill." );
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "That's right! That cat must be helping us.";
		next;
		select( "Let's go back to the ice castle." );
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Okay. I'll wait for you.";
		ep20_main = 35;
		erasequest 17708;
		setquest 17709;
		getitem 1001217,20;	// Ep20_Cat_Whiskers
		getexp2 204917939,0;
		getexp 0,33407506;
		add_reputation_points( REPU_EP20, 90 );
		close2;
		cutin "",255;
		cloakonnpcself();
		navigateto("icas_in",226,255);
		end;
	}
	end;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17708) == 1" );
	end;
}


// Main quest - Step 36
icas_in,239,252,3	duplicate(dummy_cloaked_npc)	Voglinde#e20pn01::ep20_icas_in_239_252	4_EP19_VOGLINDE
icas_in,237,254,5	duplicate(dummy_cloaked_npc)	Vellgunde#e20pn01::ep20_icas_in_237_254	4_EP19_VELLGUNDE

icas_in,226,257,0	script	#hw_ep20_pn01	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep20_main == 35 || ep20_main == 36) {
		cloakoffnpcself( "ep20_icas_in_226_255" );
		cloakoffnpcself( "ep20_icas_in_233_252" );
		cloakoffnpcself( "ep20_icas_in_237_252" );
		cloakoffnpcself( "ep20_icas_in_231_250" );
		cloakoffnpcself( "ep20_icas_in_230_253" );
		cloakoffnpcself( "ep20_icas_in_234_249" );
		cloakoffnpcself( "ep20_icas_in_238_248" );
		cloakoffnpcself( "ep20_icas_in_239_252" );
		cloakoffnpcself( "ep20_icas_in_237_254" );
		end;
	}
	end;
}

icas_in,238,248,3	script(CLOAKED)	Lazy#e20pn01::ep20_icas_in_238_248	4_EP19_LAZY,{
	if (ep20_main == 35) {
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Anyway, they're both kids at the water's edge. I can't take my eyes off them!";
		close3;
	}
	cutin "ep19_leizi02.png",2;
	mes "[Lazy]";
	mes "You made me worry so much and now the car overturns? Can you sit comfortably? Don't you feel like you're sitting on a cushion of thorns because you can feel my heart?";
	next;
	cutin "",255;
	mes "[" + strcharinfo(0) + "]";
	mes "Did you worry about me that much?";
	next;
	cutin "ep19_leizi03.png",2;
	mes "[Lazy]";
	mes "Of course! If there are no adventurers, what will be the plans for the future, who will do the hard work, then my report...";
	unittalk getcharid(3), "" + strcharinfo(0) + " : You're just worried about myself!", bc_self;
	next;
	cutin "ep19_leizi01.png",2;
	mes "[Lazy]";
	mes "Haha, did I get caught?";
	close3;
}

icas_in,234,249,7	script(CLOAKED)	Miriam#e20pn01::ep20_icas_in_234_249	4_EP18_MIRIAM,{
	if (ep20_main == 35) {
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "I should have looked around the maze one more time at the end...!";
		close3;
	}
	cutin "ep18_miriam_03.png",2;
	mes "[Miriam]";
	mes "I'm glad you came back safely. You've done so much for Rachel, how could you atone for something wrong here...";
	close3;
}

icas_in,231,250,7	script(CLOAKED)	Maram#e20pn01::ep20_icas_in_231_250	4_EP18_MARAM,{
	if (ep20_main == 35) {
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "What if the rescue team goes wrong inside again...";
		close3;
	}
	cutin "ep18_maram_01.png",2;
	mes "[Maram]";
	mes "I'm glad you came back safely. Miriam was very worried.";
	close3;
}

icas_in,230,253,7	script(CLOAKED)	Horr#e20pn01::ep20_icas_in_230_253	4_EP19_IWIN,{
	cutin "ep19_iwin06.png",2;
	mes "[Horr]";
	mes "Horrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr";
	close3;
}

icas_in,237,252,5	script(CLOAKED)	Aurelie#e20pn01::ep20_icas_in_237_252	4_EP19_AURELIE,{
	if (ep20_main == 35) {
		cutin "ep19_aurelie03.png",2;
		mes "[Aurelie]";
		mes "They're both strong... but I'm still worried.";
		close3;
	}
	cutin "ep19_aurelie01.png",2;
	mes "[Aurelie]";
	mes "Even if you got out safely, you'd be surprised without realizing it, so it's better not to overdo it. When you're ready, just say something to Leon.";
	close3;
}

icas_in,226,255,3	script(CLOAKED)	Lehar#e20pn01::ep20_icas_in_226_255	4_EP19_LEHAR,{
	if (ep20_main == 35) {
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Ah, " + strcharinfo(0) + "! Wait a minute, wait a minute!";
		next;
		select( "What are you doing?" );
		cutin "ep19_lehar06.png",2;
		mes "[Lehar]";
		mes "That's... I was a bit embarrassed to interrupt the atmosphere, so I was aiming for the right moment. Listen...";
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "So, none of us brought the adventurer and Lehar?";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "I'm back with the hostages, so it's been a while since I last saw them. Maybe something happened...";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "I'm worried. Shouldn't we send a rescue team right now? Maybe it's just being delayed, but I'm worried because I'm behind enemy lines.";
		next;
		cutin "ep19_voglinde01.png",2;
		mes "[Voglinde]";
		mes "Anyway, Lehar got caught up in things like this from a young age and worried the adults. I thought he was all grown up, but he's still the same. He was in the past...";
		next;
		cutin "ep19_lehar06.png",2;
		mes "[Lehar]";
		mes "Ouch!!!!!!!!!!";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "No, who is this? Not Lehar and the adventurer! Do you know how worried I was when you suddenly disappeared? My heart is as fragile as a young Iwin's downy, so I'm startled right away.";
		mes "Will you be relieved if I do a broadcast to find the missing child in the maze?";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Did that person come back and drink tea?", bc_self;
		next;
		cutin "ep19_voglinde01.png",2;
		mes "[Voglinde]";
		mes "I understand your concern, but don't blame me too much for coming back safely. Where did you come back unscathed?";
		npctalk "Lehar: Worried...?", "ep20_icas_in_226_255", bc_self;
		next;
		cutin "ep19_leon03.png",2;
		mes "[Leon]";
		mes "I'm glad you came back safely. Let's warm your hands first with warm tea. I'm a little sorry to ask people who have suffered such a thing, but has everything been okay? Everyone was worried because you were late.";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Actually, I was attacked by Lasgand. But...";
		npctalk "Miriam: Huh?!", "ep20_icas_in_234_249", bc_self;
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "You were attacked by Lasgand? You shouldn't have returned first! Are you okay? Are you hurt?";
		next;
		cutin "ep19_vellgunde01.png",2;
		mes "[Vellgunde]";
		mes "Calm down, Miriam. You know it's not your fault. It can happen all the time. Let's listen to Lehar for now.";
		npctalk "Miriam: But...", "ep20_icas_in_234_249", bc_self;
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Oh, if that's the case, don't worry. Fortunately, a White Cat came and saved us.";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Yes? A cat?";
		next;
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "I was helped by that cat last time, but no matter how much I think about it, I don't think it's an ordinary cat. Its waist is extremely long. About two~?";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "Ah, no way! He's good at joking. Aren't you exaggerating? Where is a cat with a waist as tall as a man? You didn't misread it because it was so urgent?";
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "Are you saying that a White Cat saved you two? I've heard rumors that a witch lives in the north, but I've never heard of such a story. Are there any legends from Isgard?";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "No! I assure you, we are the only ones in Isgard who have such fine white fur.";
		next;
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "There's even an ancient icewind, but what... and feathers anyway?";
		next;
		cutin "ep19_iwin06.png",2;
		mes "[Horr]";
		mes "Hmph! Don't compare sapient creatures like us with those birds that only have an attacking nature!";
		next;
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "Come on, don't fight. Isgard is surrounded by barriers, so it's impossible for new species to appear.";
		mes "So that means it's always been here...";
		npctalk "Lehar: You mean?", "ep20_icas_in_226_255", bc_self;
		next;
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "It's still just speculation, but I'm guessing it's identity somehow. If you've been helped twice...";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "The power that saved the two of you is definitely not an ordinary power. Aurelie, I think...";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Oh, of course it was strong and amazing... Is it something that both of you are worried about?";
		next;
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "That cat might be Jormungandr";
		npctalk "Lehar: Jormungand?!", "ep20_icas_in_226_255", bc_self;
		next;
		select( "Jormungand?" );
		mes "[Aurelie]";
		mes "It's still only a possibility, but if there was a being with that kind of power in Isgard, you'd have noticed it long ago. It's not a creature that was originally observed in Isgard, so let's have an open view of the possibility.";
		next;
		mes "[Aurelie]";
		mes "Jormungandr was resting to conserve strength... If it coincided with Jormungandr recovering to some extent, he might have been helped.";
		next;
		mes "[Aurelie]";
		mes "Besides, didn't the Iwins often tell you that they saw the cat's footprints?. Deep down, I expected that the cat might be Jormungandr.";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Aurelie is right. I'm sorry to say this to anyone who's just been attacked, but if you don't mind, I'd like to go back to the place where you met the White Cat.";
		next;
		mes "[Leon]";
		mes "So... when you calm down a bit and the fatigue goes away.";
		next;
		if (select( "It's okay, let's go now.", "Let's rest for a while." ) == 1) {
			mes "[Leon]";
			mes "There's a competent <NAVI>[Iwin]<INFO>icecastle,141,212,0,101,0</INFO></NAVI> outside the ice castle, so you should be able to get some help.";
			ep20_main = 37;
			completequest 17709;
			setquest 23100;
			close3;
		}
		mes "[Leon]";
		mes "Okay, then we'll set off together as soon as we're ready. Please let us know after you've had enough rest.";
		ep20_main = 36;
		completequest 17709;
		close3;
	}
	if (ep20_main == 36) {
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Have you had enough rest? Leon is waiting for you.";
		mes "Oh, I'm not asking you to hurry up!";
		close3;
	}
	if (ep20_main == 37) {
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "I can't believe it was Jormungandr that we met then. Is this God's will?";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_NONE, "isbegin_quest(17709) == 1" );
	end;
}


// Main quest - Step 37
icas_in,233,252,5	script(CLOAKED)	Leon#e20pn01::ep20_icas_in_233_252	4_EP19_LEON,{
	if (ep20_main == 35) {
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "Should we organize a rescue team now...";
		close3;
	}
	if (ep20_main == 36) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Are you tired? Oh, did I hear you're busy? I'm just asking. There's no need to rush.";
		next;
		if (select( "Let's go now", "I'll rest a little longer" ) == 2) {
			mes "[Leon]";
			mes "Would you mind not seeing a therapist? You don't have to push yourself.";
			close3;
		}
		mes "[Leon]";
		mes "Okay. We're about to get ready too. Let's start right away. Talk to <NAVI>[Dive Iwin]<INFO>icecastle,141,212,0,101,0</INFO></NAVI> in ice castles, he will be able to help.";
		next;
		mes "[Leon]";
		mes "If anything happens, don't worry, we're with you this time.";
		ep20_main = 37;
		setquest 23100;
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_NONE, "isbegin_quest(17709) == 2 && ep20_main == 36" );
	end;
}


// Main quest - Step 38, 39, 40
icecastle,146,206,0	script	#hw_ep20_pn02	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep20_main == 37 || ep20_main == 38 || ep20_main == 39) {
		cloakoffnpcself( "ep20_icecastle_143_210" );
		cloakoffnpcself( "ep20_icecastle_148_210" );
		cloakoffnpcself( "ep20_icecastle_145_212" );
		cloakoffnpcself( "ep20_icecastle_144_207" );
		cloakoffnpcself( "ep20_icecastle_141_206" );
		cloakoffnpcself( "ep20_icecastle_143_203" );
		end;
	}
	end;
}

icecastle,143,210,5	script(CLOAKED)	Lehar#e20pn02::ep20_icecastle_143_210	4_EP19_LEHAR,{
	if (ep20_main == 37) {
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "Wow, it's the first time I've ever ridden on a diving arwin!";
		next;
		mes "[Lehar]";
		mes "Must be fun, wouldn't it?";
		close3;
	}
	if (ep20_main == 38) {
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Aww, that was hard...";
		mes "But they said that happiness comes after hard work!";
		close3;
	}
	if (ep20_main == 39) {
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes ".....";
		mes "I was fooled in a good way...";
		close3;
	}
	end;
}

icecastle,148,210,5	script(CLOAKED)	Leon#e20pn02::ep20_icecastle_148_210	4_EP19_LEON,{
	if (ep20_main == 37) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "I'm going to ask the diver Iwin to take me to the drift ice zone. He's a good friend for sure.";
		close3;
	}
	if (ep20_main == 38) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "This must be the first time I've ridden so many people with a kolo. You should understand.";
		close3;
	}
	if (ep20_main == 39) {
		cutin "ep19_leon03.png",2;
		mes "[Leon]";
		mes "(He puts on an embarrassing smile.)";
		close3;
	}
	end;
}

icecastle,145,212,5	script(CLOAKED)	Aurelie#e20pn02::ep20_icecastle_145_212	4_EP19_AURELIE,{
	if (ep20_main == 37) {
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "Things that cannot be solved with magic can be easily solved by borrowing the power of others.";
		close3;
	}
	if (ep20_main == 38) {
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "...This is a simple solution.";
		close3;
	}
	if (ep20_main == 39) {
		cutin "ep19_aurelie03.png",2;
		mes "[Aurelie]";
		mes "..........";
		next;
		mes "[Aurelie]";
		mes "Those who regret it should follow...";
		close3;
	}
	end;
}

icecastle,144,207,5	script(CLOAKED)	Maram#e20pn02::ep20_icecastle_144_207	4_EP18_MARAM,{
	if (ep20_main == 37) {
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "I never thought of crossing the sea on an Iwin, but it's amazing.";
		next;
		mes "[Maram]";
		mes "Are these differences in lifestyles due to geography and climate?";
		close3;
	}
	if (ep20_main == 38) {
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "The Iwins seem to eat more than they look. They say they ate all of this...?";
		close3;
	}
	if (ep20_main == 39) {
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "...I'd rather go through the maze of Oz twice...";
		close3;
	}
	end;
}

icecastle,141,206,5	script(CLOAKED)	Miriam#e20pn02::ep20_icecastle_141_206	4_EP18_MIRIAM,{
	if (ep20_main == 37) {
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "Iwin's skills are guaranteed if Leon and Aurelie find them on their own.";
		close3;
	}
	if (ep20_main == 38) {
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "Surely, you have to pay a fair price to get help...";
		close3;
	}
	if (ep20_main == 39) {
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "...Am I the only one who feels like I'm losing money?";
		close3;
	}
	end;
}

icecastle,143,203,7	script(CLOAKED)	Lazy#e20pn02::ep20_icecastle_143_203	4_EP19_LAZY,{
	if (ep20_main == 37) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "How many people are riding Iwin...";
		next;
		mes "[Lazy]";
		mes "I thought about it before, isn't it too much for the talking animals in this neighborhood? No, it's just like that.";
		close3;
	}
	if (ep20_main == 38) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Aren't you trying to pamper yourself after catching hukou? I bet my precious hair that I'm right. What do you want to wear?";
		close3;
	}
	if (ep20_main == 39) {
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Look, what did I say. I'm going to work like this for the rest of my life on the pretext of diving once...";
		close3;
	}
	end;
}

icecastle,141,212,3	script	Dive Iwin#e20pn02	4_EP19_IWIN,{
	if (checkweight(1001217,15) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main < 37)
		end;	// note: no text
	if (ep20_main == 37) {
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "Cororo. How are you?";
		next;
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "Of course. Thanks to Aurelie and Leon's care, I can't get along anymore!";
		next;
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "That's great. Could you do me a favor? It's very important.";
		next;
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "I can't do anything for you two. Even if you ask me to pick a star in the sky, I have to do it.";
		npctalk "Lazy: Isn't ambition a joke?", "ep20_icecastle_143_203", bc_self;
		next;
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "Could you take us to the drift ice zone? There is a place to look for. The adventurer will tell you the approximate location.";
		next;
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "As far as the drift ice zone? Swimming in the sea is a piece of cake for me, but it's a different story when it comes to the drift ice zone. It's dangerous there because of the glacier pieces, and the water temperature is low...";
		next;
		mes "[Cororo]";
		mes "Besides, since you said you don't know the exact location, you'll be wandering around and wandering around the ship trying to find it! It's going to be a really tough fight...";
		next;
		mes "[Cororo]";
		mes "(He rubs his wings while saying that..)";
		npctalk "Lazy: You can pick stars in the sky, but you can't swim? This is amazing.", "ep20_icecastle_143_203", bc_self;
		npctalk "Cororo: That's different from that!", "", bc_self;
		next;
		select( "What do you want?" );
		mes "[Cororo]";
		mes "Oh, you make me very sad when you say that! It's not what I want, it's what I need! A high-calorie meal is important for maintaining body temperature.";
		next;
		mes "[Cororo]";
		mes "A normal diet is fine for normal diving, but if you want to go to the drift ice zone, be prepared!";
		next;
		mes "[Cororo]";
		mes "You must have meat, and I think you should eat frozen bug shells as snacks, right?";
		next;
		cutin "ep19_iwin05.png",2;
		mes "[Cororo]";
		mes "If I don't eat like that, I'll get hungry in the middle and I might sink. I'm Iwin, so I'll survive somehow, but what about the human body...";
		npctalk "Lazy: Isn't this a threat?", "ep20_icecastle_143_203", bc_self;
		npctalk "Cororo: Threats, that's unreasonable! I'm worried, worried.", "", bc_self;
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "It seems like you're getting involved...";
		next;
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "I can't help it because there's no way right now. I'll prepare the meat, so can I ask the adventurer to get some frozen bug shells?";
		next;
		select( "I'll be back" );
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "You should! Well thought out, then... Catch 5 " + getmonsterinfo("EP19_ICE_GANGU", MOB_NAME) + " and bring me 3 " + getitemname(1000832) + ".";
		next;
		mes "[Cororo]";
		mes "Thank you! " + getmonsterinfo("EP19_ICE_GANGU", MOB_NAME) + " should be found in <NAVI>[Frozen Scale Hill]<INFO>jor_back1,141,208,1,101,1</INFO></NAVI> . I'll be saving up my stamina for a swim!";
		npctalk "Lazy: You mean you're playing after all?", "ep20_icecastle_143_203", bc_self;
		npctalk "Lehar: Shhh! What if I can't go because I'm stuck in the dive!", "ep20_icecastle_143_210", bc_self;
		ep20_main = 38;
		erasequest 23100;
		setquest 23101;
		close3;
	}
	if (ep20_main == 38) {
		switch( checkquest(23101,HUNTING) ) {
		case -1:
			end;
		case 0:
		case 1:
			cutin "ep19_iwin03.png",1;
			mes "[Cororo]";
			mes "Thank you! " + getmonsterinfo("EP19_ICE_GANGU", MOB_NAME) + " should be found in <NAVI>[Frozen Scale Hill]<INFO>jor_back1,141,208,1,101,1</INFO></NAVI> .";
			next;
			mes "[Cororo]";
			mes "Catch 5 " + getmonsterinfo("EP19_ICE_GANGU", MOB_NAME) + " and bring me 3 " + getitemname(1000832) + ". It's free, right?";
			close3;
		case 2:
			if (countitem(1000832) < 3) {
				cutin "ep19_iwin03.png",2;
				mes "[Cororo]";
				mes "Is the stuff ready? Let's see...";
				next;
				mes "[Cororo]";
				mes "...not enough numbers? Adventurer, look at my appearance. 3 " + getitemname(1000832) + " are generous!";
				next;
				mes "[Cororo]";
				mes "Cannot be less than 3. Go back to <NAVI>[Frozen Scale Hills]<INFO>jor_back1,141,208,1,101,1</INFO></NAVI> and get them!";
				close3;
			}
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "" + getitemname(1000832) + "! One, two, three... I'm sure. If you eat this, you can swim for a long time. Ten minutes is enough!";
			next;
			cutin "ep19_leon01.png",2;
			mes "[Leon]";
			mes "Then let's start...";
			next;
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "But before that! I need a protective agent applied to the feathers. Since a lot of people will ride, it's important to secure maximum buoyancy.";
			npctalk "Lazy: Whoa...", "ep20_icecastle_143_203", bc_self;
			next;
			mes "[Cororo]";
			mes "I want to take you there as quickly as a chimney, but safety comes first. In case the feather gets wet and sinks in the middle...";
			next;
			cutin "ep18_maram_01.png",2;
			mes "[Maram]";
			mes "Aww, don't keep saying ominous things! You can bring it to me!";
			next;
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "Ah, if you say that, I have no choice but to ask! Then, bring me " + getitemname(1000831) + " this time.";
			next;
			mes "[Cororo]";
			mes "Extracting the essence from seaweed stems is a good natural protection agent! It is invaluable to Iwin's feathers, which are overused in salt water.";
			next;
			mes "[Cororo]";
			mes "Kill 5  " + getmonsterinfo("EP19_SHINING_SEAWEED", MOB_NAME) + " and bring me 3 " + getitemname(1000831) + ". Go to <NAVI>[Frozen Scale Hill]<INFO>jor_back1,141,208,1,101,1</INFO></NAVI> and you'll see it right away";
			next;
			cutin "ep19_iwin05.png",2;
			mes "[Cororo]";
			mes "Come on, I'm going to fill up some snacks, no, fuel, so come on!";
			next;
			cutin "ep19_leizi01.png",2;
			mes "[Lazy]";
			mes "You're not very sharp...";
			ep20_main = 39;
			delitem 1000832,3;	// EP19_Frozen_Shell
			erasequest 23101;
			setquest 23102;
			getitem 1001217,15;	// Ep20_Cat_Whiskers
			getexp2 136611959,0;
			getexp 0,22271670;
			add_reputation_points( REPU_EP20, 60 );
			close3;
		}
		end;
	}
	if (ep20_main == 39) {
		switch( checkquest(23102,HUNTING) ) {
		case -1:
			end;
		case 0:
		case 1:
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "If you go to <NAVI>[Frozen Scale Hills]<INFO>jor_back1,141,208,1,101,1</INFO></NAVI>, you will find " + getmonsterinfo("EP19_SHINING_SEAWEED", MOB_NAME) + "." ;
			next;
			mes "[Cororo]";
			mes "3 " + getitemname(1000831) + " is enough. Welcome back!";
			close3;
		case 2:
			if (countitem(1000831) < 3) {
				cutin "ep19_iwin03.png",2;
				mes "[Cororo]";
				mes "I'm full... no, hehehehe! Are you here? I've been working hard to conserve energy. I didn't eat and play!";
				next;
				cutin "ep19_iwin05.png",2;
				mes "[Cororo]";
				mes "Where... the number is different from what I asked for? I need more. Ha, I have no choice but to eat the shells until the adventurer comes back." + getmonsterinfo("EP19_ICE_GANGU", MOB_NAME) + " ..";
				close3;
			}
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "Did you get the " + getitemname(1000831) + "? Let me check it out.... Um. Okay, that's correct!";
			next;
			cutin "ep18_maram_03.png",2;
			mes "[Maram]";
			mes "I was fooled by Iwin's fluffy and cute appearance... He was hiding such a terrifying side under his soft feathers... He's not even sharp...";
			next;
			cutin "ep18_miriam_03.png",2;
			mes "[Miriam]";
			mes "Maram, come to your senses...";
			next;
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "Hehehe, then this time...";
			next;
			cutin "",255;
			mes "[" + strcharinfo(0) + "]";
			mes "We can start, right...?";
			npctalk "Cororo: Kkoro!", "", bc_self;
			next;
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "Now we're really about to set off. Don't look at us like that, really? Now! Everything's perfect. Now we're ready to hear about our destination!";
			next;
			cutin "ep19_leizi01.png",2;
			mes "[Lazy]";
			mes "Look at how shiny your face is. This, this is suspicious...";
			next;
			cutin "",255;
			mes "[" + strcharinfo(0) + "]";
			mes "When I met the White Cat... there was a big iceberg around, water was flowing next to it, and the cloud was shaped like a cat...";
			npctalk "Lazy: haha, that's really helpful info!", "ep20_icecastle_143_203", bc_self;
			next;
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "Hmm! Hmm! That's enough. With my genius brain and perfect diving skills, I can find it in one shot";
			npctalk "Lazy: Isn't this a typical cheater comment?", "ep20_icecastle_143_203", bc_self;
			next;
			mes "[Cororo]";
			mes "Should we set off quickly before the ship goes down? Hold on tight!";
			ep20_main = 40;
			delitem 1000831,3;	// EP19_Shiny_Seaweed
			erasequest 23102;
			setquest 23103;
			getitem 1001217,15;	// Ep20_Cat_Whiskers
			getexp2 136611959,0;
			getexp 0,22271670;
			add_reputation_points( REPU_EP20, 60 );
			close2;
			cutin "",255;
			warp "jor_safty1",198,152;
			end;
		}
		end;
	}
	cutin "ep19_iwin03.png",2;
	mes "[Cororo]";
	mes "" + strcharinfo(0) + "! You look busy today. Leon asked me to, so I decided to help move here especially for the time being. Would you like to go to the drift ice area?";
	next;
	if (select( "Going", "Not going" ) == 2) {
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "Are you free? If you have time, you can bring me some snacks~";
		unittalk getcharid(3), "" + strcharinfo(0) + " : That's it!", bc_self;
		close3;
	}
	mes "[Cororo]";
	mes "Hold the feather tight, I don't know if it slips!";
	close2;
	cutin "",255;
	warp "jor_twice",235,107;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23100) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(23101,HUNTING) == 2 && countitem(1000832) >= 3" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(23102,HUNTING) == 2 && countitem(1000831) >= 3" );
	end;
}

// note: this part can be skipped
jor_safty1,198,152,0	script	#hw_ep20_pn0301	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep20_main == 40) {
		cloakoffnpcself( "ep20_jor_safty1_195_155" );
		cloakoffnpcself( "ep20_jor_safty1_201_152" );
		cloakoffnpcself( "ep20_jor_safty1_195_148" );
		cloakoffnpcself( "ep20_jor_safty1_192_146" );
		cloakoffnpcself( "ep20_jor_safty1_192_150" );
		cloakoffnpcself( "ep20_jor_safty1_191_153" );
		cloakoffnpcself( "ep20_jor_safty1_192_156" );
		end;
	}
	end;
}

jor_safty1,195,155,3	script(CLOAKED)	Cororo#e20pn0301::ep20_jor_safty1_195_155	4_EP19_IWIN,{
	if (ep20_main == 40) {
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Hey, heck.... It was an unbearable violent driving for me, who only rode in the first class of Yuno's splendid airship. But I overcame it well. As expected, I...";
		next;
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "We've arrived! One, two, three..... oops!! One person is not enough!!";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "What is it, someone spilled in the sea!";
		next;
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "Ah. You counted without me. Everyone arrived safely, don't worry!";
		next;
		cutin "ep19_leon04.png",2;
		mes "[Leon]";
		mes "I'm glad that's the case... but wow, my stomach hurts...";
		next;
		cutin "ep19_aurelie03.png",2;
		mes "[Aurelie]";
		mes "Are you okay? It's a little dizzy, but not to that extent. Maybe it's because I'm young...";
		next;
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "It has nothing to do with that...";
		next;
		cutin "",255;
		mes "[" + strcharinfo(0) + "]";
		mes "By the way... where is this place?";
		next;
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "Haha, where is it! Drift ice area! Exactly the place the adventurer told you about! Adventurer, you get sick!";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Well, it looks a bit different from the place I met the white cat. I don't think it felt like this...";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Haha, even though Cororo is a great Iwin, I think the information was too lacking. Should we jump on our feet?";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "No matter how much you say you're a guardian, aren't you too protective? After exploiting us like this... I'm a very expensive labor force. Can you see my beautiful hands are all cut from working hard in the cold? How are you going to take responsibility?";
		next;
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "Ouch! Leon, help!";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Haha... It's true that Cororo was mischievous, so I'll apologize instead. Why don't we help Korro go to and from the drift ice zone instead?";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "That's a proposal I really like. We can talk about it well. It's different from high-ranking people anywhere.";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Hmmmm... Adventurer. Do you remember the location where you met the white cat? It's hard to recall this place because there's no locator like a city, but it's okay at least roughly.";
		next;
		select( "I'm not sure" );
		mes "[Leon]";
		mes "Then... let's move on. Even if we go the wrong way, it's better than staying here. If you come across a familiar sight, please let us know.";
		close2;
		warp "jor_twice",235,107;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_NONE, "isbegin_quest(23103) == 1" );
	end;
}

jor_safty1,201,152,3	script(CLOAKED)	Lehar#e20pn0301::ep20_jor_safty1_201_152	4_EP19_LEHAR,{
	cutin "ep19_lehar04.png",2;
	mes "[Lehar]";
	mes "Uhhhhhh...";
	close3;
}

jor_safty1,195,148,5	script(CLOAKED)	Maram#e20pn0301::ep20_jor_safty1_195_148	4_EP18_MARAM,{
	cutin "ep18_maram_03.png",2;
	mes "[Maram]";
	mes "Wherever you go, it's not easy... Are you going to be okay Cororo?";
	close3;
}

jor_safty1,192,146,5	script(CLOAKED)	Miriam#e20pn0301::ep20_jor_safty1_192_146	4_EP18_MIRIAM,{
	cutin "ep18_miriam_01.png",2;
	mes "[Miriam]";
	mes "Is this the place the adventurer came from? You'd better ask Cororo if you've arrived.";
	close3;
}

jor_safty1,192,150,5	script(CLOAKED)	Aurelie#e20pn0301::ep20_jor_safty1_192_150	4_EP19_AURELIE,{
	cutin "ep19_aurelie01.png",2;
	mes "[Aurelie]";
	mes "I don't seem to feel any special magic... Let's check with Cororo.";
	close3;
}

jor_safty1,191,153,5	script(CLOAKED)	Leon#e20pn0301::ep20_jor_safty1_191_153	4_EP19_LEON,{
	cutin "ep19_leon05.png",2;
	mes "[Leon]";
	mes "Ugh, I'm dizzy...";
	close3;
}

jor_safty1,192,156,5	script(CLOAKED)	Lazy#e20pn0301::ep20_jor_safty1_192_156	4_EP19_LAZY,{
	cutin "ep19_leizi02.png",2;
	mes "[Lazy]";
	mes "What kind of reckless driving... should I call it reckless swimming?";
	close3;
}


// Main quest - Step 41
jor_twice,235,107,0	script	#hw_ep20_pn03	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep20_main == 41) {
		cloakoffnpcself( "ep20_jor_twice_255_125" );
		cloakoffnpcself( "ep20_jor_twice_247_163" );
		cloakoffnpcself( "ep20_jor_twice_222_226" );
		cloakoffnpcself( "ep20_jor_twice_232_249" );
		cloakoffnpcself( "ep20_jor_twice_237_310" );
		end;
	}
	end;
}

jor_twice,255,125,5	script(CLOAKED)	Maram#e20pn03::ep20_jor_twice_255_125	4_EP18_MARAM,{
	cutin "ep18_maram_01.png",2;
	mes "[Maram]";
	mes "Take a step on the ice above!";
	close3;
}

jor_twice,247,163,5	script(CLOAKED)	Miriam#e20pn03::ep20_jor_twice_247_163	4_EP18_MIRIAM,{
	cutin "ep18_miriam_01.png",2;
	mes "[Miriam]";
	mes "The water in front of this is shallow, so you can walk around. Keep going north.";
	close3;
}

jor_twice,222,226,7	script(CLOAKED)	Lazy#e20pn03::ep20_jor_twice_222_226	4_EP19_LAZY,{
	cutin "ep19_leizi02.png",2;
	mes "[Lazy]";
	mes "Ah, my feet are cold! What are you doing with Yuno, my warm hometown...";
	next;
	cutin "ep19_leizi01.png",2;
	mes "[Lazy]";
	mes "What? Where are you going? My gut tells me to dip my toe in the pool you see when I go up northeast.";
	next;
	cutin "ep19_leizi03.png",2;
	mes "[Lazy]";
	mes "Uh huh, what's with that look? Are you doubting my words? I'm afraid I'm the only one who can't wet my shoes in cold water and give you ridiculous advice? Really I...";
	close3;
}

jor_twice,232,249,5	script(CLOAKED)	Lehar#e20pn03::ep20_jor_twice_232_249	4_EP19_LEHAR,{
	cutin "ep19_lehar01.png",2;
	mes "[Lehar]";
	mes "You can go up this narrow road ahead! If you see dry land, let's go there.";
	next;
	mes "[Lehar]";
	mes "You won't fall into deep water on your way, right? I haven't learned how to walk on water yet...";
	close3;
}

jor_twice,237,310,5	script(CLOAKED)	Aurelie#e20pn03::ep20_jor_twice_237_310	4_EP19_AURELIE,{
	cutin "ep19_aurelie01.png",2;
	mes "[Aurely]";
	mes "This way, go up the hill. Leon is waiting for you.";
	close3;
}


// Part of the daily quest "Uprooting Ragan"
// jor_twice,235,111,3	script	Cororo#e20pn03	4_EP19_IWIN,{


// Main quest - Step 42
jor_twice,238,330,0	script	#hw_ep20_pn04	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 41) {
		cloakoffnpcself( "ep20_jor_twice_238_330" );
		end;
	}
	end;
}

jor_twice,238,330,7	script(CLOAKED)	Leon#e20pn04::ep20_jor_twice_238_330	4_EP19_LEON,{
	if (ep20_main == 41) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Ah, " + strcharinfo(0) + " Are you here?";
		next;
		select( "What about the White Cat?" );
		mes "[Leon]";
		mes "It looks like you went the wrong way. It's not here. Still, you can see something from the higher ground.";
		next;
		mes "[Leon]";
		mes "Although it's very faint, I can definitely feel the magic of Jormungand in the drift ice area. It seems that the magic is coming from the west. Let's go to <NAVI>[the other side]<INFO>jor_twice,158,243,0,101,0</INFO></NAVI>";
		ep20_main = 42;
		erasequest 23104;
		setquest 23105;
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23104) == 1" );
	end;
}


// Main quest - Step 43
jor_twice,160,241,0	script	#hw_ep20_pn05	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 43 || ep20_main == 44) {
		cloakoffnpcself( "ep20_jor_twice_164_244" );
		cloakoffnpcself( "ep20_jor_twice_159_247" );
		cloakoffnpcself( "ep20_jor_twice_163_248" );
		cloakoffnpcself( "ep20_jor_twice_169_249" );
		end;
	}
	cloakoffnpcself( "ep20_jor_twice_164_244" );	// note: npc uncloaked
	cloakoffnpcself( "ep20_jor_twice_158_243" );
	cloakoffnpcself( "ep20_jor_twice_161_243" );
	cloakoffnpcself( "ep20_jor_twice_159_247" );
	cloakoffnpcself( "ep20_jor_twice_163_248" );
	cloakoffnpcself( "ep20_jor_twice_169_249" );
	end;
}

jor_twice,162,246,7	duplicate(dummy_cloaked_npc)	White Cat#e20pn05::ep20_jor_twice_162_246	4_EP20_NYAR
// jor_twice,161,243,3	script	Aurelie#e20pn05::ep20_jor_twice_161_243	4_EP19_AURELIE,{

jor_twice,169,249,7	script(CLOAKED)	Lazy#e20pn05::ep20_jor_twice_169_249	4_EP19_LAZY,{
	if (ep20_main == 42) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Ah... I want to go to work.";
		next;
		mes "[Lazy]";
		mes "As I dipped my feet in cold water to enjoy some kind of wealth and glory...";
		close3;
	}
	if (ep20_main == 43) {
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "What, just now? Isn't it a foul for the two of us to be that fast together as human beings?";
		close3;
	}
	end;
}

jor_twice,159,247,5	script(CLOAKED)	Maram#e20pn05::ep20_jor_twice_159_247	4_EP18_MARAM,{
	if (ep20_main == 42) {
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Ugh, it's cold... the wind really blows like a knife.";
		close3;
	}
	if (ep20_main == 43) {
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "...You must have been here? Where did you two disappear in an instant?";
		close3;
	}
	end;
}

jor_twice,163,248,5	script(CLOAKED)	Miriam#e20pn05::ep20_jor_twice_163_248	4_EP18_MIRIAM,{
	if (ep20_main == 42) {
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "I'm prepared, but the road is really rough. I'm glad I came this far thanks to the diving Iwin.";
		close3;
	}
	if (ep20_main == 43) {
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "Am I wrong...?";
		close3;
	}
	end;
}

jor_twice,158,243,7	script(CLOAKED)	Leon#e20pn05::ep20_jor_twice_158_243	4_EP19_LEON,{
	if (ep20_main == 42) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Ah, adventurer. I just stopped because I felt magical energy around here. What do you think, adventurer?";
		next;
		cutin "",255;
		mes "[" + strcharinfo(0) + "]";
		mes "It's hard to pinpoint, but the scenery is familiar. I think it was around here that I met the cat...";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "I'm sure the adventurer said that. The World Tree and Jormungand... It's a magical power that Aurelie and I can't be ignorant of.";
		next;
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "Perhaps the cult of Jormungand felt the same magic and was trying to find its source. After all, they are beings born of Jormungand's magic.";
		next;
		mes "[Aurelie]";
		mes "As I said, the remaining magical energy in Jormungandr's discarded body will soon be depleted. They are more desperate than we are in need of strength to escape Isgard, and they also have more heads.";
		cloakoffnpcself( "ep20_jor_twice_162_246" );
		npctalk "White Cat: Aw-", "ep20_jor_twice_162_246", bc_self;
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Huh?";
		next;
		cutin "ep19_aurelie03.png",2;
		mes "[Aurelie]";
		mes "We should find Jormungandr faster than they do...";
		npctalk "White Cat: Meow.", "ep20_jor_twice_162_246", bc_self;
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Mister Aurelie, Mr Aurelie!";
		next;
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "Huh?";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Cat, over there!";
		npctalk "White Cat: (Kushikushi)", "ep20_jor_twice_162_246", bc_self;
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "We didn't find Jormungandr, but Jormungandr found us? So, is God a god?";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Isn't the waist really big?! That cat saw the two of you...!";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Right! It's just that long! But what should I do now...";
		next;
		specialeffect EF_HIT1, AREA, "ep20_jor_twice_162_246";
		specialeffect EF_HIT1;
		specialeffect EF_HIT1, AREA, "ep20_jor_twice_161_243";
		cloakonnpcself();
		cloakonnpcself( "ep20_jor_twice_161_243" );
		cloakonnpcself( "ep20_jor_twice_162_246" );
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Uh, uh! Aurelie, Leon! Let's go together!";
		next;
		mes "[Lehar]";
		mes "Adventurer, follow me before I miss you!";
		ep20_main = 43;
		erasequest 23105;
		setquest 23106;
		close3;
	}
	if (ep20_main == 45) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "While you are away, Aurelie and I will do what we can here.";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23105) == 1" );
	end;
}


// Main quest - Step 44 (instance NestOfTwigs)
// jor_twice,164,244,5	script	Lehar#e20pn05::ep20_jor_twice_164_244	4_EP19_LEHAR,{


// Main quest - Step 45
jor_safty1,325,148,3	duplicate(dummy_npc)	Leon#e20pn0501	4_EP19_LEON
jor_safty1,325,145,3	duplicate(dummy_npc)	Lehar#e20pn0501	4_EP19_LEHAR
jor_safty1,331,146,3	duplicate(dummy_npc)	Cororo#e20pn0501	4_EP19_IWIN
jor_safty1,329,152,3	duplicate(dummy_npc)	Miriam#e20pn0501	4_EP18_MIRIAM
jor_safty1,333,152,3	duplicate(dummy_npc)	Maram#e20pn0501	4_EP18_MARAM
jor_safty1,336,150,3	duplicate(dummy_npc)	Lazy#e20pn0501	4_EP19_LAZY

jor_safty1,328,150,3	script	Aurelie#e20pn0501	4_EP19_AURELIE,{
	if (ep20_main == 44) {
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "I see everyone was here. They suddenly disappeared. Everyone must be surprised.";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Huh, is there a traditional ice castle method? The crotch almost broke its crotch trying to follow Iwin.";
		next;
		cutin "ep19_iwin03.png",2;
		mes "[Cororo]";
		mes "Rgan wanders around a lot, and I was afraid that I wouldn't be able to take her back to the ice castle because she wouldn't come back like this!";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "I'm sorry, I'm sorry, but I've brought you some good news, so please take a look";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Good news? Did you really find the White Cat?";
		next;
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "Yes. I can't speak directly, but I can clearly feel Jormungandr's will. Near this land, there is a hidden place covered by a protective shield.";
		next;
		mes "[Aurelie]";
		mes "There is a World Tree that Jormungand wants to protect. The Rgans are definitely trying to find that place and use its magic...";
		next;
		mes "[Aurelie]";
		mes "So we must stop Lasgand from finding it.";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "I have a serious suggestion at this point";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Wow! Did you think of a good way to stop Rgan? Yuno's elite wasn't lying!";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Rather than that... isn't it too hard to call Jormungandr every time? It's five letters long and the pronunciation is complicated. Let's call it something simpler. For example, 'Nyar'?";
		next;
		cutin "ep19_lehar04.png",2;
		mes "[Lehar]";
		mes ".........yes?";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Short, concise, and easy to pronounce. Most of all, isn't it cute?";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Okay, shall we...";
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "...Is it okay to call God that? Isn't it blasphemous...";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "If you call me Jormungand every time, you might end up in the ears of the Rgans, so I'd rather call you by a less dignified name.";
		next;
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "Yeah, if you call it that, no one will doubt it even if you say it in the middle of the Rgan lair. Jormungand will understand this much. ...maybe?";
		next;
		mes "[Aurelie]";
		mes "Then, shall we call you Nyar... from now on? Lehar has suggested that we slay the Rgans spread across the drift ice. If there are no other opinions, let's put out the fire first.";
		next;
		cutin "ep19_leizi01.png",2;
		mes "[Lazy]";
		mes "Yeah... even though he's a young master now, he's been through his Sura days. Once he's done it, it's hot, isn't it? I like it.";
		next;
		cutin "ep19_aurelie01.png",2;
		mes "[Aurelie]";
		mes "I understand there are no objections. Shall we move quickly? Let's start lightly with 5 Rgans per person.";
		next;
		mes "[Aurelie]";
		mes "Tell me when you've reached your quota. In the meantime, I'll be monitoring the progress of Leon and magic power.";
		ep20_main = 45;
		erasequest 23108;
		setquest 23109;
		close2;
		cutin "",255;
		warp "jor_twice",162,239;
		end;
	}
	// debug
	warp "jor_twice",162,239;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_NONE, "isbegin_quest(23108) == 1" );
	end;
}


// Main quest - Step 46
jor_twice,161,243,3	script(CLOAKED)	Aurelie#e20pn05::ep20_jor_twice_161_243	4_EP19_AURELIE,{
	if (checkweight(1001217,20) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main == 45) {
		switch( checkquest(23109,HUNTING) ) {
		case -1:
			end;
		case 0:
		case 1:
			cutin "ep19_aurelie01.png",2;
			mes "[Aurelie]";
			mes "Certainly, the amount of mana depleted has decreased as the amount of mana harvesting has decreased, but it is still not enough.";
			next;
			mes "[Aurelie]";
			mes "Cheer up a little more. 5 Rgans are enough.";
			close3;
		case 2:
			cutin "ep19_aurelie01.png",2;
			mes "[Aurelie]";
			mes "Everyone has worked hard. This should be enough for today.";
			next;
			cutin "ep19_lehar03.png",2;
			mes "[Lehar]";
			mes "Hey, hey... even if I catch it, it never ends...";
			next;
			cutin "ep19_leon05.png",2;
			mes "[Leon]";
			mes "I thought Lasgand would appear at this level, but I can't see a single strand of hair. Maybe he's sending a low-class Rgan to do chores...";
			next;
			cutin "ep19_aurelie03.png",2;
			mes "[Aurelie]";
			mes "Maybe he doesn't show up because he met an adventurer here? What he wants first is Nyar's magic, not to defeat the adventurer.";
			next;
			cutin "",255;
			mes "[" + strcharinfo(0) + "]";
			mes "Then why don't we go see each other in person?";
			next;
			cutin "ep19_leon02.png",2;
			mes "[Leon]";
			mes "You mean to enter the maze?";
			next;
			cutin "ep19_leon01.png",2;
			mes "[Leon]";
			mes "Ummm, let's do it... It's better to block the maze than to continue a meaningless defensive battle here. It's important to deal with the Rgans that have already appeared, but it's better if they don't come out from the beginning.";
			next;
			mes "[Leon]";
			mes "It's good to be able to spy on their situation. That's enough for Rgans who came out, let's go right into the maze.";
			next;
			cutin "ep19_aurelie01.png",2;
			mes "[Aurelie]";
			mes "But, just in case, it would be good to periodically deal with Rgan in the drift ice zone. Can I transfer the job to Cororo?";
			next;
			cutin "ep19_iwin03.png",2;
			mes "[Cororo]";
			mes "Just trust me! I'll check it properly every day!";
			next;
			cutin "ep19_aurelie01.png",2;
			mes "[Aurelie]";
			mes "Thank you, Cororo.";
			mes "Then let's go right into the maze. We'll meet in front of the maze when we're ready.";
			next;
			mes "[Aurelie]";
			mes "Ah, if you don't have a Rgan Transformation Scroll, it's okay to do maintenance at the ice castle. There's no need to be in a hurry, so prepare perfectly.";
			ep20_main = 46;
			erasequest 23109;
			setquest 23110;
			setquest 23112;
			getitem 1001217,20;	// Ep20_Cat_Whiskers
			getexp2 204917939,0;
			getexp 0,33407506;
			add_reputation_points( REPU_EP20, 90 );
			close3;
		}
		end;
	}
	end;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(23109,HUNTING) == 2" );
	end;
}


// Main quest - Step 47
jor_maze,140,74,0	script	#hw_ep20_pn07	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep20_main == 46) {
		cloakoffnpcself( "ep20_jor_maze_142_70" );
		cloakoffnpcself( "ep20_jor_maze_137_69" );
		cloakoffnpcself( "ep20_jor_maze_145_53" );
		cloakoffnpcself( "ep20_jor_maze_150_36" );
		cloakoffnpcself( "ep20_jor_maze_150_33" );
		cloakoffnpcself( "ep20_jor_maze_145_41" );
		end;
	}
	if (ep20_main == 47) {
		cloakoffnpcself( "ep20_jor_maze_145_53" );
		cloakoffnpcself( "ep20_jor_maze_150_36" );
		cloakoffnpcself( "ep20_jor_maze_150_33" );
		cloakoffnpcself( "ep20_jor_maze_145_41" );
		end;
	}
	if (ep20_main == 48) {
		cloakoffnpcself( "ep20_jor_maze_150_33" );
		cloakoffnpcself( "ep20_jor_maze_150_36" );
		end;
	}
	end;
}
jor_maze,148,32,0	duplicate(#hw_ep20_pn07)	#hw_ep20_pn07_B	HIDDEN_WARP_NPC,2,2

jor_maze,150,36,5	duplicate(dummy_cloaked_npc)	Maram#e20pn07::ep20_jor_maze_150_36	4_EP19_RGAN_R3
jor_maze,145,53,5	duplicate(dummy_cloaked_npc)	Aurelie#e20pn07::ep20_jor_maze_145_53	4_EP19_RGAN_R1
jor_maze,145,41,7	duplicate(dummy_cloaked_npc)	Lazy#e20pn07::ep20_jor_maze_145_41	4_EP19_RGAN_SR3
// jor_maze,150,33,5	script	Miriam#e20pn07::ep20_jor_maze_150_33	4_EP19_RGAN_R2,{

jor_maze,137,69,5	duplicate(dummy_cloaked_npc)	Leon#e20pn07::ep20_jor_maze_137_69	4_EP19_RGAN_R2

jor_maze,142,70,3	script(CLOAKED)	Lehar#e20pn07::ep20_jor_maze_142_70	4_EP19_RGAN_R3,{
	if (getstatus(SC_MONSTER_TRANSFORM,1) != 21530) {
		cutin "ep19_lehar05.png",2;
		mes"[Lehar]";
		mes "Adventurer! It's in the maze here. It's a big deal if you go around like that!";
		next;
		mes "[Lehar]";
		mes "If you don't have the ^0000cdRgan Transformation Scroll^000000, go back to the ice castle and get one, quick!";
		close3;
	}
	if (ep20_main == 46) {
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Huh? Adventurer, don't you think the atmosphere is a bit different from last time? For some reason...";
		next;
		cutin "",255;
		select( "It seems oddly exciting." );
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "That's what I said! You look happy while working... that's unbelievable. What happened while we were gone?";
		next;
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "It may have something to do with our attack. I think we need to look at the atmosphere around us.";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Why don't you just walk around and listen to what Rgans are saying? If they're this excited, they might be talking to each other.";
		next;
		mes "[Lehar]";
		mes "Oh, this time, let's not go too far so that we don't fall apart and get attacked. I don't know what, but if something good happens to the Rgans, it's going to be against us.";
		next;
		mes "[Lehar]";
		mes "Then, listen to the rumors nearby, and tell them to others!";
		ep20_main = 47;
		erasequest 23112;
		setquest 23113;
		setquest 23114;
		setquest 23115;
		setquest 23116;
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23112) == 1" );
	end;
}


// Main quest - Step 48
jor_maze,53,238,0	script	#hw1	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch_:	// note: hidden players don't trigger the npc
	if (ep20_main == 47 && isbegin_quest(23113) == 1) {
		cloakoffnpcself( "ep20_jor_maze_52_238" );
		cloakoffnpcself( "ep20_jor_maze_55_238" );
		end;
	}
	end;
}

jor_maze,52,238,7	script(CLOAKED)	Hoton Lokengand#e20rgan_r1::ep20_jor_maze_52_238	4_EP19_RGAN_R1,{
	if (ep20_main == 47 && isbegin_quest(23113) == 1) {
		mes "[Hoton Lokengand]";
		mes "Jormungand's second coming, he's been shaking since he heard that, and things are out of hand";
		next;
		mes "[Sohem Garungand]";
		mes "Oops! That's the same for me.... In times like this, you have to eat well, sleep well, and work hard to serve that person with dignity!";
		next;
		mes "[Hoton Lokengand]";
		mes "That makes sense..... Huh?";
		next;
		mes "[Hoton Lokengand]";
		mes "You pretend to take care of me, but while I eat, sleep, and work, you're going to find Jormungand first!";
		next;
		mes "[Sohem Garungand]";
		mes "Eh, why are you so quick-witted? Yes! Isn't it natural that I, who is more faithful than you, receive him first?";
		next;
		mes "[Hoton Lokengand]";
		mes "What? Did you just say that?";
		emotion ET_ANGER;
		next;
		mes "There seems to be a rumor going around among the Rgans that Jormungand will return. Let's leave before he gets caught up in a fight....";
		erasequest 23113;
		if (isbegin_quest(23113) == 0 && isbegin_quest(23114) == 0 && isbegin_quest(23115) == 0) {
			ep20_main = 48;
			erasequest 23116;
			setquest 23117;
		}
		close;
	}
	mes "[Hoton Lokengand]";
	mes "Huh, did you think I would fall for such a shallow number?";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23113) == 1" );
	end;
}

jor_maze,55,238,7	script(CLOAKED)	Sohem Garungand#e20rgan_r2::ep20_jor_maze_55_238	4_EP19_RGAN_R2,{
	if (ep20_main == 47 && isbegin_quest(23113) == 1) {
		mes "[Hoton Lokengand]";
		mes "Jormungand's second coming, he's been shaking since he heard that, and things are out of hand";
		next;
		mes "[Sohem Garungand]";
		mes "Oops! That's the same for me.... In times like this, you have to eat well, sleep well, and work hard to serve that person with dignity!";
		next;
		mes "[Hoton Lokengand]";
		mes "That makes sense..... Huh?";
		next;
		mes "[Hoton Lokengand]";
		mes "You pretend to take care of me, but while I eat, sleep, and work, you're going to find Jormungand first!";
		next;
		mes "[Sohem Garungand]";
		mes "Eh, why are you so quick-witted? Yes! Isn't it natural that I, who is more faithful than you, receive him first?";
		next;
		mes "[Hoton Lokengand]";
		mes "What? Did you just say that?";
		emotion ET_ANGER, getnpcid(0,"ep20_jor_maze_52_238");
		next;
		mes "There seems to be a rumor among the Rgans that Jormungand will return. Let's leave before we get caught up in a fight...";
		erasequest 23113;
		if (isbegin_quest(23113) == 0 && isbegin_quest(23114) == 0 && isbegin_quest(23115) == 0) {
			ep20_main = 48;
			erasequest 23116;
			setquest 23117;
		}
		close;
	}
	mes "[Sohem Garungand]";
	mes "This is why I don't like quick-witted Rgan...";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23113) == 1" );
	end;
}


jor_maze,155,243,0	script	#hw3	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch_:	// note: hidden players don't trigger the npc
	if (ep20_main == 47 && isbegin_quest(23114) == 1) {
		cloakoffnpcself( "ep20_jor_maze_154_244" );
		cloakoffnpcself( "ep20_jor_maze_157_241" );
		end;
	}
	end;
}

jor_maze,157,241,5	script(CLOAKED)	Naaryugand#e20rgan_sr1::ep20_jor_maze_157_241	4_EP19_RGAN_SR1,{
	if (ep20_main == 47 && isbegin_quest(23114) == 1) {
		mes "[Misugozengand]";
		mes "Priest, what exactly does Jormungand's vehicle look like?";
		next;
		mes "[Naaryugand]";
		mes "It's white and has a long body. And you can clearly feel Jormungand's magical power.";
		next;
		mes "[Misugozengand]";
		mes "...Could you elaborate a bit more? I'm an advanced level student, so I don't understand...";
		next;
		mes "[Naaryugand]";
		mes "..........";
		mes "I received the message too, so I don't know much more. I'll have to ask Lasgand for details...";
		emotion ET_SWEAT, getnpcid(0,"ep20_jor_maze_154_244");
		next;
		mes "Ordinary Rgans seem to not know much about Jormungand because they rely only on the information they receive. Rgan society is all the same...";
		erasequest 23114;
		if (isbegin_quest(23113) == 0 && isbegin_quest(23114) == 0 && isbegin_quest(23115) == 0) {
			ep20_main = 48;
			erasequest 23116;
			setquest 23117;
		}
		close;
	}
	mes "[Naaryugand]";
	mes "...this is very difficult...";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23114) == 1" );
	end;
}

jor_maze,154,244,3	script(CLOAKED)	Misugozengand#e20rgan_r3::ep20_jor_maze_154_244	4_EP19_RGAN_R3,{
	if (ep20_main == 47 && isbegin_quest(23114) == 1) {
		mes "[Misugozengand]";
		mes "Priest, what exactly does Jormungand's vehicle look like?";
		next;
		mes "[Naaryugand]";
		mes "It's white and has a long body. And you can clearly feel Jormungand's magical power.";
		next;
		mes "[Misugozengand]";
		mes "...Could you elaborate a bit more? I'm an advanced level student, so I don't understand...";
		next;
		mes "[Naaryugand]";
		mes "..........";
		mes "I received the message too, so I don't know much more. I'll have to ask Lasgand for details...";
		emotion ET_SWEAT, getnpcid(0,"ep20_jor_maze_154_244");
		next;
		mes "Ordinary Rgans seem to not know much about Jormungand because they rely only on the information they receive. Rgan society is all the same...";
		erasequest 23114;
		if (isbegin_quest(23113) == 0 && isbegin_quest(23114) == 0 && isbegin_quest(23115) == 0) {
			ep20_main = 48;
			erasequest 23116;
			setquest 23117;
		}
		close;
	}
	mes "[Misugozengand]";
	mes "I want to know more, but why don't you tell me...?";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23114) == 1" );
	end;
}


jor_maze,282,190,0	script	#hw5	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch_:	// note: hidden players don't trigger the npc
	if (ep20_main == 47 && isbegin_quest(23115) == 1) {
		cloakoffnpcself( "ep20_jor_maze_283_188" );
		cloakoffnpcself( "ep20_jor_maze_281_191" );
		end;
	}
	end;
}

jor_maze,283,188,3	script(CLOAKED)	Hanaungand#e20rgan_sr3::ep20_jor_maze_283_188	4_EP19_RGAN_SR3,{
	if (ep20_main == 47 && isbegin_quest(23116) == 1) {
		mes "[Kenguntlgand]";
		mes "A long, white, magical being...";
		next;
		mes "[Hanaungand]";
		mes "A long, white, magical being...";
		next;
		mes "[Kenguntlgand]";
		mes "Didn't Lasgand say that such a being was the medium for Jormungand's second coming?";
		next;
		mes "[Hanaungand]";
		mes "By the way... isn't that also Rgan? The higher the grade, the whiter it is, and the longer the tail... It also has magical powers!";
		next;
		mes "[Kenguntlgand]";
		mes "As expected, Jormungand must be our roots! He must have smooth scales and a long tail!";
		next;
		mes "[Hanaungand]";
		mes "Yeah! It's white, long, and has magical powers. No matter how you think about it, it's Rgan itself!";
		next;
		mes "[Kenguntlgand]";
		mes "What an honor!";
		emotion ET_THROB, getnpcid(0,"ep20_jor_maze_281_191");
		emotion ET_THROB, getnpcid(0,"ep20_jor_maze_283_188");
		next;
		mes "There seems to be a rumor circulating among Rgan that a 'white, elongated, magical being' is the medium for the second coming of Jormungand. He seems to be happy in his fantasy, so let's leave it at that...";
		next;
		mes "I think we've gathered enough rumors. Let's go back to the meeting place.";
		erasequest 23115;
		if (isbegin_quest(23113) == 0 && isbegin_quest(23114) == 0 && isbegin_quest(23115) == 0) {
			ep20_main = 48;
			erasequest 23116;
			setquest 23117;
		}
		close;
	}
	mes "[Hanaungand]";
	mes "As expected, Rgan is the best!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23116) == 1" );
	end;
}

jor_maze,281,191,4	script(CLOAKED)	Kenguntlgand#e20rgan_sr2::ep20_jor_maze_281_191	4_EP19_RGAN_SR2,{
	if (ep20_main == 47 && isbegin_quest(23115) == 1) {
		mes "[Kenguntlgand]";
		mes "A long, white, magical being...";
		next;
		mes "[Hanaungand]";
		mes "A long, white, magical being...";
		next;
		mes "[Kenguntlgand]";
		mes "Didn't Lasgand say that such a being was the medium for Jormungand's second coming?";
		next;
		mes "[Hanaungand]";
		mes "By the way... isn't that also Rgan? The higher the grade, the whiter it is, and the longer the tail... It also has magical powers!";
		next;
		mes "[Kenguntlgand]";
		mes "As expected, Jormungand must be our roots! He must have smooth scales and a long tail!";
		next;
		mes "[Hanaungand]";
		mes "Yeah! It's white, long, and has magical powers. No matter how you think about it, it's Rgan itself!";
		next;
		mes "[Kenguntlgand]";
		mes "What an honor!";
		emotion ET_THROB, getnpcid(0,"ep20_jor_maze_281_191");
		emotion ET_THROB, getnpcid(0,"ep20_jor_maze_283_188");
		next;
		mes "There seems to be a rumor circulating among Rgan that a 'white, elongated, magical being' is the medium for the second coming of Jormungand. He seems to be happy in his fantasy, so let's leave it at that...";
		next;
		mes "I think we've gathered enough rumors. Let's go back to the meeting place.";
		erasequest 23115;
		if (isbegin_quest(23113) == 0 && isbegin_quest(23114) == 0 && isbegin_quest(23115) == 0) {
			ep20_main = 48;
			erasequest 23116;
			setquest 23117;
		}
		close;
	}
	mes "[Kenguntlgand]";
	mes "White and long... Rgan!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23115) == 1" );
	end;
}


// Main quest - Step 49
jor_maze,150,33,5	script(CLOAKED)	Miriam#e20pn07::ep20_jor_maze_150_33	4_EP19_RGAN_R2,{
	if (checkweight(1001217,10) == 0) {	// custom
		mes "Conversation cannot proceed because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main == 48) {
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "Ah, Adventurer. Have you heard about Rgans? We've just arrived. Let's share what we've collected.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "I think everyone knows that Nyar has appeared. But Lasgand seems to have said that Nyar is the medium of the Second Coming.";
		next;
		mes "[Maram]";
		mes "But all I knew was that they were white and elongated? I passed by so quickly that Lasgand didn't even see Nyar in the form of a cat.";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "It's similar to what I heard. It looks like you ordered the Rgans to capture Nyar... Are you trying to catch him and use his magic?";
		next;
		select( "Probably so" );
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Before that happens, we have to find it first! It's better if you show up first, but Aurelie said. Nyar doesn't seem to have recovered enough power to use it freely yet.";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "Then, we'll have to speed up our search even more. By the way, what will happen if Lasgand really finds Nyar first...";
		next;
		mes "[Miriam]";
		mes "Looks like we've gathered enough rumors, let's go inside the maze.";
		ep20_main = 49;
		erasequest 23117;
		setquest 23118;
		getitem 1001217,10;	// Ep20_Cat_Whiskers
		getexp2 68305979,0;
		getexp 0,11135835;
		add_reputation_points( REPU_EP20, 40 );
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23117) == 1" );
	end;
}


// Main quest - Step 50
jor_maze,198,33,0	script	#hw_ep20_pn0802	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep20_main == 49) {
		cloakoffnpcself( "ep20_jor_maze_197_34" );
		end;
	}
	end;
}

jor_maze,197,34,5	script(CLOAKED)	Miriam#e20pn08_enter::ep20_jor_maze_197_34	4_EP19_RGAN_R2,{
	if (ep20_main == 49) {
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "Adventurer, the atmosphere inside is unusual. Follow me quietly.";
		close2;
		cutin "",255;
		warp "jor_safty2",309,150;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23118) == 1" );
	end;
}

jor_safty2,301,145,5	duplicate(dummy_cloaked_npc)	Lehar#e20pn08::ep20_jor_safty2_301_145	4_EP19_RGAN_R3
jor_safty2,305,151,7	duplicate(dummy_cloaked_npc)	Leon#e20pn08::ep20_jor_safty2_305_151	4_EP19_RGAN_R2
jor_safty2,304,147,5	duplicate(dummy_cloaked_npc)	Aurelie#e20pn08::ep20_jor_safty2_304_147	4_EP19_RGAN_R2
jor_safty2,303,151,5	duplicate(dummy_cloaked_npc)	Maram#e20pn08::ep20_jor_safty2_303_151	4_EP19_RGAN_R2
jor_safty2,298,143,5	duplicate(dummy_cloaked_npc)	Lazy#e20pn08::ep20_jor_safty2_298_143	4_EP19_RGAN_SR3

jor_safty2,307,147,1	duplicate(dummy_cloaked_npc)	White Cat#e20pn08::ep20_jor_safty2_307_147	4_EP20_NYAR
jor_safty2,309,150,3	duplicate(dummy_cloaked_npc)	Sudadagand#e20pn08::ep20_jor_safty2_309_150	4_EP19_RGAN_SR2
jor_safty2,311,148,3	duplicate(dummy_cloaked_npc)	Patkinlongand#e20pn08::ep20_jor_safty2_311_148	4_EP19_RGAN_SR3
jor_safty2,309,145,1	duplicate(dummy_cloaked_npc)	Katuseundungand#e20pn08::ep20_jor_safty2_309_145	4_EP19_RGAN_R3
jor_safty2,307,143,7	duplicate(dummy_cloaked_npc)	Tayenagand#e20pn08::ep20_jor_safty2_307_143	4_EP19_RGAN_SR1
jor_safty2,309,141,1	duplicate(dummy_cloaked_npc)	Ramungendengand#e20pn08::ep20_jor_safty2_309_141	4_EP19_RGAN_R1
jor_safty2,311,143,1	duplicate(dummy_cloaked_npc)	Bahendugand#e20pn08::ep20_jor_safty2_311_143	4_EP19_RGAN_SR2
jor_safty2,306,140,8	duplicate(dummy_cloaked_npc)	Schromsengand#e20pn08::ep20_jor_safty2_306_140	4_EP19_RGAN_SR3

jor_safty2,316,145,3	duplicate(dummy_cloaked_npc)	Lasgand#e20pn08::ep20_jor_safty2_316_145	EP20_NPC_LASGAND

jor_safty2,309,150,0	script	#hw_ep20_pn08	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep20_main == 49) {
		cloakoffnpcself( "ep20_jor_safty2_301_145" );
		cloakoffnpcself( "ep20_jor_safty2_305_151" );
		cloakoffnpcself( "ep20_jor_safty2_304_147" );
		cloakoffnpcself( "ep20_jor_safty2_303_151" );
		cloakoffnpcself( "ep20_jor_safty2_300_148" );
		cloakoffnpcself( "ep20_jor_safty2_298_143" );
		end;
	}
	end;
}

jor_safty2,300,148,5	script(CLOAKED)	Miriam#e20pn08::ep20_jor_safty2_300_148	4_EP19_RGAN_R2,{
	if (ep20_main == 49) {
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "Looks like you haven't noticed yet. If you go all the way inside like this...";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "How are you?";
		cloakoffnpcself( "ep20_jor_safty2_307_147" );
		specialeffect EF_HIT1, AREA, "ep20_jor_safty2_307_147";
		npctalk "White Cat: Aoohhhhh", "ep20_jor_safty2_307_147", bc_self;
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "What, why did you suddenly stop?";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Hey, there! Yor... Nyar!";
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "Lower your voice! What if someone hears it?";
		next;
		cutin "ep20_nyar05.png",2;
		mes "[Nyar]";
		mes "Huh?";
		next;
		cloakoffnpcself( "ep20_jor_safty2_309_150" );
		sleep2 500;
		npctalk "...how?", "ep20_jor_safty2_309_150", bc_self;
		cutin "ep19_leon02.png",2;
		mes "[Leon]";
		mes "Gee, it seems we're not the only ones who noticed this magic...";
		close2;
		setpcblock PCBLOCK_NPC, true;
		cutin "",255;
		sleep2 1000;
		cloakoffnpcself( "ep20_jor_safty2_311_148" );
		sleep2 500;
		npctalk "Huh? It's a cat. It has a really long waist!", "ep20_jor_safty2_309_150", bc_self;
		sleep2 500;
		npctalk "It's white!", "ep20_jor_safty2_311_148", bc_self;
		sleep2 1000;
		cloakoffnpcself( "ep20_jor_safty2_309_145" );
		cloakoffnpcself( "ep20_jor_safty2_307_143" );
		npctalk "I think I can feel Jormungandr!!", "ep20_jor_safty2_309_145", bc_self;
		npctalk "Me too!", "ep20_jor_safty2_309_150", bc_self;
		sleep2 1000;
		npctalk "If you really are Jormungandr, how should I serve you?", "ep20_jor_safty2_307_143", bc_self;
		sleep2 1000;
		cloakoffnpcself( "ep20_jor_safty2_309_141" );
		sleep2 1000;
		cloakoffnpcself( "ep20_jor_safty2_311_143" );
		npctalk "Bishop, I'm afraid for some reason!", "ep20_jor_safty2_309_141", bc_self;
		sleep2 500;
		npctalk "That's awe.", "ep20_jor_safty2_311_143", bc_self;
		sleep2 1000;
		cloakoffnpcself( "ep20_jor_safty2_306_140" );
		sleep2 500;
		npctalk "I don't think you should touch a holy person...", "ep20_jor_safty2_306_140", bc_self;
		sleep2 500;
		npctalk "Whoever is fine, grab it quickly!", "ep20_jor_safty2_309_150", bc_self;
		sleep2 1000;
		npctalk "I'll go and fetch Lasgand!", "ep20_jor_safty2_309_145", bc_self;
		sleep2 1000;
		npctalk "Don't let the cat escape!", "ep20_jor_safty2_311_143", bc_self;
		sleep2 1000;
		npctalk "White Cat: Aww!", "ep20_jor_safty2_307_147", bc_self;
		sleep2 500;
		specialeffect EF_HITTEXTURE, AREA, "ep20_jor_safty2_307_147";
		specialeffect 1065, AREA, "ep20_jor_safty2_307_147";
		npctalk "Disappeared!", "ep20_jor_safty2_311_148", bc_self;
		specialeffect 1065, AREA, "ep20_jor_safty2_301_145";
		sleep2 500;
		specialeffect 1065, AREA, "ep20_jor_safty2_305_151";
		specialeffect 1065, AREA, "ep20_jor_safty2_304_147";
		sleep2 500;
		specialeffect 1065, AREA, "ep20_jor_safty2_303_151";
		sleep2 500;
		specialeffect 1065, AREA, "ep20_jor_safty2_300_148";
		sleep2 500;
		specialeffect 1065, AREA, "ep20_jor_safty2_298_143";
		specialeffect2 1065;
		npctalk "Even the Rgans in front are gone!", "ep20_jor_safty2_309_141", bc_self;
		sleep2 1000;
		npctalk "How did this happen?", "ep20_jor_safty2_307_143", bc_self;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "How did this happen? Was this the power that saved Adventurer and Lehar?";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "I feel the same way, I'm not sure...";
		next;
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "The magical energy of Nyar surrounds and covers us. We will not be seen by them now. It is the same power that covers the Holy Land.";
		next;
		cutin "ep19_aurelie03.png",2;
		mes "[Aurelie]";
		mes "I wonder if it's not good to face them in person... Maybe they came all the way here to convey that meaning.";
		next;
		cloakoffnpcself( "ep20_jor_safty2_316_145" );
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Oh, thank you very much, but I think I'm a little late. Here comes the big one.";
		next;
		cutin "ep20_lasgand01.png",2;
		mes "[Lasgand]";
		mes "What a fuss.";
		next;
		cutin "",255;
		mes "[Schromsengand]";
		mes "Lasgand, a cat with a long waist!";
		npctalk "...was there?", "ep20_jor_safty2_309_141", bc_self;
		npctalk "Am I wrong?", "ep20_jor_safty2_311_148", bc_self;
		npctalk "Then why are we here?", "ep20_jor_safty2_309_150", bc_self;
		next;
		mes "[Vahendugand]";
		mes "I was here a while ago, but it's gone!";
		npctalk "Yes, there was!", "ep20_jor_safty2_309_145", bc_self;
		next;
		cutin "ep20_lasgand01.png",2;
		mes "[Lasgand]";
		mes "....I can feel the magic. Yes, Jormungandr's medium definitely existed here. Well done everyone.";
		npctalk "Lasgand...!", "ep20_jor_safty2_311_148", bc_self;
		next;
		mes "[Lasgand]";
		mes "To say it's an afterimage of magical power, it feels as clear as being right next to me...";
		next;
		cutin "ep19_leizi02.png",2;
		mes "[Lazy]";
		mes "Oh wow, you're quick-witted! Should I call it a dog nose? Or a snake nose?";
		next;
		cutin "ep19_aurelie03.png",2;
		mes "[Aurelie]";
		mes "Rather than arguing about that, I'd rather leave. The atmosphere isn't normal.";
		next;
		specialeffect EF_PRIMECHARGE4, AREA, "ep20_jor_safty2_316_145";
		sleep2 500;
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "Wait, that... is it absorbing Jormungandr's magic?";
		next;
		cutin "ep20_lasgand04.png",2;
		mes "[Lasgand]";
		mes "The medium for the second coming of Jormungand is here. The same magical power as the protective barrier that exists in the drift ice area is stored here.";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "I can't believe it! You already saw it? That's unbelievable...";
		next;
		cutin "ep20_lasgand01.png",2;
		mes "[Lasgand]";
		mes "It must mean that you are not far away... You are shallow. Please praise the idea for crawling in. Your efforts are imaginary.";
		npctalk "Lasgand: Get out of the way", "ep20_jor_safty2_316_145", bc_self;
		npctalk "Yes!", "ep20_jor_safty2_309_141", bc_self;
		npctalk "Yes, yes!", "ep20_jor_safty2_309_145", bc_self;
		next;
		mes "[Lasgand]";
		mes "But even that is within my expectations. I hid well, but since I entered this maze, everything is in the palm of my hand.";
		next;
		mes "[Lasgand]";
		mes "Thank you for saving me the trouble. Be graciously a part of my plan!";
		npctalk "Lasgand!", "ep20_jor_safty2_309_141", bc_self;
		npctalk "Lasgand!", "ep20_jor_safty2_307_143", bc_self;
		npctalk "Lasgand!", "ep20_jor_safty2_311_148", bc_self;
		npctalk "Lasgand!", "ep20_jor_safty2_309_150", bc_self;
		next;
		cutin "ep19_leon05.png",2;
		mes "[Leon]";
		mes "You've been caught nicely, I have no choice but to fight back...!";
		next;
		cutin "ep20_nyar05.png",2;
		sleep2 500;
		specialeffect EF_GROUNDSHAKE, AREA, "ep20_jor_safty2_307_147";
		mes "[Nyar]";
		mes "!";
		ep20_main = 50;
		erasequest 23118;
		setquest 18220;
		close2;
		setpcblock PCBLOCK_NPC, true;
		sleep2 500;
		setpcblock PCBLOCK_NPC, false;
		cutin "",255;
		specialeffect2 EF_DEVIL10;
		warp "jor_back1",364,222;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(23118) == 1" );
	end;
}


// Main quest - Step 51
jor_back1,365,222,0	script	#ep20_part_end_evt1	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep20_main == 50 && isbegin_quest(18240) == 0) {
		cloakoffnpcself( "ep20_jor_back1_364_222" );
		end;
	}
	end;
}

jor_back1,364,222,3	script(CLOAKED)	Nyar#ep20_nyar_e1::ep20_jor_back1_364_222	4_EP20_NYAR,{
	if (ep20_main == 50 && isbegin_quest(18240) == 0) {
		unittalk getcharid(3), "" + strcharinfo(0) + " : What?! Where is this? Where has everyone gone?", bc_self;
		mes "[Nyar]";
		mes "Why is that correct?";
		cutin "ep20_nyar02.png",1;
		next;
		mes "It looks like Nyar moved it to an ice castle.";
		mes "Other parties are not visible.";
		close2;
		cutin "",255;
		// ep20_main = 51;	// note : this part can be skipped
		setquest 18240;
		completequest 18240;
		specialeffect EF_HIT2, AREA, "ep20_jor_back1_368_222";
		specialeffect EF_SCREEN_QUAKE, AREA, "ep20_jor_back1_368_222";
		specialeffect EF_STUNATTACK, AREA, "ep20_jor_back1_368_222";
		cloakoffnpcself( "ep20_jor_back1_368_222" );
		setpcblock PCBLOCK_NPC, true;
		sleep2 500;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpcself( "ep20_jor_back1_364_222" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18220) == 1 && isbegin_quest(18240) == 0" );
	end;
}

jor_back1,368,222,3	script(CLOAKED)	Lazy#ep20_end01::ep20_jor_back1_368_222	4_EP19_LAZY,{
	if (ep20_main == 50) {
		mes "[Lazy]";
		mes "Ugh... oops...";
		mes "Other people? What's wrong with me?";
		mes "At times like this, it's simple. Just go home and wait!";
		cutin "ep19_leizi01.png",2;
		next;
		mes "[Lazy]";
		mes "Yeah, if you go like me, you might find another one!";
		mes "But doing this on the street with the house in front of you is also inefficient.";
		mes "Come on, let's go to the sweet home in peace, since other people will feel the same way.";
		navigateto("icas_in",115,226);
		close2;
		cutin "",255;
		cloakonnpcself();
		end;
	}
	end;
}


// Main quest - Step 52
icas_in,116,222,0	script	#ep20_part_end_evt2	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep20_main == 50) {
		cloakoffnpcself( "ep20_icas_in_113_228" );
		end;
	}
	end;
}

icas_in,113,228,3	duplicate(dummy_cloaked_npc)	Aurelie#ep20_end01::ep20_icas_in_113_228	4_EP19_AURELIE
icas_in,115,227,3	duplicate(dummy_cloaked_npc)	Lazy#ep20_end02::ep20_icas_in_115_227	4_EP19_LAZY
icas_in,108,228,5	duplicate(dummy_cloaked_npc)	Voglinde#ep20_end01::ep20_icas_in_108_228	4_EP19_VOGLINDE
icas_in,108,225,6	duplicate(dummy_cloaked_npc)	Vellgunde#ep20_end01::ep20_icas_in_108_225	4_EP19_VELLGUNDE
icas_in,115,223,1	duplicate(dummy_cloaked_npc)	Maram#ep20_end01::ep20_icas_in_115_223	4_EP18_MARAM

icas_in,111,228,4	script	Leon#ep20_end01	4_EP19_LEON,{
	if (ep20_main < 50) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "This has to be the most exciting moment since waking up.";
		close3;
	}
	if (ep20_main == 50) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "You have arrived safely! This is Nyar's ability, right?";
		mes "I was surprised to suddenly fall into the ice castle";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Leon asked if I should go find the others, but I waited because everyone seemed to be coming here anyway.";
		next;
		cloakoffnpcself( "ep20_icas_in_115_227" );
		sleep2 500;
		cutin "ep19_leizi01.png",1;
		mes "[Lazy]";
		mes "Aha. So we arrived second?";
		mes "Shall we clean things up until the others arrive?";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Is that so?";
		mes "First of all, it's true that Lasgand accurately recognizes Nyar's magical powers.";
		mes "In addition, absorption is possible.";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "That's right. Judging from his attitude earlier, it seems that Lasgand's magic power itself is the purpose.";
		mes "No, if you think about it, is it natural?";
		next;
		select( "What does that mean?" );
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "An insignificant being absorbed Jormungandr's mana and became the current Rgan, right?";
		mes "And according to what you know, it also absorbs the magic cores of lower-ranking Rgans.";
		next;
		mes "[Leon]";
		mes "Lasgand must have absorbed Jormungandr's magic and became that kind of being";
		mes ".. How coveted is Nyar, Jormungand itself?";
		next;
		cutin "ep19_leizi01.png",1;
		mes "[Lazy]";
		mes "Oh! That's why you talked about the adventurer and Lehar as a great magical sacrifice!";
		mes "Because it's possible to absorb magic even if it's not the same Rgan?";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Even Rgan was born by absorbing Jormungandr's magic.";
		mes "To today's Lasgand, Lord Nyar will not look like Jormungandr, the god that Rgans worship, but only a huge mass of magical power.";
		next;
		cutin "ep19_leizi01.png",1;
		mes "[Lazy]";
		mes "Ugh~ Thinking of eating their god...";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "They've been like that since the beginning.";
		mes "In the first place, it's a creature that was born as a parasitic from the magic remaining in Jormungandr's body.";
		mes "It's ironic that none of Jormungandr's will was reflected in the Jormungand Church.";
		next;
		cutin "ep19_leizi01.png",1;
		mes "[Lazy]";
		mes "They're actually parasites living in Jormungand!";
		next;
		cloakoffnpcself( "ep20_icas_in_108_228" );
		sleep2 500;
		cloakoffnpcself( "ep20_icas_in_108_225" );
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "That's right. That's why Nyar has been sleeping without power until now.";
		mes "If Nyar uses his power, Lasgand will absorb even the remaining magic power in the traces and melt it with his own power.";
		mes "And it will be reborn as a gigantic being.";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Probably, Nyar will not continue to exercise power directly as he does.";
		mes "You don't have to feed yourself.";
		next;
		cutin "ep19_voglinde01.png",0;
		mes "[Voglinde]";
		mes "Sorry for the middle of the story, but then.";
		mes "Current Jormungandr, so can the White Cat called Nyar lift the curse?";
		next;
		mes "[Voglinde]";
		mes "Now if you wake up from your long slumber...";
		mes "If it's Jormungandr, can't we do something about it?";
		next;
		cutin "ep19_leon01.png",1;
		mes "[Leon]";
		mes "Why don't we ask next time we meet?";
		mes "But I think it's unlikely.";
		mes "The curse belongs to the Church of Jormungand. Maybe it has something to do with Lasgand.";
		next;
		cutin "ep19_vellgunde01.png",2;
		mes "[Vellgunde]";
		mes "That means that if Ras Gand is the subject of the curse, he might remove the curse if he gets rid of him?";
		mes "I'm glad I have a clear goal.";
		next;
		cutin "ep19_voglinde01.png",0;
		mes "[Voglinde]";
		mes "But how can you fight Lasgand?";
		mes "If it had happened to us, Nyar wouldn't have taken us out.";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "You're saying you have to bump into it after all.";
		mes "Ras Gand must be killed somehow before he absorbs his magic and becomes more powerful";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "That's right. I agree.";
		mes "From now on, it's a race against time...";
		next;
		select( "No other party comes." );
		cutin "ep19_leizi01.png",1;
		mes "[Lazy]";
		mes "Yeah? Where the hell did it fall and it's not coming back yet?";
		next;
		cloakoffnpcself( "ep20_icas_in_115_223" );
		sleep2 500;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Oh sorry, I'm here now";
		mes "Did we wait long?";
		next;
		select( "Why alone?" );
		mes "[Maram]";
		mes "That's because Me, Miriam, and Lehar fell near Rgan's cave.";
		mes "By the way, Lehar said he had to investigate Bagot's laboratory, so Nyar threw it here...";
		next;
		cutin "ep19_leizi01.png",1;
		mes "[Lazy]";
		mes "Rgan... did you go back in there?";
		mes "Alone?";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "No, no. I went with Miriam";
		mes "I'm here to announce that. I'm not the type to work hard anyway, so I don't think it'll help...";
		next;
		cutin "ep19_vellgunde01.png",1;
		mes "[Vellgunde]";
		mes "If it goes wrong, it will be sacrificed and become Lasgand's magic lunch box?";
		mes "You should know that my nephew is passionate.";
		next;
		cutin "ep19_voglinde01.png",0;
		mes "[Voglinde]";
		mes "I'm worried.";
		mes "What if the babies go wrong?";
		mes "Looking at Lasgand, it looks like the drift ice area is going to explode again...";
		next;
		cutin "ep19_leizi01.png",1;
		mes "[Lazy]";
		mes "Then maybe someone will join Lehar!";
		mes "Ah... isn't there someone here who is really good at that?";
		next;
		cutin "ep19_vellgunde01.png",2;
		mes "[Vellgunde]";
		mes "Why are you looking at the adventurer when you say that?";
		mes "The one who spoke did not act.";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Me and Aurelie are going to meet Nyar.";
		mes "If Lasgand's goal is Nyar, he'll use the drift ice area or the labyrinth.";
		mes "First, I'd like to visit the drift ice area.";
		next;
		cutin "ep19_leizi01.png",1;
		mes "[Lazy]";
		mes "Then, while the adventurer went looking for Lehar, you can check the maze again, right?";
		mes "That's a great idea, right?";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Then, shall we move quickly?";
		mes "Vellgunde, please organize the magic data.";
		mes "Voglinde will go with us to the drift ice area.";
		next;
		cutin "ep19_voglinde01.png",0;
		mes "[Voglinde]";
		mes "Baby... take care of my nephew.";
		mes "Be careful not to get caught by Lasgand.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Miriam said she would leave a mark at the entrance of the snake's root.";
		mes "Find that first!";
		ep20_main = 52;
		erasequest 18220;
		setquest 18221;
		close2;
		cutin "",255;
		// Todo: strange output
		cloakonnpcself();
		cloakonnpcself( "ep20_icas_in_113_228" );
		cloakonnpcself( "ep20_icas_in_108_228" );
		cloakonnpcself( "ep20_icas_in_108_225" );
		cloakonnpcself( "ep20_icas_in_115_227" );
		end;
	}
	if (ep20_main == 52) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "I will follow the others to the drift ice area and nest.";
		mes "Please take care of yourself";
		close3;
	}
	cutin "ep19_leon01.png",2;
	mes "[Leon]";
	mes "This has to be the most exciting moment since waking up.";
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_NONE, "isbegin_quest(18220) == 1" );
	end;
}


// Main quest - Step 53
jor_root1,32,75,3	script	Marker#ep20_end01	4_POINT_BLUE,{
	if (ep20_main == 52) {
		npctalk "(Small voice) This way.", "", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		warp "jor_safty2",70,249;
		end;
	}
	end;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18221) == 1" );
	end;
}

jor_safty2,70,249,0	script	#ep20_part_end_evt3	HIDDEN_WARP_NPC,1,1,{
	end;
OnTouch:
	if (ep20_main == 52) {
		cloakoffnpcself( "ep20_jor_safty2_75_258" );
		cloakoffnpcself( "ep20_jor_safty2_79_257" );
		end;
	}
	end;
}

jor_safty2,79,257,3	script(CLOAKED)	Miriam#ep20_end01::ep20_jor_safty2_79_257	4_EP18_MIRIAM,{
	cutin "ep18_miriam_01.png",0;
	mes "[Miriam]";
	mes "I did this because I wanted to know more about something.";
	mes "It would be better if we found a place to go about this.";
	close3;
}

jor_safty2,75,258,5	script(CLOAKED)	Lehar#ep20_end01::ep20_jor_safty2_75_258	4_EP19_LEHAR,{
	if (ep20_main == 52) {
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "What should I do? I don't remember at all!";
		mes "This snake oyster! They look similar everywhere you go...!";
		next;
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "Wow---- I really can't think of anything.";
		mes "Even if you get lost on a normal street, if you go to a place you've seen, it's here, isn't it?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Adventurer, do you remember where Bagot's laboratory is?";
		next;
		select( "I don't remember." );
		cutin "ep19_lehar03.png",2;
		mes "[Lehar]";
		mes "Because I followed Nyar in the first place...";
		mes "Still, if you look at the road you've passed, you'll remember it, right?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Then would you like to continue walking until you find a familiar path?";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Is that so?";
		mes "Let's split up the roads we haven't been to yet and find them!";
		next;
		mes "[Lehar]";
		mes "There are parts where I left a mark to investigate on the first floor of the root. Please look at it.";
		next;
		cutin "ep19_lehar02.png",2;
		mes "[Lehar]";
		mes "Then let's look at the second floor.";
		mes "Come to the Sacred Root when all branches are finished.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "It would be nice to know the inner atmosphere of the sacred root.";
		mes "Then move quietly.";
		ep20_main = 53;
		erasequest 18221;
		setquest 18222;
		close3;
	}
	cutin "ep19_lehar01.png",2;
	mes "[Lehar]";
	mes "Adventurers, please examine the inside of the mark I left!";
	mes "Let the results be shared from the sacred root.";
	next;
	mes "[Lehar]";
	mes "Beware the shaman.";
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18221) == 1" );
	end;
}


// Main quest - Step 54
jor_root1,69,128,3	script	Mark#ep20_check01	4_POINT_WHITE,{
	if (ep20_main == 53) {
		if (isbegin_quest(18223) == 0) {
			// Todo: this part spawn a monster?
			mes "This is a road that Lehar could not investigate.";
			mes "Let's investigate further down the road.";
			setquest 18223;
			navigateto("jor_root1",25,145);
			close;
		}
		mes "This is a path that needs investigation.";
		mes "You should investigate all the way to the inside.";
		navigateto("jor_root1",25,145);
		close;
	}
	if (ep20_main == 54) {
		mes "This way has already been checked.";
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(18222) == 1 && isbegin_quest(18223) == 0" );
	end;
}

jor_root1,25,145,3	script	Mark#ep20_check01-1	4_POINT_WHITE,{
	if (ep20_main == 53 && isbegin_quest(18223) == 1) {
		progressbar "",4;
		mes "I looked around but didn't see anything special";
		mes "Doesn't seem like the way to Bagot's lab.";
		next;
		completequest 18223;
		if (isbegin_quest(18223) < 2 || isbegin_quest(18224) < 2 || isbegin_quest(18225) < 2) {
			mes "Let's look for other marked paths.";
			close;
		}
		mes "I searched all the marked places, but couldn't find the entrance to Bagot's lab.";
		unittalk getcharid(3), "" + strcharinfo(0) + " : I need to go to the meeting point and join Lehar.", bc_self;
		ep20_main = 54;
		erasequest 18222;
		setquest 18226;
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(18223) == 1" );
	end;
}

jor_root1,35,211,3	script	Mark#ep20_check02	4_POINT_WHITE,{
	if (ep20_main == 53) {
		if (isbegin_quest(18224) == 0) {
			// Todo: this part spawn a monster?
			mes "This is a road that Lehar could not investigate.";
			mes "Let's investigate further down the road.";
			setquest 18224;
			navigateto("jor_root1",17,194);
			close;
		}
		mes "This is a path that needs investigation.";
		mes "You should investigate all the way to the inside.";
		navigateto("jor_root1",17,194);
		close;
	}
	if (ep20_main == 54) {
		mes "This way has already been checked.";
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(18222) == 1 && isbegin_quest(18224) == 0" );
	end;
}

jor_root1,17,194,3	script	Mark#ep20_check02-1	4_POINT_WHITE,{
	if (ep20_main == 53 && isbegin_quest(18224) == 1) {
		progressbar "",4;
		mes "I looked around but didn't see anything special";
		mes "Doesn't seem like the way to Bagot's lab.";
		next;
		completequest 18224;
		if (isbegin_quest(18223) < 2 || isbegin_quest(18224) < 2 || isbegin_quest(18225) < 2) {
			mes "Let's look for other marked paths.";
			close;
		}
		mes "I searched all the marked places, but couldn't find the entrance to Bagot's lab.";
		unittalk getcharid(3), "" + strcharinfo(0) + " : I need to go to the meeting point and join Lehar.", bc_self;
		ep20_main = 54;
		erasequest 18222;
		setquest 18226;
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(18224) == 1" );
	end;
}

jor_root1,254,66,3	script	Mark#ep20_check03	4_POINT_WHITE,{
	if (ep20_main == 53) {
		if (isbegin_quest(18225) == 0) {
			// Todo: this part spawn a monster?
			mes "This is a road that Lehar could not investigate.";
			mes "Let's investigate further down the road.";
			setquest 18225;
			navigateto("jor_root1",278,74);
			close;
		}
		mes "This is a path that needs investigation.";
		mes "You should investigate all the way to the inside.";
		navigateto("jor_root1",278,74);
		close;
	}
	if (ep20_main == 54) {
		mes "This way has already been checked.";
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(18222) == 1 && isbegin_quest(18225) == 0" );
	end;
}

jor_root1,278,74,3	script	Mark#ep20_check03-1	4_POINT_WHITE,{
	if (ep20_main == 53 && isbegin_quest(18225) == 1) {
		progressbar "",4;
		mes "I looked around but didn't see anything special";
		mes "Doesn't seem like the way to Bagot's lab.";
		next;
		completequest 18225;
		if (isbegin_quest(18223) < 2 || isbegin_quest(18224) < 2 || isbegin_quest(18225) < 2) {
			mes "Let's look for other marked paths.";
			close;
		}
		mes "I searched all the marked places, but couldn't find the entrance to Bagot's lab.";
		unittalk getcharid(3), "" + strcharinfo(0) + " : I need to go to the meeting point and join Lehar.", bc_self;
		ep20_main = 54;
		erasequest 18222;
		setquest 18226;
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(18225) == 1" );
	end;
}


// Main quest - Step 55
jor_sanct,133,86,3	script	Mark#ep20_end04	4_POINT_BLUE,{
	callfunc( "F_ep20_checkTransform" );
	if (checkweight(101162,1, 1001217,10) == 0) {
		mes "You cannot proceed with the quest because you have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ep20_main < 54)
		end;
	if (ep20_main == 54) {
		// Todo: window and text adjustment
		unittalk getcharid(3), "" + strcharinfo(0) + " : ...Lehar...?", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 2000;
		setpcblock PCBLOCK_NPC, false;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Here I am!";
		mes "Did you find Bagot's lab?";
		next;
		select( "Couldn't find it" );
		mes "[Lehar]";
		mes "It would be nice if I could see Nyar again.";
		mes "Wouldn't it be nice to ask for directions?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Lasgand is after him, so that's dangerous.";
		mes "I think Nyar knows that and won't appear here anymore...";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "That's right";
		mes "I had a short thought";
		mes "Then what should we do now? It's a waste to just back down like this.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "I'd like to find some clues about Bagot's research and progress...";
		mes "I feel like I'm just messing around in the dark";
		next;
		select( "Let's look at the trend of the Rgans" );
		mes "[Miriam]";
		mes "That's right";
		mes "Rgans are now aware of Nyar's existence.";
		mes "Did you say that you are a divine being necessary for the second coming of Jormungandr?";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "If something happened to Lasgand, everyone here would know.";
		mes "Then, since we've come this far, shall we go back after researching trends?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Then I'll take a look at the east side.";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Then I'll check out the west side.";
		mes "Adventurers, please check the direction towards the central square.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Don't forget to transform. I'll give you my spare transformation scrolls.";
		ep20_main = 55;
		erasequest 18226;
		setquest 18227;
		getitem 101162,1;	// Ep19_Rgan_Scroll
		getitem 1001217,10;	// Ep20_Cat_Whiskers
		getexp2 68305979,0;
		getexp 0,11135835;
		add_reputation_points( REPU_EP20, 40 );
		close2;
		cutin "",255;
		cloakonnpcself();
		end;
	}
	mes "This is the place Lehar marked.";
	mes "I have nothing to look at right now.";
	close;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18226) == 1" );
	end;
}


// Main quest - Step 56
jor_sanct,147,207,6	duplicate(dummy_cloaked_npc)	Healer#ep20_end02::ep20_jor_sanct_147_207	EP20_RGAN_HEALER
jor_sanct,156,205,1	duplicate(dummy_cloaked_npc)	Priest#ep20_end03::ep20_jor_sanct_156_205	4_EP19_RGAN_R1
jor_sanct,147,203,7	duplicate(dummy_cloaked_npc)	Bishop#ep20_end04::ep20_jor_sanct_147_203	4_EP19_RGAN_SR2
jor_sanct,151,201,1	duplicate(dummy_cloaked_npc)	Bishop#ep20_end05::ep20_jor_sanct_151_201	4_EP19_RGAN_SR3
jor_sanct,155,202,1	duplicate(dummy_cloaked_npc)	Priest#ep20_end06::ep20_jor_sanct_155_202	4_EP19_RGAN_R2
jor_sanct,143,205,5	duplicate(dummy_cloaked_npc)	Priest#ep20_end07::ep20_jor_sanct_143_205	4_EP19_RGAN_R3
jor_sanct,144,202,7	duplicate(dummy_cloaked_npc)	Cult Shaman#ep20_end08::ep20_jor_sanct_144_202	EP20_RGAN_WARLOCK
jor_sanct,157,209,3	duplicate(dummy_cloaked_npc)	Cult Healer#ep20_end09::ep20_jor_sanct_157_209	EP20_RGAN_HEALER
jor_sanct,140,202,3	duplicate(dummy_cloaked_npc)	Cult Guardian#ep20_end10::ep20_jor_sanct_140_202	EP20_JORGAN_GUARDIAN
jor_sanct,143,201,3	duplicate(dummy_cloaked_npc)	Sanctuary Shaman#ep20_end11::ep20_jor_sanct_143_201	EP20_RGAN_WARLOCK
jor_sanct,146,197,3	duplicate(dummy_cloaked_npc)	Bishop#ep20_end12::ep20_jor_sanct_146_197	4_EP19_RGAN_SR1
jor_sanct,150,197,1	duplicate(dummy_cloaked_npc)	Bishop#ep20_end13::ep20_jor_sanct_150_197	4_EP19_RGAN_SR2
jor_sanct,154,198,1	duplicate(dummy_cloaked_npc)	Cult Shaman#ep20_end14::ep20_jor_sanct_154_198	EP20_JORGAN_WARLOCK
jor_sanct,159,200,1	duplicate(dummy_cloaked_npc)	Cult Healer#ep20_end15::ep20_jor_sanct_159_200	EP20_RGAN_HEALER
jor_sanct,142,209,4	duplicate(dummy_cloaked_npc)	Cult Healer#ep20_end16::ep20_jor_sanct_142_209	EP20_JORGAN_HEALER
jor_sanct,158,203,2	duplicate(dummy_cloaked_npc)	Priest#ep20_end17::ep20_jor_sanct_158_203	4_EP19_RGAN_R1
jor_sanct,148,200,6	duplicate(dummy_cloaked_npc)	Priest#ep20_end18::ep20_jor_sanct_148_200	4_EP19_RGAN_R2
jor_sanct,141,209,4	duplicate(dummy_cloaked_npc)	Priest#ep20_end19::ep20_jor_sanct_141_209	4_EP19_RGAN_R3
jor_sanct,154,208,3	duplicate(dummy_cloaked_npc)	Priest#ep20_end20::ep20_jor_sanct_154_208	4_EP19_RGAN_R1

jor_sanct,150,207,3	script	Bishop#ep20_end01	4_EP19_RGAN_SR1,{
	callfunc( "F_ep20_checkTransform" );
	if (ep20_main == 55) {
		mes "[Bishop]";
		mes "Come here too.";
		mes "Sooner or later, the great cause of our church will be accomplished.";
		next;
		select( "What if?", "Did you find the sacred offering?" );	// note: the selection doesn't change the text
		mes "[Bishop]";
		mes "That white divine being.";
		mes "Exists for the return of the pure Jormungand...";
		next;
		mes "[Bishop]";
		mes "Lasgand has gone to get it now.";
		mes "We gathered to offer prayers for the consecration of magic.";
		next;
		mes "[Priest]";
		mes "Lasgand has obtained new powers...";
		mes "We will underpin our prayers and become one with the source...";
		next;
		select( "A new power?" );
		mes "[Priest]";
		mes "You only worked in the maze?";
		mes "You should also come and spend your magic here and pray.";
		mes "It seems that the divine object brought by a human named Bagot has finally served Lasgand.";
		next;
		mes "[Bishop]";
		mes "Our Rgan originated as one and are united as one.";
		mes "Lasgand's will is our will and God's will.";
		next;
		mes "[Bishop]";
		mes "The day the one with true power will break the shell!";
		mes "The day I get out of the cold ice prison and go out into the world!";
		next;
		specialeffect2 EF_SCREEN_QUAKE;
		mes "[Healer]";
		mes "To come! To come!";
		mes "Death to the Continent!";
		cloakoffnpcself( "ep20_jor_sanct_147_203" );
		cloakoffnpcself( "ep20_jor_sanct_151_201" );
		cloakoffnpcself( "ep20_jor_sanct_155_202" );
		npctalk "Come! Come!", "ep20_jor_sanct_147_203", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_151_201", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_155_202", bc_self;
		next;
		specialeffect2 EF_SCREEN_QUAKE;
		mes "[Bishop]";
		mes "Kang Shin Jae Rim! All things are blessed!";
		mes "The mighty god reigns! All things are blessed!";
		cloakoffnpcself( "ep20_jor_sanct_143_205" );
		cloakoffnpcself( "ep20_jor_sanct_144_202" );
		cloakoffnpcself( "ep20_jor_sanct_157_209" );
		npctalk "It's coming! It's coming! It's all over!", "ep20_jor_sanct_143_205", bc_self;
		npctalk "It's coming! It's coming! It's all over!", "ep20_jor_sanct_144_202", bc_self;
		npctalk "It's coming! It's coming! It's all over!", "ep20_jor_sanct_157_209", bc_self;
		npctalk "It's coming! It's coming! It's all over", "ep20_jor_sanct_147_203", bc_self;
		npctalk "It's coming! It's coming! It's all over", "ep20_jor_sanct_151_201", bc_self;
		npctalk "It's coming! It's coming! It's all over", "ep20_jor_sanct_155_202", bc_self;
		next;
		specialeffect2 EF_SCREEN_QUAKE;
		mes "[Priest]";
		mes "Dohae ! Dohae !";
		mes "A new world with our god!";
		cloakoffnpcself( "ep20_jor_sanct_140_202" );
		cloakoffnpcself( "ep20_jor_sanct_143_201" );
		cloakoffnpcself( "ep20_jor_sanct_146_197" );
		cloakoffnpcself( "ep20_jor_sanct_150_197" );
		npctalk "Death to the continent across the sea! New World!", "ep20_jor_sanct_140_202", bc_self;
		npctalk "Death to the continent across the sea! New world!", "ep20_jor_sanct_143_201", bc_self;
		npctalk "Death to the Continent! New World!", "ep20_jor_sanct_146_197", bc_self;
		npctalk "Death to the Continent! New World!", "ep20_jor_sanct_150_197", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_147_203", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_151_201", bc_self;
		npctalk "Illustration! Diagram!", "ep20_jor_sanct_155_202", bc_self;
		npctalk "Diagram! Diagram! All things evil!", "ep20_jor_sanct_143_205", bc_self;
		npctalk "It's coming! It's coming! It's all over!", "ep20_jor_sanct_144_202", bc_self;
		npctalk "It's coming! It's coming! It's all over!", "ep20_jor_sanct_157_209", bc_self;
		// close2;	// official
		next;
		specialeffect2 EF_TETRA_FIRE;
		sleep2 500;
		npctalk "Come here", "", bc_self;
		npctalk "Come here", "ep20_jor_sanct_147_207", bc_self;
		npctalk "Come here", "ep20_jor_sanct_156_205", bc_self;
		npctalk "Come here", "ep20_jor_sanct_147_203", bc_self;
		npctalk "Come here", "ep20_jor_sanct_151_201", bc_self;
		npctalk "Come here", "ep20_jor_sanct_155_202", bc_self;
		npctalk "Come here", "ep20_jor_sanct_143_205", bc_self;
		npctalk "Our god!", "ep20_jor_sanct_144_202", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_157_209", bc_self;
		npctalk "The Second Coming!", "ep20_jor_sanct_140_202", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_143_201", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_146_197", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_150_197", bc_self;
		specialeffect2 EF_SCREEN_QUAKE;
		cloakoffnpcself( "ep20_jor_sanct_154_198" );
		cloakoffnpcself( "ep20_jor_sanct_159_200" );
		cloakoffnpcself( "ep20_jor_sanct_142_209" );
		npctalk "Come! Come!", "ep20_jor_sanct_154_198", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_159_200", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_142_209", bc_self;
		sleep2 500;
		specialeffect2 EF_TETRA_FIRE;
		cloakoffnpcself( "ep20_jor_sanct_158_203" );
		cloakoffnpcself( "ep20_jor_sanct_148_200" );
		cloakoffnpcself( "ep20_jor_sanct_141_209" );
		cloakoffnpcself( "ep20_jor_sanct_154_208" );
		npctalk "Come! Come!", "ep20_jor_sanct_158_203", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_148_200", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_141_209", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_154_208", bc_self;
		sleep2 1000;
		specialeffect2 EF_TETRA_FIRE;
		sleep2 500;
		npctalk "Come! Come!", "", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_147_207", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_156_205", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_147_203", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_151_201", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_155_202", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_143_205", bc_self;
		sleep2 500;
		npctalk "Come! Come!", "ep20_jor_sanct_144_202", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_157_209", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_140_202", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_143_201", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_146_197", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_150_197", bc_self;
		sleep2 1000;
		specialeffect2 EF_TETRA_FIRE;
		npctalk "Come! Come!", "ep20_jor_sanct_154_198", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_159_200", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_142_209", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_158_203", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_148_200", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_141_209", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_154_208", bc_self;
		sleep2 500;
		specialeffect2 EF_TETRA_FIRE;
		sleep2 1000;
		npctalk "Come here!", "", bc_self;
		sleep2 500;
		npctalk "Come!", "ep20_jor_sanct_147_207", bc_self;
		npctalk "Come here!", "ep20_jor_sanct_156_205", bc_self;
		npctalk "Come!", "ep20_jor_sanct_147_203", bc_self;
		npctalk "Come!", "ep20_jor_sanct_151_201", bc_self;
		npctalk "Come here!", "ep20_jor_sanct_155_202", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_143_205", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_144_202", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_157_209", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_140_202", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_143_201", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_146_197", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_150_197", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_154_198", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_159_200", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_142_209", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_158_203", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_148_200", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_141_209", bc_self;
		npctalk "Come! Come!", "ep20_jor_sanct_154_208", bc_self;
		sleep2 500;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "What is this all about?";
		mes "What's everyone out of their minds?!";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "It seems like everyone is drunk with unknown madness.";
		mes "Let's avoid the seat for now...";
		next;
		cutin "",255;
		sleep2 500;
		specialeffect2 EF_TETRA_FIRE;
		specialeffect2 EF_SCREEN_QUAKE;
		sleep2 500;
		cutin "ep20_nyar02.png",1;
		mes "[Nyar]";
		mes "Urrruk!!!";
		npctalk "Holy offering!", "", bc_self;
		npctalk "Sacred sacrifice!", "ep20_jor_sanct_147_207", bc_self;
		npctalk "Sacred sacrifice!", "ep20_jor_sanct_156_205", bc_self;
		npctalk "Sacred sacrifice!", "ep20_jor_sanct_147_203", bc_self;
		npctalk "Sacred sacrifice!", "ep20_jor_sanct_151_201", bc_self;
		npctalk "Sacred sacrifice!", "ep20_jor_sanct_155_202", bc_self;
		close2;
		cutin "",255;
		ep20_main = 56;
		erasequest 18227;
		setquest 18228;
		setpcblock PCBLOCK_NPC, true;
		sleep2 500;
		setpcblock PCBLOCK_NPC, false;
		specialeffect2 EF_BASH3D6;
		warp "jor_twig",189,196;
		end;
	}
	end;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18227) == 1" );
	end;
}


// Main quest - Step 57
jor_twig,187,198,3	script	White Cat#ep20end_nyar01	EP20_NPC_NYAR,{
	if (ep20_main == 56) {
		select( "Nyarr..?" );
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Have you been moved again?";
		mes "Weren't we just watching a crazy rally at their base?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "I couldn't find the Bagot's lab and was taken to the wrong place again...";
		next;
		cutin "ep20_nyar02.png",1;
		mes "[White Cat]";
		mes "I'm sorry!!!!";
		next;
		specialeffect2 EF_SCREEN_QUAKE;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Another vibration!";
		mes "Is this an earthquake? Is this an earthquake?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "This is not an earthquake";
		mes "I feel a huge clash of power!";
		mes "Could it be?";
		next;
		cutin "ep20_nyar02.png",1;
		mes "[White Cat]";
		mes "Wow!!!! Meaaaaagh!!!";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "I think it has something to do with Nyar calling us here!!";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Come on!!";
		ep20_main = 57;
		erasequest 18228;
		setquest 18229;
		navigateto("jor_twig",180,123);
		close2;
		cutin "",255;
		cloakonnpcself();
		end;
	}
	if (ep20_main == 57) {
		npctalk "Wow ok! woo ok!", "", bc_self;
		end;
	}
	npctalk "What's up", "", bc_self;
	end;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18228) == 1" );
	end;
}


// Main quest - Step 58
jor_twig,179,120,7	duplicate(dummy_cloaked_npc)	Lehar#ep20_end02::ep20_jor_twig_179_120	4_EP19_LEHAR
jor_twig,184,121,1	duplicate(dummy_cloaked_npc)	Miriam#ep20_end02::ep20_jor_twig_184_121	4_EP18_MIRIAM
jor_twig,178,126,3	duplicate(dummy_cloaked_npc)	Bagot#ep20_end01::ep20_jor_twig_178_126	4_EP18_BAGOT
jor_twig,176,129,3	duplicate(dummy_cloaked_npc)	Voglinde#ep20_end02::ep20_jor_twig_176_129	4_EP19_VOGLINDE

jor_twig,180,123,1	script	White Cat#ep20end_nyar02	EP20_NPC_NYAR,{
	if (ep20_main == 57) {
		setpcblock PCBLOCK_NPC, true;
		cloakoffnpcself( "ep20_jor_twig_179_120" );
		sleep2 500;
		cloakoffnpcself( "ep20_jor_twig_184_121" );
		sleep2 500;
		setpcblock PCBLOCK_NPC, false;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "What's up?";
		mes "Why did it suddenly stop?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Wait, something is coming";
		close2;	// official
		setpcblock PCBLOCK_NPC, true;
		cutin "",255;
		sleep2 500;
		npctalk "Wow!! Wow!", "", bc_self;
		sleep2 500;
		specialeffect2 EF_SCREEN_QUAKE;
		cloakoffnpcself( "ep20_jor_twig_178_126" );
		npctalk "Aww! What is this cat! Why are there so many cats!!!", "ep20_jor_twig_178_126", bc_self;
		npctalk "Hyaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaah!!", "", bc_self;
		sleep2 500;
		specialeffect EF_DQ9_CHARGE3, AREA, "ep20_jor_twig_178_126";
		cloakoffnpcself( "ep20_jor_twig_176_129" );
		sleep2 500;
		npctalk "What is this?!", "ep20_jor_twig_178_126", bc_self;
		specialeffect EF_BLUELINE, AREA, "ep20_jor_twig_178_126";
		sleep2 1500;
		npctalk "What is it? It's a restraint. Give up now!", "ep20_jor_twig_176_129", bc_self;
		sleep2 1500;
		setpcblock PCBLOCK_NPC, false;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Oh my God... what's all this about?";
		next;
		cutin "ep19_lehar05.png",2;
		mes "[Lehar]";
		mes "Bagot! Bagot was here?!";
		next;
		cutin "ep18_bagot_01.png",1;
		mes "[Bagot]";
		mes "Hahahahaha!!! If you knew everything would end just because you got caught...";
		mes "You're welcome!";
		mes "This is the beginning, foolish humans!";
		next;
		cutin "ep19_voglinde01.png",0;
		mes "[Voglinde]";
		mes "Oh baby! Lehar!";
		mes "Go ahead and catch this guy!";
		next;
		select( "What happened?" );
		mes "[Voglinde]";
		mes "Looks like Lasgand has succeeded in using Ymir's heart fragment.";
		next;
		cutin "ep18_bagot_01.png",2;
		mes "[Bagot]";
		mes "Humans!";
		mes "You guys are already late~?";
		mes "Get ready for a new god!";
		next;
		cutin "ep19_voglinde01.png",0;
		mes "[Voglinde]";
		mes "I don't have time";
		mes "Mrs. Aurelie and Master Leon are stopping Lasgand!";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "I will help Voglinde.";
		mes "Are you going to arrest Bagot and go to the ice castle?";
		next;
		cutin "ep19_voglinde01.png",0;
		mes "[Voglinde]";
		mes "Lehar, help you too.";
		mes "You can't take your eyes off it by using strange magic tools.";
		next;
		cutin "ep19_lehar01.png",2;
		mes "[Lehar]";
		mes "Okay";
		mes "Then I'll go first and get the diving arwin!";
		next;
		cloakonnpcself( "ep20_jor_twig_179_120" );
		sleep2 500;
		cutin "ep18_bagot_03.png",2;
		mes "[Bagot]";
		mes "giggling";
		mes "I didn't fail?";
		mes "I've created a masterpiece!";
		mes "Since I witnessed that moment, I have no regrets~";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "I'll shut my mouth first.";
		mes "Voglinde, let's go.";
		next;
		select( "What does it mean that Bagot succeeded?" );
		cutin "ep19_voglinde01.png",2;
		mes "[Voglinde]";
		mes "Details can be found in the center of the nest!";
		mes "I need your help!";
		mes "Please follow me.";
		next;
		cutin "ep20_nyar03.png",1;
		mes "[White Cat]";
		mes "Anghong! Aengwong!";
		ep20_main = 58;
		erasequest 18229;
		setquest 18230;
		navigateto("jor_twig",142,153);
		close2;
		cutin "",255;
		cloakonnpcself( "ep20_jor_twig_178_126" );
		cloakonnpcself( "ep20_jor_twig_176_129" );
		end;
	}
	if (ep20_main == 58) {
		npctalk "Aang-Ang! Aang-Ang!", "", bc_self;
		navigateto("jor_twig",142,153);
		end;
	}
	npctalk "Meow", "", bc_self;
	end;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18229) == 1" );
	end;
}


// Main quest - Step 59
jor_twig,139,154,0	script	#ep20end_evt4	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep20_main == 58) {
		cloakoffnpcself( "ep20_jor_twig_138_152" );
		cloakoffnpcself( "ep20_jor_twig_138_157" );
		cloakoffnpcself( "ep20_jor_twig_140_155" );
		end;
	}
	if (ep20_main == 59 || ep20_main == 60 || ep20_main == 61) {
		cloakoffnpcself( "ep20_jor_twig_138_157" );
		cloakoffnpcself( "ep20_jor_twig_138_152" );
		end;
	}
	end;
}

// jor_twig,138,157,5	script	Leon#ep20_end02::ep20_jor_twig_138_157	4_EP19_LEON,{
jor_twig,140,155,5	duplicate(dummy_cloaked_npc)	Lasgand#ep20end_las01::ep20_jor_twig_140_155	4_EP20_LASGAND

jor_twig,140,164,1	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_140_164	EP20_NPC_NYAR
jor_twig,143,161,3	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_143_161	EP20_NPC_NYAR
jor_twig,146,158,3	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_146_158	EP20_NPC_NYAR
jor_twig,149,155,3	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_149_155	EP20_NPC_NYAR
jor_twig,146,152,1	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_146_152	EP20_NPC_NYAR
jor_twig,143,149,1	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_143_149	EP20_NPC_NYAR
jor_twig,140,146,1	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_140_146	EP20_NPC_NYAR
jor_twig,137,149,7	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_137_149	EP20_NPC_NYAR
jor_twig,134,152,7	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_134_152	EP20_NPC_NYAR
jor_twig,130,155,7	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_130_155	EP20_NPC_NYAR
jor_twig,134,158,5	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_134_158	EP20_NPC_NYAR
jor_twig,137,161,5	duplicate(dummy_cloaked_npc)	Nyar's clone#ep20end_nya::ep20_jor_twig_137_161	EP20_NPC_NYAR

jor_twig,142,153,1	script	White Cat#ep20end_nyar03	EP20_NPC_NYAR,4,4,{
	if (ep20_main == 58) {
		cloakoffnpcself( "ep20_jor_twig_138_152" );
		cloakoffnpcself( "ep20_jor_twig_138_157" );
		cloakoffnpcself( "ep20_jor_twig_140_155" );
		setpcblock PCBLOCK_NPC, true;
		npctalk "Haha!", "", bc_self;
		sleep2 500;
		specialeffect EF_SCREEN_QUAKE, AREA, "ep20_jor_twig_140_155";
		sleep2 500;
		npctalk "It's a waste of time. Should I give in?", "ep20_jor_twig_140_155", bc_self;
		sleep2 500;
		npctalk "Nyar...!", "ep20_jor_twig_138_152", bc_self;
		npctalk "I'll add more power!", "ep20_jor_twig_138_157", bc_self;
		sleep2 500;
		specialeffect EF_BLUELINE, AREA, "ep20_jor_twig_140_155";
		sleep2 1000;
		npctalk "I thought it was useless?", "ep20_jor_twig_140_155", bc_self;
		sleep2 1000;
		npctalk "Kwaoong!", "", bc_self;
		sleep2 1000;
		specialeffect EF_DQ9_CHARGE3, AREA, "ep20_jor_twig_140_155";
		sleep2 500;
		npctalk "A foolish thing, this kind of power. It's enough to absorb it all.", "ep20_jor_twig_140_155", bc_self;
		npctalk "Kwaoong!", "", bc_self;
		sleep2 500;
		cloakoffnpcself( "ep20_jor_twig_140_164" );
		sleep2 500;
		cloakoffnpcself( "ep20_jor_twig_143_161" );
		cloakoffnpcself( "ep20_jor_twig_146_158" );
		cloakoffnpcself( "ep20_jor_twig_149_155" );
		sleep2 500;
		cloakoffnpcself( "ep20_jor_twig_146_152" );
		cloakoffnpcself( "ep20_jor_twig_143_149" );
		cloakoffnpcself( "ep20_jor_twig_140_146" );
		sleep2 500;
		cloakoffnpcself( "ep20_jor_twig_137_149" );
		cloakoffnpcself( "ep20_jor_twig_134_152" );
		cloakoffnpcself( "ep20_jor_twig_130_155" );
		sleep2 500;
		cloakoffnpcself( "ep20_jor_twig_134_158" );
		cloakoffnpcself( "ep20_jor_twig_137_161" );
		sleep2 1000;
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_140_164";
		sleep2 500;
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_143_161";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_146_158";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_149_155";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_146_152";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_143_149";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_140_146";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_137_149";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_134_152";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_130_155";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_134_158";
		specialeffect EF_BEGINSPELL5, AREA, "ep20_jor_twig_137_161";
		sleep2 500;
		npctalk "What tricks?", "ep20_jor_twig_140_155", bc_self;
		sleep2 2000;
		npctalk "A futile struggle anyway.", "ep20_jor_twig_140_155", bc_self;
		sleep2 500;
		specialeffect EF_BLUELINE, AREA, "ep20_jor_twig_140_155";
		sleep2 1000;
		npctalk "Nyaow!", "ep20_jor_twig_140_164", bc_self;
		sleep2 500;
		npctalk "Nyaow!", "ep20_jor_twig_143_161", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_146_158", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_149_155", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_146_152", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_143_149", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_140_146", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_137_149", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_134_152", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_130_155", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_134_158", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_137_161", bc_self;
		npctalk "Nyaow!", "ep20_jor_twig_140_155", bc_self;
		sleep2 500;
		specialeffect EF_DQ9_CHARGE4, AREA, "ep20_jor_twig_140_155";
		sleep2 500;
		specialeffect EF_BLUELINE, AREA, "ep20_jor_twig_140_155";
		sleep2 500;
		cloakonnpcself( "ep20_jor_twig_140_164" );
		sleep2 500;
		cloakonnpcself( "ep20_jor_twig_143_161" );
		cloakonnpcself( "ep20_jor_twig_146_158" );
		cloakonnpcself( "ep20_jor_twig_149_155" );
		cloakonnpcself( "ep20_jor_twig_146_152" );
		cloakonnpcself( "ep20_jor_twig_143_149" );
		cloakonnpcself( "ep20_jor_twig_140_146" );
		cloakonnpcself( "ep20_jor_twig_137_149" );
		cloakonnpcself( "ep20_jor_twig_134_152" );
		cloakonnpcself( "ep20_jor_twig_130_155" );
		cloakonnpcself( "ep20_jor_twig_134_158" );
		cloakonnpcself( "ep20_jor_twig_137_161" );
		cloakonnpcself( "ep20_jor_twig_140_155" );
		ep20_main = 59;
		erasequest 18230;
		setquest 18231;
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	if (ep20_main == 59 || ep20_main == 60 || ep20_main == 61) {
		npctalk "Nyaoooooo---", "", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 500;
		setpcblock PCBLOCK_NPC, false;
		npctalk "Did you call?", "ep20_jor_twig_138_157", bc_self;
		npctalk "Adventurer?", "ep20_jor_twig_138_152", bc_self;
		end;
	}
	if (ep20_main == 100) {
		.@md_name$ = "Separated Sanctuary";

		mes "If you ask Nyar's alter ego you will be able to enter Story Mode in MD " + .@md_name$ + ".";
		mes "Adventurers who have already completed may only enter to accompany fellow adventurers.";
		mes "Would you like to enter for your colleague?";
		next;
		select( "Please send in '" + .@md_name$ + "'!" );

		// note: unknown entrance dialog
		if (is_party_leader() == true || getcharid(1) < 1) {	// shouldn't happen
			mes "Currently unavailable to accompany you. Please check if the colleague to accompany you has applied for MD.";
			close;
		}
		switch( instance_enter(.@md_name$) ) {
		case IE_OTHER:
			mes "^ff0000An unknown error occurred.^000000";
			close;
		case IE_NOINSTANCE:
		case IE_NOMEMBER:
			mes "Currently unavailable to accompany you. Please check if the colleague to accompany you has applied for MD.";
			close;
		case IE_OK:
			mapannounce "jor_twig", "" + strcharinfo(0) + " of the party " + getpartyname(getcharid(1)) + " enters " + .@md_name$ + ".", bc_map, 0xFF99;
			// warp "1@twas",96,66;
			end;
		}
		end;
	}
	end;

OnTouch:	// actually unknown effect
	if (ep20_main == 58) {
		cloakoffnpcself( "ep20_jor_twig_138_152" );
		cloakoffnpcself( "ep20_jor_twig_138_157" );
		cloakoffnpcself( "ep20_jor_twig_140_155" );
		end;
	}
	if (ep20_main == 59 || ep20_main == 60 || ep20_main == 61) {
		cloakoffnpcself( "ep20_jor_twig_138_157" );
		cloakoffnpcself( "ep20_jor_twig_138_152" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18230) == 1" );
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "ep20_main == 100" );
	end;
}

// jor_twig,138,152,7	script	Aurelie#ep20_end02::ep20_jor_twig_138_152	4_EP19_AURELIE,{


// Main quest - Step 60
jor_twig,138,157,5	script(CLOAKED)	Leon#ep20_end02::ep20_jor_twig_138_157	4_EP19_LEON,{
	if (ep20_main == 59) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Where did Lasgand go?";
		mes "They suddenly disappeared...?";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "I think Nyar did something...";
		mes "I never thought I'd succeed in absorbing the power of Ymir's Heart Fragment anyway.";
		mes "A man named Bagot was not normal.";
		next;
		cutin "ep20_nyar03.png",1;
		mes "[Nyar]";
		mes "Awwhh...";
		mes "Nyangnyangnyangnyangnyangnyangnyangnyang..";
		next;
		cutin "ep20_nyar04.png",1;
		mes "[Nyar]";
		mes "gururruk.. gurruk...";
		mes "weok";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Ummm. Ahh... such a principle...?";
		next;
		select("What do you say?" );
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "It seems that Lasgand separated Ymir's heart fragment before it fully absorbed its power.";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Lasgand tried to absorb all of Jormungandr's remaining power and the power of the barrier for complete fusion";
		next;
		cutin "ep20_nyar01.png",1;
		mes "[Nyar]";
		mes "Aeng-Aeng.. A-Aeng";
		mes "(Somehow he looks down.)";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "It looks like Lasgand was sent to a separate space like Isgard's barrier, but there must be a limit to how long Nyar can last.";
		next;
		select( "Separation?" );
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Same place, same time, different dimension...";
		mes "It's a different channel, but I think Lasgand must have noticed it by now.";
		next;
		cutin "ep20_nyar02.png",1;
		mes "[Nyar]";
		mes "Aeoohong.... Guruk";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "They say there's nothing more to stop him once he breaks the forced separation sanctuary.";
		mes "Please block the power of Ymir's Heart Fragment before it fully fuses.";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "I think Leon and I should help Nyar.";
		mes "Why don't the adventurers come after they're fully prepared and remove Lasgand's power?";
		next;
		cutin "ep20_nyar03.png",1;
		mes "[Nyar]";
		mes "Wow! Woong!";
		mes "Gorruk Gorruk";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "I think Nyar can maintain a separate sanctuary with Leon, and I can guide the passage leading to the sanctuary.";
		next;
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Even if you can't defeat Lasgand right now, just taking his power will be of great help.";
		mes "If you are facing danger, escape immediately.";
		next;
		cutin "ep19_aurelie01.png",0;
		mes "[Aurelie]";
		mes "Nyar sent an alter ego along with it.";
		mes "Anyway, let's get ready and go.";
		mes "Talk to me when you're ready";
		next;
		cutin "ep20_nyar04.png",1;
		mes "[Nyar]";
		mes "Mya myaeng ~ Aingong";
		ep20_main = 60;
		erasequest 18231;
		setquest 18232;
		close3;
	}
	if (ep20_main == 60) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "It's going to be a big fight";
		mes "Join your colleagues.";
		mes "Aurelie will guide you.";
		close3;
	}
	if (ep20_main == 61) {
		cutin "ep19_leon01.png",2;
		mes "[Leon]";
		mes "Please return to the Ice Castle and tell Voglinde the details.";
		mes "I will check the barrier with Nyar here.";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18231) == 1" );
	end;
}


// Main quest - Step 61 (instance "Separate sanctuary")
// jor_twig,138,152,7	script	Aurelie#ep20_end02::ep20_jor_twig_138_152	4_EP19_AURELIE,{


// Main quest - Step 62 (final)
icas_in2,248,112,0	script	#ep20_pr_endevt	HIDDEN_WARP_NPC,1,1,{
	end;
OnTouch:
	if (ep20_main == 61) {
		cloakoffnpcself( "ep20_icas_in2_247_122" );
		cloakoffnpcself( "ep20_icas_in2_246_119" );
		cloakoffnpcself( "ep20_icas_in2_251_121" );
		cloakoffnpcself( "ep20_icas_in2_252_113" );	// note: 4_EP19_LAZY is never uncloaked officially, but the npc appears in the text (bug?)
		end;
	}
	end;
}

icas_in2,246,119,5	duplicate(dummy_cloaked_npc)	Maram#ep20_end02::ep20_icas_in2_246_119	4_EP18_MARAM
icas_in2,251,121,3	duplicate(dummy_cloaked_npc)	Miriam#ep20_end03::ep20_icas_in2_251_121	4_EP18_MIRIAM
icas_in2,245,115,7	duplicate(dummy_cloaked_npc)	Leon#ep20_end03::ep20_icas_in2_245_115	4_EP19_LEON
icas_in2,246,112,7	duplicate(dummy_cloaked_npc)	Aurelie#ep20_end03::ep20_icas_in2_246_112	4_EP19_AURELIE
icas_in2,252,113,1	duplicate(dummy_cloaked_npc)	Lazy#ep20_end03::ep20_icas_in2_252_113	4_EP19_LAZY

icas_in2,247,122,3	script(CLOAKED)	Captive Bagot#ep20::ep20_icas_in2_247_122	4_EP18_BAGOT,{
	mes "The whole body is restrained.";
	close;
}

// Main quest - Step 62 (final)
// Part of the daily quests "Voglinde's Extermination Operation 1" and "Voglinde's Extermination Operation 2"
// icas_in2,253,118,3	script	Voglinde#ep20_end03	4_EP19_VOGLINDE,{
